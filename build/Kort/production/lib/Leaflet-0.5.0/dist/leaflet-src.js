/*31a53fef8daf66b9dfe3fe4c53b134067a10a56c*/(function(e,b,f){var a,d;if(typeof exports!==f+""){a=exports}else{d=e.L;a={};a.noConflict=function(){e.L=d;return this};e.L=a}a.version="0.5";a.Util={extend:function(l){var k=Array.prototype.slice.call(arguments,1),m,h,g,n;for(h=0,g=k.length;h<g;h++){n=k[h]||{};for(m in n){if(n.hasOwnProperty(m)){l[m]=n[m]}}}return l},bind:function(h,i){var g=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return h.apply(i,g||arguments)}},stamp:(function(){var h=0,g="_leaflet_id";return function(i){i[g]=i[g]||++h;return i[g]}}()),limitExecByInterval:function(j,l,i){var h,k;return function g(){var m=arguments;if(h){k=true;return}h=true;setTimeout(function(){h=false;if(k){g.apply(i,m);k=false}},l);j.apply(i,m)}},falseFn:function(){return false},formatNum:function(g,i){var h=Math.pow(10,i||5);return Math.round(g*h)/h},splitWords:function(g){return g.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(h,g){h.options=a.extend({},h.options,g);return h.options},getParamString:function(j,g){var k=[];for(var h in j){if(j.hasOwnProperty(h)){k.push(h+"="+j[h])}}return((!g||g.indexOf("?")===-1)?"?":"&")+k.join("&")},template:function(h,g){return h.replace(/\{ *([\w_]+) *\}/g,function(k,i){var j=g[i];if(!g.hasOwnProperty(i)){throw new Error("No value provided for variable "+k)}return j})},isArray:function(g){return(Object.prototype.toString.call(g)==="[object Array]")},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function j(l){var m,n,o=["webkit","moz","o","ms"];for(m=0;m<o.length&&!n;m++){n=e[o[m]+l]}return n}var k=0;function h(l){var n=+new Date(),m=Math.max(0,16-(n-k));k=n+m;return e.setTimeout(l,m)}var g=e.requestAnimationFrame||j("RequestAnimationFrame")||h;var i=e.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(l){e.clearTimeout(l)};a.Util.requestAnimFrame=function(o,n,l,m){o=a.bind(o,n);if(l&&g===h){o()}else{return g.call(e,o,m)}};a.Util.cancelAnimFrame=function(l){if(l){i.call(e,l)}}}());a.extend=a.Util.extend;a.bind=a.Util.bind;a.stamp=a.Util.stamp;a.setOptions=a.Util.setOptions;a.Class=function(){};a.Class.extend=function(j){var m=function(){if(this.initialize){this.initialize.apply(this,arguments)}if(this._initHooks){this.callInitHooks()}};var l=function(){};l.prototype=this.prototype;var k=new l();k.constructor=m;m.prototype=k;for(var g in this){if(this.hasOwnProperty(g)&&g!=="prototype"){m[g]=this[g]}}if(j.statics){a.extend(m,j.statics);delete j.statics}if(j.includes){a.Util.extend.apply(null,[k].concat(j.includes));delete j.includes}if(j.options&&k.options){j.options=a.extend({},k.options,j.options)}a.extend(k,j);k._initHooks=[];var h=this;k.callInitHooks=function(){if(this._initHooksCalled){return}if(h.prototype.callInitHooks){h.prototype.callInitHooks.call(this)}this._initHooksCalled=true;for(var o=0,n=k._initHooks.length;o<n;o++){k._initHooks[o].call(this)}};return m};a.Class.include=function(g){a.extend(this.prototype,g)};a.Class.mergeOptions=function(g){a.extend(this.prototype.options,g)};a.Class.addInitHook=function(h){var g=Array.prototype.slice.call(arguments,1);var i=typeof h==="function"?h:function(){this[h].apply(this,g)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i)};var c="_leaflet_events";a.Mixin={};a.Mixin.Events={addEventListener:function(l,n,k){var j=this[c]=this[c]||{},m,h,g;if(typeof l==="object"){for(m in l){if(l.hasOwnProperty(m)){this.addEventListener(m,l[m],n)}}return this}l=a.Util.splitWords(l);for(h=0,g=l.length;h<g;h++){j[l[h]]=j[l[h]]||[];j[l[h]].push({action:n,context:k||this})}return this},hasEventListeners:function(g){return(c in this)&&(g in this[c])&&(this[c][g].length>0)},removeEventListener:function(l,p,g){var q=this[c],n,k,m,o,h;if(typeof l==="object"){for(n in l){if(l.hasOwnProperty(n)){this.removeEventListener(n,l[n],p)}}return this}l=a.Util.splitWords(l);for(k=0,m=l.length;k<m;k++){if(this.hasEventListeners(l[k])){o=q[l[k]];for(h=o.length-1;h>=0;h--){if((!p||o[h].action===p)&&(!g||(o[h].context===g))){o.splice(h,1)}}}}return this},fireEvent:function(k,m){if(!this.hasEventListeners(k)){return this}var l=a.extend({type:k,target:this},m);var j=this[c][k].slice();for(var h=0,g=j.length;h<g;h++){j[h].action.call(j[h].context||this,l)}return this}};a.Mixin.Events.on=a.Mixin.Events.addEventListener;a.Mixin.Events.off=a.Mixin.Events.removeEventListener;a.Mixin.Events.fire=a.Mixin.Events.fireEvent;(function(){var s=!!e.ActiveXObject,m=s&&!e.XMLHttpRequest,k=s&&!b.querySelector,u=navigator.userAgent.toLowerCase(),g=u.indexOf("webkit")!==-1,r=u.indexOf("chrome")!==-1,w=u.indexOf("android")!==-1,q=u.search("android [23]")!==-1,i=typeof orientation!==f+"",j=e.navigator&&e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints,h=("devicePixelRatio" in e&&e.devicePixelRatio>1)||("matchMedia" in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches),x=b.documentElement,t=s&&("transition" in x.style),p=("WebKitCSSMatrix" in e)&&("m11" in new e.WebKitCSSMatrix()),n="MozPerspective" in x.style,v="OTransition" in x.style,o=!e.L_DISABLE_3D&&(t||p||n||v);var l=!e.L_NO_TOUCH&&(function(){var z="ontouchstart";if(j||(z in x)){return true}var A=b.createElement("div"),y=false;if(!A.setAttribute){return false}A.setAttribute(z,"return;");if(typeof A[z]==="function"){y=true}A.removeAttribute(z);A=null;return y}());a.Browser={ie:s,ie6:m,ie7:k,webkit:g,android:w,android23:q,chrome:r,ie3d:t,webkit3d:p,gecko3d:n,opera3d:v,any3d:o,mobile:i,mobileWebkit:i&&g,mobileWebkit3d:i&&p,mobileOpera:i&&e.opera,touch:l,msTouch:j,retina:h}}());a.Point=function(g,i,h){this.x=(h?Math.round(g):g);this.y=(h?Math.round(i):i)};a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},add:function(g){return this.clone()._add(a.point(g))},_add:function(g){this.x+=g.x;this.y+=g.y;return this},subtract:function(g){return this.clone()._subtract(a.point(g))},_subtract:function(g){this.x-=g.x;this.y-=g.y;return this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){this.x/=g;this.y/=g;return this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){this.x*=g;this.y*=g;return this},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},distanceTo:function(h){h=a.point(h);var g=h.x-this.x,i=h.y-this.y;return Math.sqrt(g*g+i*i)},equals:function(g){return g.x===this.x&&g.y===this.y},toString:function(){return"Point("+a.Util.formatNum(this.x)+", "+a.Util.formatNum(this.y)+")"}};a.point=function(g,i,h){if(g instanceof a.Point){return g}if(a.Util.isArray(g)){return new a.Point(g[0],g[1])}if(isNaN(g)){return g}return new a.Point(g,i,h)};a.Bounds=function(j,h){if(!j){return}var l=h?[j,h]:j;for(var k=0,g=l.length;k<g;k++){this.extend(l[k])}};a.Bounds.prototype={extend:function(g){g=a.point(g);if(!this.min&&!this.max){this.min=g.clone();this.max=g.clone()}else{this.min.x=Math.min(g.x,this.min.x);this.max.x=Math.max(g.x,this.max.x);this.min.y=Math.min(g.y,this.min.y);this.max.y=Math.max(g.y,this.max.y)}return this},getCenter:function(g){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)},getTopRight:function(){return new a.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var h,g;if(typeof i[0]==="number"||i instanceof a.Point){i=a.point(i)}else{i=a.bounds(i)}if(i instanceof a.Bounds){h=i.min;g=i.max}else{h=g=i}return(h.x>=this.min.x)&&(g.x<=this.max.x)&&(h.y>=this.min.y)&&(g.y<=this.max.y)},intersects:function(l){l=a.bounds(l);var j=this.min,g=this.max,k=l.min,h=l.max,i=(h.x>=j.x)&&(k.x<=g.x),m=(h.y>=j.y)&&(k.y<=g.y);return i&&m},isValid:function(){return !!(this.min&&this.max)}};a.bounds=function(h,g){if(!h||h instanceof a.Bounds){return h}return new a.Bounds(h,g)};a.Transformation=function(h,g,j,i){this._a=h;this._b=g;this._c=j;this._d=i};a.Transformation.prototype={transform:function(g,h){return this._transform(g.clone(),h)},_transform:function(g,h){h=h||1;g.x=h*(this._a*g.x+this._b);g.y=h*(this._c*g.y+this._d);return g},untransform:function(g,h){h=h||1;return new a.Point((g.x/h-this._b)/this._a,(g.y/h-this._d)/this._c)}};a.DomUtil={get:function(g){return(typeof g==="string"?b.getElementById(g):g)},getStyle:function(i,h){var j=i.style[h];if(!j&&i.currentStyle){j=i.currentStyle[h]}if((!j||j==="auto")&&b.defaultView){var g=b.defaultView.getComputedStyle(i,null);j=g?g[h]:null}return j==="auto"?null:j},getViewportOffset:function(h){var l=0,k=0,j=h,i=b.body,m,g=a.Browser.ie7;do{l+=j.offsetTop||0;k+=j.offsetLeft||0;l+=parseInt(a.DomUtil.getStyle(j,"borderTopWidth"),10)||0;k+=parseInt(a.DomUtil.getStyle(j,"borderLeftWidth"),10)||0;m=a.DomUtil.getStyle(j,"position");if(j.offsetParent===i&&m==="absolute"){break}if(m==="fixed"){l+=i.scrollTop||0;k+=i.scrollLeft||0;break}j=j.offsetParent}while(j);j=h;do{if(j===i){break}l-=j.scrollTop||0;k-=j.scrollLeft||0;if(!a.DomUtil.documentIsLtr()&&(a.Browser.webkit||g)){k+=j.scrollWidth-j.clientWidth;if(g&&a.DomUtil.getStyle(j,"overflow-y")!=="hidden"&&a.DomUtil.getStyle(j,"overflow")!=="hidden"){k+=17}}j=j.parentNode}while(j);return new a.Point(k,l)},documentIsLtr:function(){if(!a.DomUtil._docIsLtrCached){a.DomUtil._docIsLtrCached=true;a.DomUtil._docIsLtr=a.DomUtil.getStyle(b.body,"direction")==="ltr"}return a.DomUtil._docIsLtr},create:function(h,j,g){var i=b.createElement(h);i.className=j;if(g){g.appendChild(i)}return i},disableTextSelection:function(){if(b.selection&&b.selection.empty){b.selection.empty()}if(!this._onselectstart){this._onselectstart=b.onselectstart||null;b.onselectstart=a.Util.falseFn}},enableTextSelection:function(){if(b.onselectstart===a.Util.falseFn){b.onselectstart=this._onselectstart;this._onselectstart=null}},hasClass:function(h,g){return(h.className.length>0)&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(h.className)},addClass:function(h,g){if(!a.DomUtil.hasClass(h,g)){h.className+=(h.className?" ":"")+g}},removeClass:function(i,g){function h(j,k){if(k===g){return""}return j}i.className=i.className.replace(/(\S+)\s*/g,h).replace(/(^\s+|\s+$)/,"")},setOpacity:function(i,j){if("opacity" in i.style){i.style.opacity=j}else{if("filter" in i.style){var h=false,g="DXImageTransform.Microsoft.Alpha";try{h=i.filters.item(g)}catch(k){}j=Math.round(j*100);if(h){h.Enabled=(j!==100);h.Opacity=j}else{i.style.filter+=" progid:"+g+"(opacity="+j+")"}}}},testProp:function(j){var h=b.documentElement.style;for(var g=0;g<j.length;g++){if(j[g] in h){return j[g]}}return false},getTranslateString:function(g){var i=a.Browser.webkit3d,h="translate"+(i?"3d":"")+"(",j=(i?",0":"")+")";return h+g.x+"px,"+g.y+"px"+j},getScaleString:function(i,g){var j=a.DomUtil.getTranslateString(g.add(g.multiplyBy(-1*i))),h=" scale("+i+") ";return j+h},setPosition:function(i,g,h){i._leaflet_pos=g;if(!h&&a.Browser.any3d){i.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(g);if(a.Browser.mobileWebkit3d){i.style.WebkitBackfaceVisibility="hidden"}}else{i.style.left=g.x+"px";i.style.top=g.y+"px"}},getPosition:function(g){return g._leaflet_pos}};a.DomUtil.TRANSFORM=a.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);a.DomUtil.TRANSITION=a.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);a.DomUtil.TRANSITION_END=a.DomUtil.TRANSITION==="webkitTransition"||a.DomUtil.TRANSITION==="OTransition"?a.DomUtil.TRANSITION+"End":"transitionend";a.LatLng=function(i,g){var j=parseFloat(i),h=parseFloat(g);if(isNaN(j)||isNaN(h)){throw new Error("Invalid LatLng object: ("+i+", "+g+")")}this.lat=j;this.lng=h};a.extend(a.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9});a.LatLng.prototype={equals:function(h){if(!h){return false}h=a.latLng(h);var g=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return g<=a.LatLng.MAX_MARGIN},toString:function(g){return"LatLng("+a.Util.formatNum(this.lat,g)+", "+a.Util.formatNum(this.lng,g)+")"},distanceTo:function(n){n=a.latLng(n);var m=6378137,j=a.LatLng.DEG_TO_RAD,o=(n.lat-this.lat)*j,g=(n.lng-this.lng)*j,l=this.lat*j,i=n.lat*j,k=Math.sin(o/2),h=Math.sin(g/2);var p=k*k+h*h*Math.cos(l)*Math.cos(i);return m*2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p))},wrap:function(h,g){var i=this.lng;h=h||-180;g=g||180;i=(i+g)%(g-h)+(i<h||i===g?g:h);return new a.LatLng(this.lat,i)}};a.latLng=function(h,g){if(h instanceof a.LatLng){return h}if(a.Util.isArray(h)){return new a.LatLng(h[0],h[1])}if(isNaN(h)){return h}return new a.LatLng(h,g)};a.LatLngBounds=function(l,j){if(!l){return}var h=j?[l,j]:l;for(var k=0,g=h.length;k<g;k++){this.extend(h[k])}};a.LatLngBounds.prototype={extend:function(g){if(typeof g[0]==="number"||typeof g[0]==="string"||g instanceof a.LatLng){g=a.latLng(g)}else{g=a.latLngBounds(g)}if(g instanceof a.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new a.LatLng(g.lat,g.lng);this._northEast=new a.LatLng(g.lat,g.lng)}else{this._southWest.lat=Math.min(g.lat,this._southWest.lat);this._southWest.lng=Math.min(g.lng,this._southWest.lng);this._northEast.lat=Math.max(g.lat,this._northEast.lat);this._northEast.lng=Math.max(g.lng,this._northEast.lng)}}else{if(g instanceof a.LatLngBounds){this.extend(g._southWest);this.extend(g._northEast)}}return this},pad:function(j){var h=this._southWest,k=this._northEast,g=Math.abs(h.lat-k.lat)*j,i=Math.abs(h.lng-k.lng)*j;return new a.LatLngBounds(new a.LatLng(h.lat-g,h.lng-i),new a.LatLng(k.lat+g,k.lng+i))},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new a.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new a.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(k){if(typeof k[0]==="number"||k instanceof a.LatLng){k=a.latLng(k)}else{k=a.latLngBounds(k)}var g=this._southWest,j=this._northEast,h,i;if(k instanceof a.LatLngBounds){h=k.getSouthWest();i=k.getNorthEast()}else{h=i=k}return(h.lat>=g.lat)&&(i.lat<=j.lat)&&(h.lng>=g.lng)&&(i.lng<=j.lng)},intersects:function(j){j=a.latLngBounds(j);var g=this._southWest,m=this._northEast,h=j.getSouthWest(),l=j.getNorthEast(),k=(l.lat>=g.lat)&&(h.lat<=m.lat),i=(l.lng>=g.lng)&&(h.lng<=m.lng);return k&&i},toBBoxString:function(){var g=this._southWest,h=this._northEast;return[g.lng,g.lat,h.lng,h.lat].join(",")},equals:function(g){if(!g){return false}g=a.latLngBounds(g);return this._southWest.equals(g.getSouthWest())&&this._northEast.equals(g.getNorthEast())},isValid:function(){return !!(this._southWest&&this._northEast)}};a.latLngBounds=function(h,g){if(!h||h instanceof a.LatLngBounds){return h}return new a.LatLngBounds(h,g)};a.Projection={};a.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(l){var j=a.LatLng.DEG_TO_RAD,h=this.MAX_LATITUDE,i=Math.max(Math.min(h,l.lat),-h),g=l.lng*j,k=i*j;k=Math.log(Math.tan((Math.PI/4)+(k/2)));return new a.Point(g,k)},unproject:function(g){var j=a.LatLng.RAD_TO_DEG,h=g.x*j,i=(2*Math.atan(Math.exp(g.y))-(Math.PI/2))*j;return new a.LatLng(i,h)}};a.Projection.LonLat={project:function(g){return new a.Point(g.lng,g.lat)},unproject:function(g){return new a.LatLng(g.y,g.x)}};a.CRS={latLngToPoint:function(j,h){var g=this.projection.project(j),i=this.scale(h);return this.transformation._transform(g,i)},pointToLatLng:function(g,i){var j=this.scale(i),h=this.transformation.untransform(g,j);return this.projection.unproject(h)},project:function(g){return this.projection.project(g)},scale:function(g){return 256*Math.pow(2,g)}};a.CRS.Simple=a.extend({},a.CRS,{projection:a.Projection.LonLat,transformation:new a.Transformation(1,0,-1,0),scale:function(g){return Math.pow(2,g)}});a.CRS.EPSG3857=a.extend({},a.CRS,{code:"EPSG:3857",projection:a.Projection.SphericalMercator,transformation:new a.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(i){var h=this.projection.project(i),g=6378137;return h.multiplyBy(g)}});a.CRS.EPSG900913=a.extend({},a.CRS.EPSG3857,{code:"EPSG:900913"});a.CRS.EPSG4326=a.extend({},a.CRS,{code:"EPSG:4326",projection:a.Projection.LonLat,transformation:new a.Transformation(1/360,0.5,-1/360,0.5)});a.Map=a.Class.extend({includes:a.Mixin.Events,options:{crs:a.CRS.EPSG3857,fadeAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23,trackResize:true,markerZoomAnimation:a.DomUtil.TRANSITION&&a.Browser.any3d},initialize:function(h,g){g=a.setOptions(this,g);this._initContainer(h);this._initLayout();this.callInitHooks();this._initEvents();if(g.maxBounds){this.setMaxBounds(g.maxBounds)}if(g.center&&g.zoom!==f){this.setView(a.latLng(g.center),g.zoom,true)}this._initLayers(g.layers)},setView:function(g,h){this._resetView(a.latLng(g),this._limitZoom(h));return this},setZoom:function(g){return this.setView(this.getCenter(),g)},zoomIn:function(g){return this.setZoom(this._zoom+(g||1))},zoomOut:function(g){return this.setZoom(this._zoom-(g||1))},fitBounds:function(h){var g=this.getBoundsZoom(h);return this.setView(a.latLngBounds(h).getCenter(),g)},fitWorld:function(){var g=new a.LatLng(-60,-170),h=new a.LatLng(85,179);return this.fitBounds(new a.LatLngBounds(g,h))},panTo:function(g){return this.setView(g,this._zoom)},panBy:function(g){this.fire("movestart");this._rawPanBy(a.point(g));this.fire("move");return this.fire("moveend")},setMaxBounds:function(g){g=a.latLngBounds(g);this.options.maxBounds=g;if(!g){this._boundsMinZoom=null;return this}var h=this.getBoundsZoom(g,true);this._boundsMinZoom=h;if(this._loaded){if(this._zoom<h){this.setView(g.getCenter(),h)}else{this.panInsideBounds(g)}}return this},panInsideBounds:function(k){k=a.latLngBounds(k);var l=this.getBounds(),i=this.project(l.getSouthWest()),n=this.project(l.getNorthEast()),g=this.project(k.getSouthWest()),m=this.project(k.getNorthEast()),j=0,h=0;if(n.y<m.y){h=m.y-n.y}if(n.x>m.x){j=m.x-n.x}if(i.y>g.y){h=g.y-i.y}if(i.x<g.x){j=g.x-i.x}return this.panBy(new a.Point(j,h,true))},addLayer:function(g){var h=a.stamp(g);if(this._layers[h]){return this}this._layers[h]=g;if(g.options&&(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))){this._zoomBoundLayers[h]=g;this._updateZoomLevels()}if(this.options.zoomAnimation&&a.TileLayer&&(g instanceof a.TileLayer)){this._tileLayersNum++;this._tileLayersToLoad++;g.on("load",this._onTileLayerLoad,this)}this.whenReady(function(){g.onAdd(this);this.fire("layeradd",{layer:g})},this);return this},removeLayer:function(g){var h=a.stamp(g);if(!this._layers[h]){return}g.onRemove(this);delete this._layers[h];if(this._zoomBoundLayers[h]){delete this._zoomBoundLayers[h];this._updateZoomLevels()}if(this.options.zoomAnimation&&a.TileLayer&&(g instanceof a.TileLayer)){this._tileLayersNum--;this._tileLayersToLoad--;g.off("load",this._onTileLayerLoad,this)}return this.fire("layerremove",{layer:g})},hasLayer:function(g){var h=a.stamp(g);return this._layers.hasOwnProperty(h)},invalidateSize:function(g){var h=this.getSize();this._sizeChanged=true;if(this.options.maxBounds){this.setMaxBounds(this.options.maxBounds)}if(!this._loaded){return this}var i=h._subtract(this.getSize())._divideBy(2)._round();if(g===true){this.panBy(i)}else{this._rawPanBy(i);this.fire("move");clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(a.bind(this.fire,this,"moveend"),200)}return this},addHandler:function(g,h){if(!h){return}this[g]=new h(this);if(this.options[g]){this[g].enable()}return this},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),g=this.unproject(h.getBottomLeft()),i=this.unproject(h.getTopRight());return new a.LatLngBounds(g,i)},getMinZoom:function(){var i=this.options.minZoom||0,h=this._layersMinZoom||0,g=this._boundsMinZoom||0;return Math.max(i,h,g)},getMaxZoom:function(){var h=this.options.maxZoom===f?Infinity:this.options.maxZoom,g=this._layersMaxZoom===f?Infinity:this._layersMaxZoom;return Math.min(h,g)},getBoundsZoom:function(g,i){g=a.latLngBounds(g);var q=this.getSize(),o=this.options.minZoom||0,m=this.getMaxZoom(),k=g.getNorthEast(),n=g.getSouthWest(),p,h,l,j=true;if(i){o--}do{o++;h=this.project(k,o);l=this.project(n,o);p=new a.Point(Math.abs(h.x-l.x),Math.abs(l.y-h.y));if(!i){j=p.x<=q.x&&p.y<=q.y}else{j=p.x<q.x||p.y<q.y}}while(j&&o<=m);if(j&&i){return null}return i?o:o-1},getSize:function(){if(!this._size||this._sizeChanged){this._size=new a.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(){var g=this._getTopLeftPoint();return new a.Bounds(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h){var g=this.options.crs;return g.scale(h)/g.scale(this._zoom)},getScaleZoom:function(g){return this._zoom+(Math.log(g)/Math.LN2)},project:function(h,g){g=g===f?this._zoom:g;return this.options.crs.latLngToPoint(a.latLng(h),g)},unproject:function(g,h){h=h===f?this._zoom:h;return this.options.crs.pointToLatLng(a.point(g),h)},layerPointToLatLng:function(g){var h=a.point(g).add(this._initialTopLeftPoint);return this.unproject(h)},latLngToLayerPoint:function(h){var g=this.project(a.latLng(h))._round();return g._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(g){return a.point(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return a.point(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var h=this.containerPointToLayerPoint(a.point(g));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(g)))},mouseEventToContainerPoint:function(g){return a.DomEvent.getMousePosition(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(h){var g=this._container=a.DomUtil.get(h);if(g._leaflet){throw new Error("Map container is already initialized.")}g._leaflet=true},_initLayout:function(){var h=this._container;a.DomUtil.addClass(h,"leaflet-container");if(a.Browser.touch){a.DomUtil.addClass(h,"leaflet-touch")}if(this.options.fadeAnimation){a.DomUtil.addClass(h,"leaflet-fade-anim")}var g=a.DomUtil.getStyle(h,"position");if(g!=="absolute"&&g!=="relative"&&g!=="fixed"){h.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var h=this._panes={};this._mapPane=h.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=h.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);h.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);h.shadowPane=this._createPane("leaflet-shadow-pane");h.overlayPane=this._createPane("leaflet-overlay-pane");h.markerPane=this._createPane("leaflet-marker-pane");h.popupPane=this._createPane("leaflet-popup-pane");var g=" leaflet-zoom-hide";if(!this.options.markerZoomAnimation){a.DomUtil.addClass(h.markerPane,g);a.DomUtil.addClass(h.shadowPane,g);a.DomUtil.addClass(h.popupPane,g)}},_createPane:function(h,g){return a.DomUtil.create("div",h,g||this._panes.objectsPane)},_initLayers:function(j){j=j?(a.Util.isArray(j)?j:[j]):[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;var h,g;for(h=0,g=j.length;h<g;h++){this.addLayer(j[h])}},_resetView:function(i,k,h,j){var g=(this._zoom!==k);if(!j){this.fire("movestart");if(g){this.fire("zoomstart")}}this._zoom=k;this._initialTopLeftPoint=this._getNewTopLeftPoint(i);if(!h){a.DomUtil.setPosition(this._mapPane,new a.Point(0,0))}else{this._initialTopLeftPoint._add(this._getMapPanePos())}this._tileLayersToLoad=this._tileLayersNum;var l=!this._loaded;this._loaded=true;this.fire("viewreset",{hard:!h});this.fire("move");if(g||j){this.fire("zoomend")}this.fire("moveend",{hard:!h});if(l){this.fire("load")}},_rawPanBy:function(g){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(g))},_updateZoomLevels:function(){var j,k=Infinity,g=-Infinity;for(j in this._zoomBoundLayers){if(this._zoomBoundLayers.hasOwnProperty(j)){var h=this._zoomBoundLayers[j];if(!isNaN(h.options.minZoom)){k=Math.min(k,h.options.minZoom)}if(!isNaN(h.options.maxZoom)){g=Math.max(g,h.options.maxZoom)}}}if(j===f){this._layersMaxZoom=this._layersMinZoom=f}else{this._layersMaxZoom=g;this._layersMinZoom=k}},_initEvents:function(){if(!a.DomEvent){return}a.DomEvent.on(this._container,"click",this._onMouseClick,this);var j=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],h,g;for(h=0,g=j.length;h<g;h++){a.DomEvent.on(this._container,j[h],this._fireMouseEvent,this)}if(this.options.trackResize){a.DomEvent.on(e,"resize",this._onResize,this)}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=a.Util.requestAnimFrame(this.invalidateSize,this,false,this._container)},_onMouseClick:function(g){if(!this._loaded||(this.dragging&&this.dragging.moved())){return}this.fire("preclick");this._fireMouseEvent(g)},_fireMouseEvent:function(j){if(!this._loaded){return}var i=j.type;i=(i==="mouseenter"?"mouseover":(i==="mouseleave"?"mouseout":i));if(!this.hasEventListeners(i)){return}if(i==="contextmenu"){a.DomEvent.preventDefault(j)}var h=this.mouseEventToContainerPoint(j),g=this.containerPointToLayerPoint(h),k=this.layerPointToLatLng(g);this.fire(i,{latlng:k,layerPoint:g,containerPoint:h,originalEvent:j})},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg){clearTimeout(this._clearTileBgTimer);this._clearTileBgTimer=setTimeout(a.bind(this._clearTileBg,this),500)}},whenReady:function(h,g){if(this._loaded){h.call(g||this,this)}else{this.on("load",h,g)}return this},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(g,i){var h=this.getSize()._divideBy(2);return this.project(g,i)._subtract(h)._round()},_latLngToNewLayerPoint:function(j,h,g){var i=this._getNewTopLeftPoint(g,h).add(this._getMapPanePos());return this.project(j,h)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitZoom:function(i){var h=this.getMinZoom(),g=this.getMaxZoom();return Math.max(h,Math.min(g,i))}});a.map=function(h,g){return new a.Map(h,g)};a.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(i){var n=a.LatLng.DEG_TO_RAD,q=this.MAX_LATITUDE,o=Math.max(Math.min(q,i.lat),-q),g=this.R_MAJOR,j=this.R_MINOR,s=i.lng*n*g,p=o*n,l=j/g,k=Math.sqrt(1-l*l),h=k*Math.sin(p);h=Math.pow((1-h)/(1+h),k*0.5);var m=Math.tan(0.5*((Math.PI*0.5)-p))/h;p=-j*Math.log(m);return new a.Point(s,p)},unproject:function(u){var q=a.LatLng.RAD_TO_DEG,g=this.R_MAJOR,j=this.R_MINOR,t=u.x*q/g,n=j/g,k=Math.sqrt(1-(n*n)),s=Math.exp(-u.y/j),p=(Math.PI/2)-2*Math.atan(s),l=15,v=1e-7,m=l,o=0.1,h;while((Math.abs(o)>v)&&(--m>0)){h=k*Math.sin(p);o=(Math.PI/2)-2*Math.atan(s*Math.pow((1-h)/(1+h),0.5*k))-p;p+=o}return new a.LatLng(p*q,t)}};a.CRS.EPSG3395=a.extend({},a.CRS,{code:"EPSG:3395",projection:a.Projection.Mercator,transformation:(function(){var g=a.Projection.Mercator,i=g.R_MAJOR,h=g.R_MINOR;return new a.Transformation(0.5/(Math.PI*i),0.5,-0.5/(Math.PI*h),0.5)}())});a.TileLayer=a.Class.extend({includes:a.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:a.Browser.mobile,updateWhenIdle:a.Browser.mobile},initialize:function(i,h){h=a.setOptions(this,h);if(h.detectRetina&&a.Browser.retina&&h.maxZoom>0){h.tileSize=Math.floor(h.tileSize/2);h.zoomOffset++;if(h.minZoom>0){h.minZoom--}this.options.maxZoom--}this._url=i;var g=this.options.subdomains;if(typeof g==="string"){this.options.subdomains=g.split("")}},onAdd:function(g){this._map=g;this._initContainer();this._createTileProto();g.on({viewreset:this._resetCallback,moveend:this._update},this);if(!this.options.updateWhenIdle){this._limitedUpdate=a.Util.limitExecByInterval(this._update,150,this);g.on("move",this._limitedUpdate,this)}this._reset();this._update()},addTo:function(g){g.addLayer(this);return this},onRemove:function(g){this._container.parentNode.removeChild(this._container);g.off({viewreset:this._resetCallback,moveend:this._update},this);if(!this.options.updateWhenIdle){g.off("move",this._limitedUpdate,this)}this._container=null;this._map=null},bringToFront:function(){var g=this._map._panes.tilePane;if(this._container){g.appendChild(this._container);this._setAutoZIndex(g,Math.max)}return this},bringToBack:function(){var g=this._map._panes.tilePane;if(this._container){g.insertBefore(this._container,g.firstChild);this._setAutoZIndex(g,Math.min)}return this},getAttribution:function(){return this.options.attribution},setOpacity:function(g){this.options.opacity=g;if(this._map){this._updateOpacity()}return this},setZIndex:function(g){this.options.zIndex=g;this._updateZIndex();return this},setUrl:function(g,h){this._url=g;if(!h){this.redraw()}return this},redraw:function(){if(this._map){this._map._panes.tilePane.empty=false;this._reset(true);this._update()}return this},_updateZIndex:function(){if(this._container&&this.options.zIndex!==f){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(n,k){var l=n.children,j=-k(Infinity,-Infinity),m,h,g;for(h=0,g=l.length;h<g;h++){if(l[h]!==this._container){m=parseInt(l[h].style.zIndex,10);if(!isNaN(m)){j=k(j,m)}}}this.options.zIndex=this._container.style.zIndex=(isFinite(j)?j:0)+k(1,-1)},_updateOpacity:function(){a.DomUtil.setOpacity(this._container,this.options.opacity);var h,g=this._tiles;if(a.Browser.webkit){for(h in g){if(g.hasOwnProperty(h)){g[h].style.webkitTransform+=" translate(0,0)"}}}},_initContainer:function(){var g=this._map._panes.tilePane;if(!this._container||g.empty){this._container=a.DomUtil.create("div","leaflet-layer");this._updateZIndex();g.appendChild(this._container);if(this.options.opacity<1){this._updateOpacity()}}},_resetCallback:function(g){this._reset(g.hard)},_reset:function(h){var g=this._tiles;for(var i in g){if(g.hasOwnProperty(i)){this.fire("tileunload",{tile:g[i]})}}this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles){this._unusedTiles=[]}if(h&&this._container){this._container.innerHTML=""}this._initContainer()},_update:function(){if(!this._map){return}var i=this._map.getPixelBounds(),h=this._map.getZoom(),j=this.options.tileSize;if(h>this.options.maxZoom||h<this.options.minZoom){return}var g=new a.Point(Math.floor(i.min.x/j),Math.floor(i.min.y/j)),l=new a.Point(Math.floor(i.max.x/j),Math.floor(i.max.y/j)),k=new a.Bounds(g,l);this._addTilesFromCenterOut(k);if(this.options.unloadInvisibleTiles||this.options.reuseTiles){this._removeOtherTiles(k)}},_addTilesFromCenterOut:function(o){var k=[],h=o.getCenter();var m,n,g;for(m=o.min.y;m<=o.max.y;m++){for(n=o.min.x;n<=o.max.x;n++){g=new a.Point(n,m);if(this._tileShouldBeLoaded(g)){k.push(g)}}}var p=k.length;if(p===0){return}k.sort(function(j,i){return j.distanceTo(h)-i.distanceTo(h)});var l=b.createDocumentFragment();if(!this._tilesToLoad){this.fire("loading")}this._tilesToLoad+=p;for(n=0;n<p;n++){this._addTile(k[n],l)}this._container.appendChild(l)},_tileShouldBeLoaded:function(h){if((h.x+":"+h.y) in this._tiles){return false}if(!this.options.continuousWorld){var g=this._getWrapTileNum();if(this.options.noWrap&&(h.x<0||h.x>=g)||h.y<0||h.y>=g){return false}}return true},_removeOtherTiles:function(j){var i,g,k,h;for(h in this._tiles){if(this._tiles.hasOwnProperty(h)){i=h.split(":");g=parseInt(i[0],10);k=parseInt(i[1],10);if(g<j.min.x||g>j.max.x||k<j.min.y||k>j.max.y){this._removeTile(h)}}}},_removeTile:function(g){var h=this._tiles[g];this.fire("tileunload",{tile:h,url:h.src});if(this.options.reuseTiles){a.DomUtil.removeClass(h,"leaflet-tile-loaded");this._unusedTiles.push(h)}else{if(h.parentNode===this._container){this._container.removeChild(h)}}if(!a.Browser.android){h.src=a.Util.emptyImageUrl}delete this._tiles[g]},_addTile:function(i,g){var h=this._getTilePos(i);var j=this._getTile();a.DomUtil.setPosition(j,h,a.Browser.chrome||a.Browser.android23);this._tiles[i.x+":"+i.y]=j;this._loadTile(j,i);if(j.parentNode!==this._container){g.appendChild(j)}},_getZoomForUrl:function(){var g=this.options,h=this._map.getZoom();if(g.zoomReverse){h=g.maxZoom-h}return h+g.zoomOffset},_getTilePos:function(h){var g=this._map.getPixelOrigin(),i=this.options.tileSize;return h.multiplyBy(i).subtract(g)},getTileUrl:function(g){this._adjustTilePoint(g);return a.Util.template(this._url,a.extend({s:this._getSubdomain(g),z:this._getZoomForUrl(),x:g.x,y:g.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(h){var g=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap){h.x=((h.x%g)+g)%g}if(this.options.tms){h.y=g-h.y-1}},_getSubdomain:function(h){var g=(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[g]},_createTileProto:function(){var g=this._tileImg=a.DomUtil.create("img","leaflet-tile");g.style.width=g.style.height=this.options.tileSize+"px";g.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var g=this._unusedTiles.pop();this._resetTile(g);return g}return this._createTile()},_resetTile:function(){},_createTile:function(){var g=this._tileImg.cloneNode(false);g.onselectstart=g.onmousemove=a.Util.falseFn;return g},_loadTile:function(h,g){h._layer=this;h.onload=this._tileOnLoad;h.onerror=this._tileOnError;h.src=this.getTileUrl(g)},_tileLoaded:function(){this._tilesToLoad--;if(!this._tilesToLoad){this.fire("load")}},_tileOnLoad:function(){var g=this._layer;if(this.src!==a.Util.emptyImageUrl){a.DomUtil.addClass(this,"leaflet-tile-loaded");g.fire("tileload",{tile:this,url:this.src})}g._tileLoaded()},_tileOnError:function(){var g=this._layer;g.fire("tileerror",{tile:this,url:this.src});var h=g.options.errorTileUrl;if(h){this.src=h}g._tileLoaded()}});a.tileLayer=function(h,g){return new a.TileLayer(h,g)};a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},initialize:function(j,h){this._url=j;var g=a.extend({},this.defaultWmsParams);if(h.detectRetina&&a.Browser.retina){g.width=g.height=this.options.tileSize*2}else{g.width=g.height=this.options.tileSize}for(var k in h){if(!this.options.hasOwnProperty(k)){g[k]=h[k]}}this.wmsParams=g;a.setOptions(this,h)},onAdd:function(g){var h=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[h]=g.options.crs.code;a.TileLayer.prototype.onAdd.call(this,g)},getTileUrl:function(i,q){this._adjustTilePoint(i);var h=this._map,l=h.options.crs,p=this.options.tileSize,o=i.multiplyBy(p),m=o.add(new a.Point(p,p)),j=l.project(h.unproject(o,q)),k=l.project(h.unproject(m,q)),n=[j.x,k.y,k.x,j.y].join(","),g=a.Util.template(this._url,{s:this._getSubdomain(i)});return g+a.Util.getParamString(this.wmsParams,g)+"&bbox="+n},setParams:function(h,g){a.extend(this.wmsParams,h);if(!g){this.redraw()}return this}});a.tileLayer.wms=function(h,g){return new a.TileLayer.WMS(h,g)};a.TileLayer.Canvas=a.TileLayer.extend({options:{async:false},initialize:function(g){a.setOptions(this,g)},redraw:function(){var g=this._tiles;for(var h in g){if(g.hasOwnProperty(h)){this._redrawTile(g[h])}}},_redrawTile:function(g){this.drawTile(g,g._tilePoint,this._map._zoom)},_createTileProto:function(){var g=this._canvasProto=a.DomUtil.create("canvas","leaflet-tile");g.width=g.height=this.options.tileSize},_createTile:function(){var g=this._canvasProto.cloneNode(false);g.onselectstart=g.onmousemove=a.Util.falseFn;return g},_loadTile:function(h,g){h._layer=this;h._tilePoint=g;this._redrawTile(h);if(!this.options.async){this.tileDrawn(h)}},drawTile:function(){},tileDrawn:function(g){this._tileOnLoad.call(g)}});a.tileLayer.canvas=function(g){return new a.TileLayer.Canvas(g)};a.ImageOverlay=a.Class.extend({includes:a.Mixin.Events,options:{opacity:1},initialize:function(h,i,g){this._url=h;this._bounds=a.latLngBounds(i);a.setOptions(this,g)},onAdd:function(g){this._map=g;if(!this._image){this._initImage()}g._panes.overlayPane.appendChild(this._image);g.on("viewreset",this._reset,this);if(g.options.zoomAnimation&&a.Browser.any3d){g.on("zoomanim",this._animateZoom,this)}this._reset()},onRemove:function(g){g.getPanes().overlayPane.removeChild(this._image);g.off("viewreset",this._reset,this);if(g.options.zoomAnimation){g.off("zoomanim",this._animateZoom,this)}},addTo:function(g){g.addLayer(this);return this},setOpacity:function(g){this.options.opacity=g;this._updateOpacity();return this},bringToFront:function(){if(this._image){this._map._panes.overlayPane.appendChild(this._image)}return this},bringToBack:function(){var g=this._map._panes.overlayPane;if(this._image){g.insertBefore(this._image,g.firstChild)}return this},_initImage:function(){this._image=a.DomUtil.create("img","leaflet-image-layer");if(this._map.options.zoomAnimation&&a.Browser.any3d){a.DomUtil.addClass(this._image,"leaflet-zoom-animated")}else{a.DomUtil.addClass(this._image,"leaflet-zoom-hide")}this._updateOpacity();a.extend(this._image,{galleryimg:"no",onselectstart:a.Util.falseFn,onmousemove:a.Util.falseFn,onload:a.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(k){var g=this._map,i=this._image,h=g.getZoomScale(k.zoom),j=this._bounds.getNorthWest(),l=this._bounds.getSouthEast(),n=g._latLngToNewLayerPoint(j,k.zoom,k.center),o=g._latLngToNewLayerPoint(l,k.zoom,k.center)._subtract(n),m=n._add(o._multiplyBy((1/2)*(1-1/h)));i.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(m)+" scale("+h+") "},_reset:function(){var i=this._image,h=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),g=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(h);a.DomUtil.setPosition(i,h);i.style.width=g.x+"px";i.style.height=g.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)}});a.imageOverlay=function(h,i,g){return new a.ImageOverlay(h,i,g)};a.Icon=a.Class.extend({options:{className:""},initialize:function(g){a.setOptions(this,g)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(h){var i=this._getIconUrl(h);if(!i){if(h==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var g=this._createImg(i);this._setIconStyles(g,h);return g},_setIconStyles:function(g,j){var i=this.options,k=a.point(i[j+"Size"]),h;if(j==="shadow"){h=a.point(i.shadowAnchor||i.iconAnchor)}else{h=a.point(i.iconAnchor)}if(!h&&k){h=k.divideBy(2,true)}g.className="leaflet-marker-"+j+" "+i.className;if(h){g.style.marginLeft=(-h.x)+"px";g.style.marginTop=(-h.y)+"px"}if(k){g.style.width=k.x+"px";g.style.height=k.y+"px"}},_createImg:function(h){var g;if(!a.Browser.ie6){g=b.createElement("img");g.src=h}else{g=b.createElement("div");g.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+h+'")'}return g},_getIconUrl:function(g){if(a.Browser.retina&&this.options[g+"RetinaUrl"]){return this.options[g+"RetinaUrl"]}return this.options[g+"Url"]}});a.icon=function(g){return new a.Icon(g)};a.Icon.Default=a.Icon.extend({options:{iconSize:new a.Point(25,41),iconAnchor:new a.Point(12,41),popupAnchor:new a.Point(1,-34),shadowSize:new a.Point(41,41)},_getIconUrl:function(g){var h=g+"Url";if(this.options[h]){return this.options[h]}if(a.Browser.retina&&g==="icon"){g+="@2x"}var i=a.Icon.Default.imagePath;if(!i){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return i+"/marker-"+g+".png"}});a.Icon.Default.imagePath=(function(){var h=b.getElementsByTagName("script"),k=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;var j,g,m,l;for(j=0,g=h.length;j<g;j++){m=h[j].src;l=m.match(k);if(l){return m.split(k)[0]+"/images"}}}());a.Marker=a.Class.extend({includes:a.Mixin.Events,options:{icon:new a.Icon.Default(),title:"",clickable:true,draggable:false,zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250},initialize:function(h,g){a.setOptions(this,g);this._latlng=a.latLng(h)},onAdd:function(g){this._map=g;g.on("viewreset",this.update,this);this._initIcon();this.update();if(g.options.zoomAnimation&&g.options.markerZoomAnimation){g.on("zoomanim",this._animateZoom,this)}},addTo:function(g){g.addLayer(this);return this},onRemove:function(g){this._removeIcon();this.fire("remove");g.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(g){this._latlng=a.latLng(g);this.update();return this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(g){this.options.zIndexOffset=g;this.update();return this},setIcon:function(g){if(this._map){this._removeIcon()}this.options.icon=g;if(this._map){this._initIcon();this.update()}return this},update:function(){if(this._icon){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var h=this.options,l=this._map,k=(l.options.zoomAnimation&&l.options.markerZoomAnimation),j=k?"leaflet-zoom-animated":"leaflet-zoom-hide",g=false;if(!this._icon){this._icon=h.icon.createIcon();if(h.title){this._icon.title=h.title}this._initInteraction();g=(this.options.opacity<1);a.DomUtil.addClass(this._icon,j);if(h.riseOnHover){a.DomEvent.on(this._icon,"mouseover",this._bringToFront,this).on(this._icon,"mouseout",this._resetZIndex,this)}}if(!this._shadow){this._shadow=h.icon.createShadow();if(this._shadow){a.DomUtil.addClass(this._shadow,j);g=(this.options.opacity<1)}}if(g){this._updateOpacity()}var i=this._map._panes;i.markerPane.appendChild(this._icon);if(this._shadow){i.shadowPane.appendChild(this._shadow)}},_removeIcon:function(){var g=this._map._panes;if(this.options.riseOnHover){a.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex)}g.markerPane.removeChild(this._icon);if(this._shadow){g.shadowPane.removeChild(this._shadow)}this._icon=this._shadow=null},_setPos:function(g){a.DomUtil.setPosition(this._icon,g);if(this._shadow){a.DomUtil.setPosition(this._shadow,g)}this._zIndex=g.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(g){this._icon.style.zIndex=this._zIndex+g},_animateZoom:function(g){var h=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPos(h)},_initInteraction:function(){if(!this.options.clickable){return}var j=this._icon,h=["dblclick","mousedown","mouseover","mouseout","contextmenu"];a.DomUtil.addClass(j,"leaflet-clickable");a.DomEvent.on(j,"click",this._onMouseClick,this);for(var g=0;g<h.length;g++){a.DomEvent.on(j,h[g],this._fireMouseEvent,this)}if(a.Handler.MarkerDrag){this.dragging=new a.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_onMouseClick:function(h){var g=this.dragging&&this.dragging.moved();if(this.hasEventListeners(h.type)||g){a.DomEvent.stopPropagation(h)}if(g){return}if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()){return}this.fire(h.type,{originalEvent:h})},_fireMouseEvent:function(g){this.fire(g.type,{originalEvent:g});if(g.type==="contextmenu"&&this.hasEventListeners(g.type)){a.DomEvent.preventDefault(g)}if(g.type!=="mousedown"){a.DomEvent.stopPropagation(g)}},setOpacity:function(g){this.options.opacity=g;if(this._map){this._updateOpacity()}},_updateOpacity:function(){a.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow){a.DomUtil.setOpacity(this._shadow,this.options.opacity)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});a.marker=function(h,g){return new a.Marker(h,g)};a.DivIcon=a.Icon.extend({options:{iconSize:new a.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var h=b.createElement("div"),g=this.options;if(g.html){h.innerHTML=g.html}if(g.bgPos){h.style.backgroundPosition=(-g.bgPos.x)+"px "+(-g.bgPos.y)+"px"}this._setIconStyles(h,"icon");return h},createShadow:function(){return null}});a.divIcon=function(g){return new a.DivIcon(g)};a.Map.mergeOptions({closePopupOnClick:true});a.Popup=a.Class.extend({includes:a.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:true,closeButton:true,offset:new a.Point(0,6),autoPanPadding:new a.Point(5,5),className:"",zoomAnimation:true},initialize:function(g,h){a.setOptions(this,g);this._source=h;this._animated=a.Browser.any3d&&this.options.zoomAnimation},onAdd:function(h){this._map=h;if(!this._container){this._initLayout()}this._updateContent();var g=h.options.fadeAnimation;if(g){a.DomUtil.setOpacity(this._container,0)}h._panes.popupPane.appendChild(this._container);h.on("viewreset",this._updatePosition,this);if(this._animated){h.on("zoomanim",this._zoomAnimation,this)}if(h.options.closePopupOnClick){h.on("preclick",this._close,this)}this._update();if(g){a.DomUtil.setOpacity(this._container,1)}},addTo:function(g){g.addLayer(this);return this},openOn:function(g){g.openPopup(this);return this},onRemove:function(g){g._panes.popupPane.removeChild(this._container);a.Util.falseFn(this._container.offsetWidth);g.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this);if(g.options.fadeAnimation){a.DomUtil.setOpacity(this._container,0)}this._map=null},setLatLng:function(g){this._latlng=a.latLng(g);this._update();return this},setContent:function(g){this._content=g;this._update();return this},_close:function(){var g=this._map;if(g){g._popup=null;g.removeLayer(this).fire("popupclose",{popup:this})}},_initLayout:function(){var i="leaflet-popup",j=i+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),g=this._container=a.DomUtil.create("div",j),h;if(this.options.closeButton){h=this._closeButton=a.DomUtil.create("a",i+"-close-button",g);h.href="#close";h.innerHTML="&#215;";a.DomEvent.on(h,"click",this._onCloseButtonClick,this)}var k=this._wrapper=a.DomUtil.create("div",i+"-content-wrapper",g);a.DomEvent.disableClickPropagation(k);this._contentNode=a.DomUtil.create("div",i+"-content",k);a.DomEvent.on(this._contentNode,"mousewheel",a.DomEvent.stopPropagation);this._tipContainer=a.DomUtil.create("div",i+"-tip-container",g);this._tip=a.DomUtil.create("div",i+"-tip",this._tipContainer)},_update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},_updateContent:function(){if(!this._content){return}if(typeof this._content==="string"){this._contentNode.innerHTML=this._content}else{while(this._contentNode.hasChildNodes()){this._contentNode.removeChild(this._contentNode.firstChild)}this._contentNode.appendChild(this._content)}this.fire("contentupdate")},_updateLayout:function(){var h=this._contentNode,j=h.style;j.width="";j.whiteSpace="nowrap";var i=h.offsetWidth;i=Math.min(i,this.options.maxWidth);i=Math.max(i,this.options.minWidth);j.width=(i+1)+"px";j.whiteSpace="";j.height="";var g=h.offsetHeight,k=this.options.maxHeight,l="leaflet-popup-scrolled";if(k&&g>k){j.height=k+"px";a.DomUtil.addClass(h,l)}else{a.DomUtil.removeClass(h,l)}this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(!this._map){return}var i=this._map.latLngToLayerPoint(this._latlng),g=this._animated,h=this.options.offset;if(g){a.DomUtil.setPosition(this._container,i)}this._containerBottom=-h.y-(g?0:i.y);this._containerLeft=-Math.round(this._containerWidth/2)+h.x+(g?0:i.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(g){var h=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);a.DomUtil.setPosition(this._container,h)},_adjustPan:function(){if(!this.options.autoPan){return}var g=this._map,m=this._container.offsetHeight,k=this._containerWidth,i=new a.Point(this._containerLeft,-m-this._containerBottom);if(this._animated){i._add(a.DomUtil.getPosition(this._container))}var h=g.layerPointToContainerPoint(i),j=this.options.autoPanPadding,n=g.getSize(),o=0,l=0;if(h.x<0){o=h.x-j.x}if(h.x+k>n.x){o=h.x+k-n.x+j.x}if(h.y<0){l=h.y-j.y}if(h.y+m>n.y){l=h.y+m-n.y+j.y}if(o||l){g.panBy(new a.Point(o,l))}},_onCloseButtonClick:function(g){this._close();a.DomEvent.stop(g)}});a.popup=function(g,h){return new a.Popup(g,h)};a.Marker.include({openPopup:function(){if(this._popup&&this._map){this._popup.setLatLng(this._latlng);this._map.openPopup(this._popup)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},bindPopup:function(i,h){var g=a.point(this.options.icon.options.popupAnchor)||new a.Point(0,0);g=g.add(a.Popup.prototype.options.offset);if(h&&h.offset){g=g.add(h.offset)}h=a.extend({offset:g},h);if(!this._popup){this.on("click",this.openPopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this)}this._popup=new a.Popup(h,this).setContent(i);return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this.openPopup).off("remove",this.closePopup).off("move",this._movePopup)}return this},_movePopup:function(g){this._popup.setLatLng(g.latlng)}});a.Map.include({openPopup:function(g){this.closePopup();this._popup=g;return this.addLayer(g).fire("popupopen",{popup:this._popup})},closePopup:function(){if(this._popup){this._popup._close()}return this}});a.LayerGroup=a.Class.extend({initialize:function(j){this._layers={};var h,g;if(j){for(h=0,g=j.length;h<g;h++){this.addLayer(j[h])}}},addLayer:function(g){var h=a.stamp(g);this._layers[h]=g;if(this._map){this._map.addLayer(g)}return this},removeLayer:function(g){var h=a.stamp(g);delete this._layers[h];if(this._map){this._map.removeLayer(g)}return this},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this},invoke:function(g){var h=Array.prototype.slice.call(arguments,1),k,j;for(k in this._layers){if(this._layers.hasOwnProperty(k)){j=this._layers[k];if(j[g]){j[g].apply(j,h)}}}return this},onAdd:function(g){this._map=g;this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g);this._map=null},addTo:function(g){g.addLayer(this);return this},eachLayer:function(j,h){for(var g in this._layers){if(this._layers.hasOwnProperty(g)){j.call(h,this._layers[g])}}},setZIndex:function(g){return this.invoke("setZIndex",g)}});a.layerGroup=function(g){return new a.LayerGroup(g)};a.FeatureGroup=a.LayerGroup.extend({includes:a.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu"},addLayer:function(g){if(this._layers[a.stamp(g)]){return this}g.on(a.FeatureGroup.EVENTS,this._propagateEvent,this);a.LayerGroup.prototype.addLayer.call(this,g);if(this._popupContent&&g.bindPopup){g.bindPopup(this._popupContent,this._popupOptions)}return this.fire("layeradd",{layer:g})},removeLayer:function(g){g.off(a.FeatureGroup.EVENTS,this._propagateEvent,this);a.LayerGroup.prototype.removeLayer.call(this,g);if(this._popupContent){this.invoke("unbindPopup")}return this.fire("layerremove",{layer:g})},bindPopup:function(h,g){this._popupContent=h;this._popupOptions=g;return this.invoke("bindPopup",h,g)},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new a.LatLngBounds();this.eachLayer(function(h){g.extend(h instanceof a.Marker?h.getLatLng():h.getBounds())});return g},_propagateEvent:function(g){g.layer=g.target;g.target=this;this.fire(g.type,g)}});a.featureGroup=function(g){return new a.FeatureGroup(g)};a.Path=a.Class.extend({includes:[a.Mixin.Events],statics:{CLIP_PADDING:a.Browser.mobile?Math.max(0,Math.min(0.5,(1280/Math.max(e.innerWidth,e.innerHeight)-1)/2)):0.5},options:{stroke:true,color:"#0033ff",dashArray:null,weight:5,opacity:0.5,fill:false,fillColor:null,fillOpacity:0.2,clickable:true},initialize:function(g){a.setOptions(this,g)},onAdd:function(g){this._map=g;if(!this._container){this._initElements();this._initEvents()}this.projectLatlngs();this._updatePath();if(this._container){this._map._pathRoot.appendChild(this._container)}this.fire("add");g.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(g){g.addLayer(this);return this},onRemove:function(g){g._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;if(a.Browser.vml){this._container=null;this._stroke=null;this._fill=null}g.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(g){a.setOptions(this,g);if(this._container){this._updateStyle()}return this},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath()}return this}});a.Map.include({_updatePathViewport:function(){var k=a.Path.CLIP_PADDING,j=this.getSize(),h=a.DomUtil.getPosition(this._mapPane),i=h.multiplyBy(-1)._subtract(j.multiplyBy(k)._round()),g=i.add(j.multiplyBy(1+k*2)._round());this._pathViewport=new a.Bounds(i,g)}});a.Path.SVG_NS="http://www.w3.org/2000/svg";a.Browser.svg=!!(b.createElementNS&&b.createElementNS(a.Path.SVG_NS,"svg").createSVGRect);a.Path=a.Path.extend({statics:{SVG:a.Browser.svg},bringToFront:function(){var g=this._map._pathRoot,h=this._container;if(h&&g.lastChild!==h){g.appendChild(h)}return this},bringToBack:function(){var g=this._map._pathRoot,h=this._container,i=g.firstChild;if(h&&i!==h){g.insertBefore(h,i)}return this},getPathString:function(){},_createElement:function(g){return b.createElementNS(a.Path.SVG_NS,g)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");this._container.appendChild(this._path)},_initStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke-linejoin","round");this._path.setAttribute("stroke-linecap","round")}if(this.options.fill){this._path.setAttribute("fill-rule","evenodd")}this._updateStyle()},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke",this.options.color);this._path.setAttribute("stroke-opacity",this.options.opacity);this._path.setAttribute("stroke-width",this.options.weight);if(this.options.dashArray){this._path.setAttribute("stroke-dasharray",this.options.dashArray)}else{this._path.removeAttribute("stroke-dasharray")}}else{this._path.setAttribute("stroke","none")}if(this.options.fill){this._path.setAttribute("fill",this.options.fillColor||this.options.color);this._path.setAttribute("fill-opacity",this.options.fillOpacity)}else{this._path.setAttribute("fill","none")}},_updatePath:function(){var g=this.getPathString();if(!g){g="M0 0"}this._path.setAttribute("d",g)},_initEvents:function(){if(this.options.clickable){if(a.Browser.svg||!a.Browser.vml){this._path.setAttribute("class","leaflet-clickable")}a.DomEvent.on(this._container,"click",this._onMouseClick,this);var h=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"];for(var g=0;g<h.length;g++){a.DomEvent.on(this._container,h[g],this._fireMouseEvent,this)}}},_onMouseClick:function(g){if(this._map.dragging&&this._map.dragging.moved()){return}this._fireMouseEvent(g)},_fireMouseEvent:function(j){if(!this.hasEventListeners(j.type)){return}var i=this._map,h=i.mouseEventToContainerPoint(j),g=i.containerPointToLayerPoint(h),k=i.layerPointToLatLng(g);this.fire(j.type,{latlng:k,layerPoint:g,containerPoint:h,originalEvent:j});if(j.type==="contextmenu"){a.DomEvent.preventDefault(j)}if(j.type!=="mousemove"){a.DomEvent.stopPropagation(j)}}});a.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=a.Path.prototype._createElement("svg");this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&a.Browser.any3d){this._pathRoot.setAttribute("class"," leaflet-zoom-animated");this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})}else{this._pathRoot.setAttribute("class"," leaflet-zoom-hide")}this.on("moveend",this._updateSvgViewport);this._updateSvgViewport()}},_animatePathZoom:function(g){var i=this.getZoomScale(g.zoom),h=this._getCenterOffset(g.center)._multiplyBy(-i)._add(this._pathViewport.min);this._pathRoot.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(h)+" scale("+i+") ";this._pathZooming=true},_endPathZoom:function(){this._pathZooming=false},_updateSvgViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var j=this._pathViewport,k=j.min,h=j.max,l=h.x-k.x,g=h.y-k.y,i=this._pathRoot,m=this._panes.overlayPane;if(a.Browser.mobileWebkit){m.removeChild(i)}a.DomUtil.setPosition(i,k);i.setAttribute("width",l);i.setAttribute("height",g);i.setAttribute("viewBox",[k.x,k.y,l,g].join(" "));if(a.Browser.mobileWebkit){m.appendChild(i)}}});a.Path.include({bindPopup:function(h,g){if(!this._popup||g){this._popup=new a.Popup(g,this)}this._popup.setContent(h);if(!this._popupHandlersAdded){this.on("click",this._openPopup,this).on("remove",this.closePopup,this);this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this._openPopup).off("remove",this.closePopup);this._popupHandlersAdded=false}return this},openPopup:function(g){if(this._popup){g=g||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];this._openPopup({latlng:g})}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},_openPopup:function(g){this._popup.setLatLng(g.latlng);this._map.openPopup(this._popup)}});a.Browser.vml=!a.Browser.svg&&(function(){try{var i=b.createElement("div");i.innerHTML='<v:shape adj="1"/>';var g=i.firstChild;g.style.behavior="url(#default#VML)";return g&&(typeof g.adj==="object")}catch(h){return false}}());a.Path=a.Browser.svg||!a.Browser.vml?a.Path:a.Path.extend({statics:{VML:true,CLIP_PADDING:0.02},_createElement:(function(){try{b.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(h){return b.createElement("<lvml:"+h+' class="lvml">')}}catch(g){return function(h){return b.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),_initPath:function(){var g=this._container=this._createElement("shape");a.DomUtil.addClass(g,"leaflet-vml-shape");if(this.options.clickable){a.DomUtil.addClass(g,"leaflet-clickable")}g.coordsize="1 1";this._path=this._createElement("path");g.appendChild(this._path);this._map._pathRoot.appendChild(g)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var j=this._stroke,i=this._fill,h=this.options,g=this._container;g.stroked=h.stroke;g.filled=h.fill;if(h.stroke){if(!j){j=this._stroke=this._createElement("stroke");j.endcap="round";g.appendChild(j)}j.weight=h.weight+"px";j.color=h.color;j.opacity=h.opacity;if(h.dashArray){j.dashStyle=h.dashArray instanceof Array?h.dashArray.join(" "):h.dashArray.replace(/ *, */g," ")}else{j.dashStyle=""}}else{if(j){g.removeChild(j);this._stroke=null}}if(h.fill){if(!i){i=this._fill=this._createElement("fill");g.appendChild(i)}i.color=h.fillColor||h.color;i.opacity=h.fillOpacity}else{if(i){g.removeChild(i);this._fill=null}}},_updatePath:function(){var g=this._container.style;g.display="none";this._path.v=this.getPathString()+" ";g.display=""}});a.Map.include(a.Browser.svg||!a.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot){return}var g=this._pathRoot=b.createElement("div");g.className="leaflet-vml-container";this._panes.overlayPane.appendChild(g);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}});a.Browser.canvas=(function(){return !!b.createElement("canvas").getContext}());a.Path=(a.Path.SVG&&!e.L_PREFER_CANVAS)||!a.Browser.canvas?a.Path:a.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate()}return this},setStyle:function(g){a.setOptions(this,g);if(this._map){this._updateStyle();this._requestUpdate()}return this},onRemove:function(g){g.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);if(this.options.clickable){this._map.off("click",this._onClick,this)}this._requestUpdate();this._map=null},_requestUpdate:function(){if(this._map&&!a.Path._updateRequest){a.Path._updateRequest=a.Util.requestAnimFrame(this._fireMapMoveEnd,this._map)}},_fireMapMoveEnd:function(){a.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var g=this.options;if(g.stroke){this._ctx.lineWidth=g.weight;this._ctx.strokeStyle=g.color}if(g.fill){this._ctx.fillStyle=g.fillColor||g.color}},_drawPath:function(){var n,m,h,k,g,l;this._ctx.beginPath();for(n=0,h=this._parts.length;n<h;n++){for(m=0,k=this._parts[n].length;m<k;m++){g=this._parts[n][m];l=(m===0?"move":"line")+"To";this._ctx[l](g.x,g.y)}if(this instanceof a.Polygon){this._ctx.closePath()}}},_checkIfEmpty:function(){return !this._parts.length},_updatePath:function(){if(this._checkIfEmpty()){return}var g=this._ctx,h=this.options;this._drawPath();g.save();this._updateStyle();if(h.fill){g.globalAlpha=h.fillOpacity;g.fill()}if(h.stroke){g.globalAlpha=h.opacity;g.stroke()}g.restore()},_initEvents:function(){if(this.options.clickable){this._map.on("click",this._onClick,this)}},_onClick:function(g){if(this._containsPoint(g.layerPoint)){this.fire("click",{latlng:g.latlng,layerPoint:g.layerPoint,containerPoint:g.containerPoint,originalEvent:g})}}});a.Map.include((a.Path.SVG&&!e.L_PREFER_CANVAS)||!a.Browser.canvas?{}:{_initPathRoot:function(){var h=this._pathRoot,g;if(!h){h=this._pathRoot=b.createElement("canvas");h.style.position="absolute";g=this._canvasCtx=h.getContext("2d");g.lineCap="round";g.lineJoin="round";this._panes.overlayPane.appendChild(h);if(this.options.zoomAnimation){this._pathRoot.className="leaflet-zoom-animated";this.on("zoomanim",this._animatePathZoom);this.on("zoomend",this._endPathZoom)}this.on("moveend",this._updateCanvasViewport);this._updateCanvasViewport()}},_updateCanvasViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var h=this._pathViewport,j=h.min,i=h.max.subtract(j),g=this._pathRoot;a.DomUtil.setPosition(g,j);g.width=i.x;g.height=i.y;g.getContext("2d").translate(-j.x,-j.y)}});a.LineUtil={simplify:function(i,g){if(!g||!i.length){return i.slice()}var h=g*g;i=this._reducePoints(i,h);i=this._simplifyDP(i,h);return i},pointToSegmentDistance:function(h,i,g){return Math.sqrt(this._sqClosestPointOnSegment(h,i,g,true))},closestPointOnSegment:function(h,i,g){return this._sqClosestPointOnSegment(h,i,g)},_simplifyDP:function(l,h){var g=l.length,k=typeof Uint8Array!==f+""?Uint8Array:Array,n=new k(g);n[0]=n[g-1]=1;this._simplifyDPStep(l,n,h,0,g-1);var j,m=[];for(j=0;j<g;j++){if(n[j]){m.push(l[j])}}return m},_simplifyDPStep:function(p,h,g,m,o){var j=0,n,k,l;for(k=m+1;k<=o-1;k++){l=this._sqClosestPointOnSegment(p[k],p[m],p[o],true);if(l>j){n=k;j=l}}if(j>g){h[n]=1;this._simplifyDPStep(p,h,g,m,n);this._simplifyDPStep(p,h,g,n,o)}},_reducePoints:function(k,h){var m=[k[0]];for(var j=1,l=0,g=k.length;j<g;j++){if(this._sqDist(k[j],k[l])>h){m.push(k[j]);l=j}}if(l<g-1){m.push(k[g-1])}return m},clipSegment:function(n,m,g,o){var k=o?this._lastCode:this._getBitCode(n,g),i=this._getBitCode(m,g),j,h,l;this._lastCode=i;while(true){if(!(k|i)){return[n,m]}else{if(k&i){return false}else{j=k||i,h=this._getEdgeIntersection(n,m,j,g),l=this._getBitCode(h,g);if(j===k){n=h;k=l}else{m=h;i=l}}}}},_getEdgeIntersection:function(j,h,n,m){var k=h.x-j.x,i=h.y-j.y,l=m.min,g=m.max;if(n&8){return new a.Point(j.x+k*(g.y-j.y)/i,g.y)}else{if(n&4){return new a.Point(j.x+k*(l.y-j.y)/i,l.y)}else{if(n&2){return new a.Point(g.x,j.y+i*(g.x-j.x)/k)}else{if(n&1){return new a.Point(l.x,j.y+i*(l.x-j.x)/k)}}}}},_getBitCode:function(i,h){var g=0;if(i.x<h.min.x){g|=1}else{if(i.x>h.max.x){g|=2}}if(i.y<h.min.y){g|=4}else{if(i.y>h.max.y){g|=8}}return g},_sqDist:function(j,i){var h=i.x-j.x,g=i.y-j.y;return h*h+g*g},_sqClosestPointOnSegment:function(h,m,l,i){var k=m.x,j=m.y,q=l.x-k,o=l.y-j,g=q*q+o*o,n;if(g>0){n=((h.x-k)*q+(h.y-j)*o)/g;if(n>1){k=l.x;j=l.y}else{if(n>0){k+=q*n;j+=o*n}}}q=h.x-k;o=h.y-j;return i?q*q+o*o:new a.Point(k,j)}};a.Polyline=a.Path.extend({initialize:function(g,h){a.Path.prototype.initialize.call(this,h);this._latlngs=this._convertLatLngs(g)},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];for(var h=0,g=this._latlngs.length;h<g;h++){this._originalPoints[h]=this._map.latLngToLayerPoint(this._latlngs[h])}},getPathString:function(){for(var h=0,g=this._parts.length,j="";h<g;h++){j+=this._getPathPartStr(this._parts[h])}return j},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){this._latlngs=this._convertLatLngs(g);return this.redraw()},addLatLng:function(g){this._latlngs.push(a.latLng(g));return this.redraw()},spliceLatLngs:function(){var g=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs);this.redraw();return g},closestLayerPoint:function(g){var r=Infinity,h=this._parts,t,s,o=null;for(var k=0,u=h.length;k<u;k++){var q=h[k];for(var l=1,n=q.length;l<n;l++){t=q[l-1];s=q[l];var m=a.LineUtil._sqClosestPointOnSegment(g,t,s,true);if(m<r){r=m;o=a.LineUtil._sqClosestPointOnSegment(g,t,s)}}}if(o){o.distance=Math.sqrt(r)}return o},getBounds:function(){var j=new a.LatLngBounds(),k=this.getLatLngs(),h,g;for(h=0,g=k.length;h<g;h++){j.extend(k[h])}return j},_convertLatLngs:function(h){var j,g;for(j=0,g=h.length;j<g;j++){if(a.Util.isArray(h[j])&&typeof h[j][0]!=="number"){return}h[j]=a.latLng(h[j])}return h},_initEvents:function(){a.Path.prototype._initEvents.call(this)},_getPathPartStr:function(k){var h=a.Path.VML;for(var i=0,g=k.length,m="",l;i<g;i++){l=k[i];if(h){l._round()}m+=(i?"L":"M")+l.x+" "+l.y}return m},_clipPoints:function(){var m=this._originalPoints,g=m.length,l,j,n;if(this.options.noClip){this._parts=[m];return}this._parts=[];var o=this._parts,h=this._map._pathViewport,p=a.LineUtil;for(l=0,j=0;l<g-1;l++){n=p.clipSegment(m[l],m[l+1],h,l);if(!n){continue}o[j]=o[j]||[];o[j].push(n[0]);if((n[1]!==m[l+1])||(l===g-2)){o[j].push(n[1]);j++}}},_simplifyPoints:function(){var j=this._parts,k=a.LineUtil;for(var h=0,g=j.length;h<g;h++){j[h]=k.simplify(j[h],this.options.smoothFactor)}},_updatePath:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();a.Path.prototype._updatePath.call(this)}});a.polyline=function(g,h){return new a.Polyline(g,h)};a.PolyUtil={};a.PolyUtil.clipPolygon=function(w,g){var t,q=[1,4,2,8],r,o,n,v,u,s,l,h,m=a.LineUtil;for(r=0,s=w.length;r<s;r++){w[r]._code=m._getBitCode(w[r],g)}for(n=0;n<4;n++){l=q[n];t=[];for(r=0,s=w.length,o=s-1;r<s;o=r++){v=w[r];u=w[o];if(!(v._code&l)){if(u._code&l){h=m._getEdgeIntersection(u,v,l,g);h._code=m._getBitCode(h,g);t.push(h)}t.push(v)}else{if(!(u._code&l)){h=m._getEdgeIntersection(u,v,l,g);h._code=m._getBitCode(h,g);t.push(h)}}}w=t}return w};a.Polygon=a.Polyline.extend({options:{fill:true},initialize:function(g,h){a.Polyline.prototype.initialize.call(this,g,h);if(g&&a.Util.isArray(g[0])&&(typeof g[0][0]!=="number")){this._latlngs=this._convertLatLngs(g[0]);this._holes=g.slice(1)}},projectLatlngs:function(){a.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes){return}var l,k,g,h;for(l=0,g=this._holes.length;l<g;l++){this._holePoints[l]=[];for(k=0,h=this._holes[l].length;k<h;k++){this._holePoints[l][k]=this._map.latLngToLayerPoint(this._holes[l][k])}}},_clipPoints:function(){var k=this._originalPoints,l=[];this._parts=[k].concat(this._holePoints);if(this.options.noClip){return}for(var j=0,h=this._parts.length;j<h;j++){var g=a.PolyUtil.clipPolygon(this._parts[j],this._map._pathViewport);if(g.length){l.push(g)}}this._parts=l},_getPathPartStr:function(g){var h=a.Polyline.prototype._getPathPartStr.call(this,g);return h+(a.Browser.svg?"z":"x")}});a.polygon=function(g,h){return new a.Polygon(g,h)};(function(){function g(h){return a.FeatureGroup.extend({initialize:function(i,j){this._layers={};this._options=j;this.setLatLngs(i)},setLatLngs:function(k){var l=0,j=k.length;this.eachLayer(function(i){if(l<j){i.setLatLngs(k[l++])}else{this.removeLayer(i)}},this);while(l<j){this.addLayer(new h(k[l++],this._options))}return this}})}a.MultiPolyline=g(a.Polyline);a.MultiPolygon=g(a.Polygon);a.multiPolyline=function(h,i){return new a.MultiPolyline(h,i)};a.multiPolygon=function(h,i){return new a.MultiPolygon(h,i)}}());a.Rectangle=a.Polygon.extend({initialize:function(h,g){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(h),g)},setBounds:function(g){this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){g=a.latLngBounds(g);return[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});a.rectangle=function(h,g){return new a.Rectangle(h,g)};a.Circle=a.Path.extend({initialize:function(i,g,h){a.Path.prototype.initialize.call(this,h);this._latlng=a.latLng(i);this._mRadius=g},options:{fill:true},setLatLng:function(g){this._latlng=a.latLng(g);return this.redraw()},setRadius:function(g){this._mRadius=g;return this.redraw()},projectLatlngs:function(){var i=this._getLngRadius(),h=new a.LatLng(this._latlng.lat,this._latlng.lng-i),g=this._map.latLngToLayerPoint(h);this._point=this._map.latLngToLayerPoint(this._latlng);this._radius=Math.max(Math.round(this._point.x-g.x),1)},getBounds:function(){var k=this._getLngRadius(),h=(this._mRadius/40075017)*360,j=this._latlng,g=new a.LatLng(j.lat-h,j.lng-k),i=new a.LatLng(j.lat+h,j.lng+k);return new a.LatLngBounds(g,i)},getLatLng:function(){return this._latlng},getPathString:function(){var h=this._point,g=this._radius;if(this._checkIfEmpty()){return""}if(a.Browser.svg){return"M"+h.x+","+(h.y-g)+"A"+g+","+g+",0,1,1,"+(h.x-0.1)+","+(h.y-g)+" z"}else{h._round();g=Math.round(g);return"AL "+h.x+","+h.y+" "+g+","+g+" 0,"+(65535*360)}},getRadius:function(){return this._mRadius},_getLatRadius:function(){return(this._mRadius/40075017)*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(a.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map){return false}var g=this._map._pathViewport,h=this._radius,i=this._point;return i.x-h>g.max.x||i.y-h>g.max.y||i.x+h<g.min.x||i.y+h<g.min.y}});a.circle=function(i,g,h){return new a.Circle(i,g,h)};a.CircleMarker=a.Circle.extend({options:{radius:10,weight:2},initialize:function(h,g){a.Circle.prototype.initialize.call(this,h,null,g);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){a.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setRadius:function(g){this._radius=g;return this.redraw()}});a.circleMarker=function(h,g){return new a.CircleMarker(h,g)};a.Polyline.include(!a.Path.CANVAS?{}:{_containsPoint:function(g,q){var o,n,l,r,m,s,h,t=this.options.weight/2;if(a.Browser.touch){t+=10}for(o=0,r=this._parts.length;o<r;o++){h=this._parts[o];for(n=0,m=h.length,l=m-1;n<m;l=n++){if(!q&&(n===0)){continue}s=a.LineUtil.pointToSegmentDistance(g,h[l],h[n]);if(s<=t){return true}}}return false}});a.Polygon.include(!a.Path.CANVAS?{}:{_containsPoint:function(g){var l=false,h,t,s,q,o,n,r,m;if(a.Polyline.prototype._containsPoint.call(this,g,true)){return true}for(q=0,r=this._parts.length;q<r;q++){h=this._parts[q];for(o=0,m=h.length,n=m-1;o<m;n=o++){t=h[o];s=h[n];if(((t.y>g.y)!==(s.y>g.y))&&(g.x<(s.x-t.x)*(g.y-t.y)/(s.y-t.y)+t.x)){l=!l}}}return l}});a.Circle.include(!a.Path.CANVAS?{}:{_drawPath:function(){var g=this._point;this._ctx.beginPath();this._ctx.arc(g.x,g.y,this._radius,0,Math.PI*2,false)},_containsPoint:function(i){var h=this._point,g=this.options.stroke?this.options.weight/2:0;return(i.distanceTo(h)<=this._radius+g)}});a.GeoJSON=a.FeatureGroup.extend({initialize:function(h,g){a.setOptions(this,g);this._layers={};if(h){this.addData(h)}},addData:function(j){var m=a.Util.isArray(j)?j:j.features,l,g;if(m){for(l=0,g=m.length;l<g;l++){if(m[l].geometries||m[l].geometry){this.addData(m[l])}}return this}var h=this.options;if(h.filter&&!h.filter(j)){return}var k=a.GeoJSON.geometryToLayer(j,h.pointToLayer);k.feature=j;k.defaultOptions=k.options;this.resetStyle(k);if(h.onEachFeature){h.onEachFeature(j,k)}return this.addLayer(k)},resetStyle:function(g){var h=this.options.style;if(h){a.Util.extend(g.options,g.defaultOptions);this._setLayerStyle(g,h)}},setStyle:function(g){this.eachLayer(function(h){this._setLayerStyle(h,g)},this)},_setLayerStyle:function(g,h){if(typeof h==="function"){h=h(g.feature)}if(g.setStyle){g.setStyle(h)}}});a.extend(a.GeoJSON,{geometryToLayer:function(g,h){var p=g.type==="Feature"?g.geometry:g,q=p.coordinates,l=[],k,j,m,o,n;switch(p.type){case"Point":k=this.coordsToLatLng(q);return h?h(g,k):new a.Marker(k);case"MultiPoint":for(m=0,o=q.length;m<o;m++){k=this.coordsToLatLng(q[m]);n=h?h(g,k):new a.Marker(k);l.push(n)}return new a.FeatureGroup(l);case"LineString":j=this.coordsToLatLngs(q);return new a.Polyline(j);case"Polygon":j=this.coordsToLatLngs(q,1);return new a.Polygon(j);case"MultiLineString":j=this.coordsToLatLngs(q,1);return new a.MultiPolyline(j);case"MultiPolygon":j=this.coordsToLatLngs(q,2);return new a.MultiPolygon(j);case"GeometryCollection":for(m=0,o=p.geometries.length;m<o;m++){n=this.geometryToLayer({geometry:p.geometries[m],type:"Feature",properties:g.properties},h);l.push(n)}return new a.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(i,h){var j=parseFloat(i[h?0:1]),g=parseFloat(i[h?1:0]);return new a.LatLng(j,g)},coordsToLatLngs:function(m,l,j){var n,h=[],k,g;for(k=0,g=m.length;k<g;k++){n=l?this.coordsToLatLngs(m[k],l-1,j):this.coordsToLatLng(m[k],j);h.push(n)}return h}});a.geoJson=function(h,g){return new a.GeoJSON(h,g)};a.DomEvent={addListener:function(j,l,m,h){var g=a.stamp(m),n="_leaflet_"+l+g,o,k,i;if(j[n]){return this}o=function(p){return m.call(h||j,p||a.DomEvent._getEvent())};if(a.Browser.msTouch&&l.indexOf("touch")===0){return this.addMsTouchListener(j,l,o,g)}if(a.Browser.touch&&(l==="dblclick")&&this.addDoubleTapListener){this.addDoubleTapListener(j,o,g)}if("addEventListener" in j){if(l==="mousewheel"){j.addEventListener("DOMMouseScroll",o,false);j.addEventListener(l,o,false)}else{if((l==="mouseenter")||(l==="mouseleave")){k=o;i=(l==="mouseenter"?"mouseover":"mouseout");o=function(p){if(!a.DomEvent._checkMouse(j,p)){return}return k(p)};j.addEventListener(i,o,false)}else{j.addEventListener(l,o,false)}}}else{if("attachEvent" in j){j.attachEvent("on"+l,o)}}j[n]=o;return this},removeListener:function(k,j,i){var l=a.stamp(i),g="_leaflet_"+j+l,h=k[g];if(!h){return}if(a.Browser.msTouch&&j.indexOf("touch")===0){this.removeMsTouchListener(k,j,l)}else{if(a.Browser.touch&&(j==="dblclick")&&this.removeDoubleTapListener){this.removeDoubleTapListener(k,l)}else{if("removeEventListener" in k){if(j==="mousewheel"){k.removeEventListener("DOMMouseScroll",h,false);k.removeEventListener(j,h,false)}else{if((j==="mouseenter")||(j==="mouseleave")){k.removeEventListener((j==="mouseenter"?"mouseover":"mouseout"),h,false)}else{k.removeEventListener(j,h,false)}}}else{if("detachEvent" in k){k.detachEvent("on"+j,h)}}}}k[g]=null;return this},stopPropagation:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return this},disableClickPropagation:function(j){var h=a.DomEvent.stopPropagation;for(var g=a.Draggable.START.length-1;g>=0;g--){a.DomEvent.addListener(j,a.Draggable.START[g],h)}return a.DomEvent.addListener(j,"click",h).addListener(j,"dblclick",h)},preventDefault:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return this},stop:function(g){return a.DomEvent.preventDefault(g).stopPropagation(g)},getMousePosition:function(j,i){var h=b.body,m=b.documentElement,g=j.pageX?j.pageX:j.clientX+h.scrollLeft+m.scrollLeft,l=j.pageY?j.pageY:j.clientY+h.scrollTop+m.scrollTop,k=new a.Point(g,l);return(i?k._subtract(a.DomUtil.getViewportOffset(i)):k)},getWheelDelta:function(g){var h=0;if(g.wheelDelta){h=g.wheelDelta/120}if(g.detail){h=-g.detail/3}return h},_checkMouse:function(g,j){var i=j.relatedTarget;if(!i){return true}try{while(i&&(i!==g)){i=i.parentNode}}catch(h){return false}return(i!==g)},_getEvent:function(){var h=e.event;if(!h){var g=arguments.callee.caller;while(g){h=g["arguments"][0];if(h&&e.Event===h.constructor){break}g=g.caller}}return h}};a.DomEvent.on=a.DomEvent.addListener;a.DomEvent.off=a.DomEvent.removeListener;a.Draggable=a.Class.extend({includes:a.Mixin.Events,statics:{START:a.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"},TAP_TOLERANCE:15},initialize:function(g,h,i){this._element=g;this._dragStartTarget=h||g;this._longPress=i&&!a.Browser.msTouch},enable:function(){if(this._enabled){return}for(var g=a.Draggable.START.length-1;g>=0;g--){a.DomEvent.on(this._dragStartTarget,a.Draggable.START[g],this._onDown,this)}this._enabled=true},disable:function(){if(!this._enabled){return}for(var g=a.Draggable.START.length-1;g>=0;g--){a.DomEvent.off(this._dragStartTarget,a.Draggable.START[g],this._onDown,this)}this._enabled=false;this._moved=false},_onDown:function(h){if((!a.Browser.touch&&h.shiftKey)||((h.which!==1)&&(h.button!==1)&&!h.touches)){return}a.DomEvent.preventDefault(h);a.DomEvent.stopPropagation(h);if(a.Draggable._disabled){return}this._simulateClick=true;if(h.touches&&h.touches.length>1){this._simulateClick=false;clearTimeout(this._longPressTimeout);return}var i=(h.touches&&h.touches.length===1?h.touches[0]:h),g=i.target;if(a.Browser.touch&&g.tagName.toLowerCase()==="a"){a.DomUtil.addClass(g,"leaflet-active")}this._moved=false;if(this._moving){return}this._startPoint=new a.Point(i.clientX,i.clientY);this._startPos=this._newPos=a.DomUtil.getPosition(this._element);if(h.touches&&h.touches.length===1&&a.Browser.touch&&this._longPress){this._longPressTimeout=setTimeout(a.bind(function(){var j=(this._newPos&&this._newPos.distanceTo(this._startPos))||0;if(j<a.Draggable.TAP_TOLERANCE){this._simulateClick=false;this._onUp();this._simulateEvent("contextmenu",i)}},this),1000)}a.DomEvent.on(b,a.Draggable.MOVE[h.type],this._onMove,this);a.DomEvent.on(b,a.Draggable.END[h.type],this._onUp,this)},_onMove:function(i){if(i.touches&&i.touches.length>1){return}var j=(i.touches&&i.touches.length===1?i.touches[0]:i),h=new a.Point(j.clientX,j.clientY),g=h.subtract(this._startPoint);if(!g.x&&!g.y){return}a.DomEvent.preventDefault(i);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=a.DomUtil.getPosition(this._element).subtract(g);if(!a.Browser.touch){a.DomUtil.disableTextSelection();this._setMovingCursor()}}this._newPos=this._startPos.add(g);this._moving=true;a.Util.cancelAnimFrame(this._animRequest);this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget)},_updatePosition:function(){this.fire("predrag");a.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(k){var j;clearTimeout(this._longPressTimeout);if(this._simulateClick&&k.changedTouches){var m=k.changedTouches[0],h=m.target,l=(this._newPos&&this._newPos.distanceTo(this._startPos))||0;if(h.tagName.toLowerCase()==="a"){a.DomUtil.removeClass(h,"leaflet-active")}if(l<a.Draggable.TAP_TOLERANCE){j=m}}if(!a.Browser.touch){a.DomUtil.enableTextSelection();this._restoreCursor()}for(var g in a.Draggable.MOVE){if(a.Draggable.MOVE.hasOwnProperty(g)){a.DomEvent.off(b,a.Draggable.MOVE[g],this._onMove);a.DomEvent.off(b,a.Draggable.END[g],this._onUp)}}if(this._moved){a.Util.cancelAnimFrame(this._animRequest);this.fire("dragend")}this._moving=false;if(j){this._moved=false;this._simulateEvent("click",j)}},_setMovingCursor:function(){a.DomUtil.addClass(b.body,"leaflet-dragging")},_restoreCursor:function(){a.DomUtil.removeClass(b.body,"leaflet-dragging")},_simulateEvent:function(g,i){var h=b.createEvent("MouseEvents");h.initMouseEvent(g,true,true,e,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);i.target.dispatchEvent(h)}});a.Handler=a.Class.extend({initialize:function(g){this._map=g},enable:function(){if(this._enabled){return}this._enabled=true;this.addHooks()},disable:function(){if(!this._enabled){return}this._enabled=false;this.removeHooks()},enabled:function(){return !!this._enabled}});a.Map.mergeOptions({dragging:true,inertia:!a.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:a.Browser.touch?32:18,easeLinearity:0.25,longPress:true,worldCopyJump:false});a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new a.Draggable(g._mapPane,g._container,g.options.longPress);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);if(g.options.worldCopyJump){this._draggable.on("predrag",this._onPreDrag,this);g.on("viewreset",this._onViewReset,this)}}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var g=this._map;if(g._panAnim){g._panAnim.stop()}g.fire("movestart").fire("dragstart");if(g.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(){if(this._map.options.inertia){var g=this._lastTime=+new Date(),h=this._lastPos=this._draggable._newPos;this._positions.push(h);this._times.push(g);if(g-this._times[0]>200){this._positions.shift();this._times.shift()}}this._map.fire("move").fire("drag")},_onViewReset:function(){var h=this._map.getSize()._divideBy(2),g=this._map.latLngToLayerPoint(new a.LatLng(0,0));this._initialWorldOffset=g.subtract(h).x;this._worldWidth=this._map.project(new a.LatLng(0,180)).x},_onPreDrag:function(){var m=this._worldWidth,l=Math.round(m/2),h=this._initialWorldOffset,g=this._draggable._newPos.x,j=(g-l+h)%m+l-h,i=(g+l+h)%m-l-h,k=Math.abs(j+h)<Math.abs(i+h)?j:i;this._draggable._newPos.x=k},_onDragEnd:function(){var h=this._map,s=h.options,o=+new Date()-this._lastTime,g=!s.inertia||o>s.inertiaThreshold||!this._positions[0];if(g){h.fire("moveend")}else{var p=this._lastPos.subtract(this._positions[0]),m=(this._lastTime+o-this._times[0])/1000,l=s.easeLinearity,k=p.multiplyBy(l/m),j=k.distanceTo(new a.Point(0,0)),r=Math.min(s.inertiaMaxSpeed,j),q=k.multiplyBy(r/j),i=r/(s.inertiaDeceleration*l),n=q.multiplyBy(-i/2).round();a.Util.requestAnimFrame(function(){h.panBy(n,i,l)})}h.fire("dragend");if(s.maxBounds){a.Util.requestAnimFrame(this._panInsideMaxBounds,h,true,h._container)}},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}});a.Map.addInitHook("addHandler","dragging",a.Map.Drag);a.Map.mergeOptions({doubleClickZoom:true});a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(g){this.setView(g.latlng,this._zoom+1)}});a.Map.addInitHook("addHandler","doubleClickZoom",a.Map.DoubleClickZoom);a.Map.mergeOptions({scrollWheelZoom:true});a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){a.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(h){var i=a.DomEvent.getWheelDelta(h);this._delta+=i;this._lastMousePos=this._map.mouseEventToContainerPoint(h);if(!this._startTime){this._startTime=+new Date()}var g=Math.max(40-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(a.bind(this._performZoom,this),g);a.DomEvent.preventDefault(h);a.DomEvent.stopPropagation(h)},_performZoom:function(){var j=this._map,k=this._delta,i=j.getZoom();k=k>0?Math.ceil(k):Math.round(k);k=Math.max(Math.min(k,4),-4);k=j._limitZoom(i+k)-i;this._delta=0;this._startTime=null;if(!k){return}var h=i+k,g=this._getCenterForScrollWheelZoom(h);j.setView(g,h)},_getCenterForScrollWheelZoom:function(j){var k=this._map,l=k.getZoomScale(j),i=k.getSize()._divideBy(2),h=this._lastMousePos._subtract(i)._multiplyBy(1-1/l),g=k._getTopLeftPoint()._add(i)._add(h);return k.unproject(g)}});a.Map.addInitHook("addHandler","scrollWheelZoom",a.Map.ScrollWheelZoom);a.extend(a.DomEvent,{_touchstart:a.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:a.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(l,t,g){var s,o=false,m=250,k,i="_leaflet_",n=this._touchstart,r=this._touchend,q=[];function j(w){var v;if(a.Browser.msTouch){q.push(w.pointerId);v=q.length}else{v=w.touches.length}if(v>1){return}var u=Date.now(),x=u-(s||u);k=w.touches?w.touches[0]:w;o=(x>0&&x<=m);s=u}function p(x){if(a.Browser.msTouch){var v=q.indexOf(x.pointerId);if(v===-1){return}q.splice(v,1)}if(o){if(a.Browser.msTouch){var u={},y;for(var w in k){y=k[w];if(typeof y==="function"){u[w]=y.bind(k)}else{u[w]=y}}k=u}k.type="dblclick";t(k);s=null}}l[i+n+g]=j;l[i+r+g]=p;var h=a.Browser.msTouch?b.documentElement:l;l.addEventListener(n,j,false);h.addEventListener(r,p,false);if(a.Browser.msTouch){h.addEventListener("MSPointerCancel",p,false)}return this},removeDoubleTapListener:function(h,i){var g="_leaflet_";h.removeEventListener(this._touchstart,h[g+this._touchstart+i],false);(a.Browser.msTouch?b.documentElement:h).removeEventListener(this._touchend,h[g+this._touchend+i],false);if(a.Browser.msTouch){b.documentElement.removeEventListener("MSPointerCancel",h[g+this._touchend+i],false)}return this}});a.extend(a.DomEvent,{_msTouches:[],_msDocumentListener:false,addMsTouchListener:function(i,h,g,j){switch(h){case"touchstart":return this.addMsTouchListenerStart(i,h,g,j);case"touchend":return this.addMsTouchListenerEnd(i,h,g,j);case"touchmove":return this.addMsTouchListenerMove(i,h,g,j);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(m,j,i,n){var l="_leaflet_",k=this._msTouches;var g=function(q){var p=false;for(var o=0;o<k.length;o++){if(k[o].pointerId===q.pointerId){p=true;break}}if(!p){k.push(q)}q.touches=k.slice();q.changedTouches=[q];i(q)};m[l+"touchstart"+n]=g;m.addEventListener("MSPointerDown",g,false);if(!this._msDocumentListener){var h=function(p){for(var o=0;o<k.length;o++){if(k[o].pointerId===p.pointerId){k.splice(o,1);break}}};b.documentElement.addEventListener("MSPointerUp",h,false);b.documentElement.addEventListener("MSPointerCancel",h,false);this._msDocumentListener=true}return this},addMsTouchListenerMove:function(l,i,h,m){var k="_leaflet_",j=this._msTouches;function g(o){if(o.pointerType===o.MSPOINTER_TYPE_MOUSE&&o.buttons===0){return}for(var n=0;n<j.length;n++){if(j[n].pointerId===o.pointerId){j[n]=o;break}}o.touches=j.slice();o.changedTouches=[o];h(o)}l[k+"touchmove"+m]=g;l.addEventListener("MSPointerMove",g,false);return this},addMsTouchListenerEnd:function(l,i,h,m){var k="_leaflet_",j=this._msTouches;var g=function(o){for(var n=0;n<j.length;n++){if(j[n].pointerId===o.pointerId){j.splice(n,1);break}}o.touches=j.slice();o.changedTouches=[o];h(o)};l[k+"touchend"+m]=g;l.addEventListener("MSPointerUp",g,false);l.addEventListener("MSPointerCancel",g,false);return this},removeMsTouchListener:function(j,h,k){var i="_leaflet_",g=j[i+h+k];switch(h){case"touchstart":j.removeEventListener("MSPointerDown",g,false);break;case"touchmove":j.removeEventListener("MSPointerMove",g,false);break;case"touchend":j.removeEventListener("MSPointerUp",g,false);j.removeEventListener("MSPointerCancel",g,false);break}return this}});a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23});a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(j){var i=this._map;if(!j.touches||j.touches.length!==2||i._animatingZoom||this._zooming){return}var k=i.mouseEventToLayerPoint(j.touches[0]),h=i.mouseEventToLayerPoint(j.touches[1]),g=i._getCenterLayerPoint();this._startCenter=k.add(h)._divideBy(2);this._startDist=k.distanceTo(h);this._moved=false;this._zooming=true;this._centerOffset=g.subtract(this._startCenter);if(i._panAnim){i._panAnim.stop()}a.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this);a.DomEvent.preventDefault(j)},_onTouchMove:function(i){if(!i.touches||i.touches.length!==2){return}var h=this._map;var j=h.mouseEventToLayerPoint(i.touches[0]),g=h.mouseEventToLayerPoint(i.touches[1]);this._scale=j.distanceTo(g)/this._startDist;this._delta=j._add(g)._divideBy(2)._subtract(this._startCenter);if(this._scale===1){return}if(!this._moved){a.DomUtil.addClass(h._mapPane,"leaflet-zoom-anim leaflet-touching");h.fire("movestart").fire("zoomstart")._prepareTileBg();this._moved=true}a.Util.cancelAnimFrame(this._animRequest);this._animRequest=a.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);a.DomEvent.preventDefault(i)},_updateOnMove:function(){var i=this._map,h=this._getScaleOrigin(),g=i.layerPointToLatLng(h);i.fire("zoomanim",{center:g,zoom:i.getScaleZoom(this._scale)});i._tileBg.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(this._delta)+" "+a.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(){if(!this._moved||!this._zooming){return}var m=this._map;this._zooming=false;a.DomUtil.removeClass(m._mapPane,"leaflet-touching");a.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),h=m.layerPointToLatLng(i),l=m.getZoom(),g=m.getScaleZoom(this._scale)-l,j=(g>0?Math.ceil(g):Math.floor(g)),k=m._limitZoom(l+j);m.fire("zoomanim",{center:h,zoom:k});m._runAnimation(h,k,m.getZoomScale(k)/this._scale,i,true)},_getScaleOrigin:function(){var g=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(g)}});a.Map.addInitHook("addHandler","touchZoom",a.Map.TouchZoom);a.Map.mergeOptions({boxZoom:true});a.Map.BoxZoom=a.Handler.extend({initialize:function(g){this._map=g;this._container=g._container;this._pane=g._panes.overlayPane},addHooks:function(){a.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){a.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(g){if(!g.shiftKey||((g.which!==1)&&(g.button!==1))){return false}a.DomUtil.disableTextSelection();this._startLayerPoint=this._map.mouseEventToLayerPoint(g);this._box=a.DomUtil.create("div","leaflet-zoom-box",this._pane);a.DomUtil.setPosition(this._box,this._startLayerPoint);this._container.style.cursor="crosshair";a.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).preventDefault(g);this._map.fire("boxzoomstart")},_onMouseMove:function(k){var j=this._startLayerPoint,i=this._box,g=this._map.mouseEventToLayerPoint(k),l=g.subtract(j),h=new a.Point(Math.min(g.x,j.x),Math.min(g.y,j.y));a.DomUtil.setPosition(i,h);i.style.width=(Math.max(0,Math.abs(l.x)-4))+"px";i.style.height=(Math.max(0,Math.abs(l.y)-4))+"px"},_onMouseUp:function(j){this._pane.removeChild(this._box);this._container.style.cursor="";a.DomUtil.enableTextSelection();a.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp);var i=this._map,g=i.mouseEventToLayerPoint(j);if(this._startLayerPoint.equals(g)){return}var h=new a.LatLngBounds(i.layerPointToLatLng(this._startLayerPoint),i.layerPointToLatLng(g));i.fitBounds(h);i.fire("boxzoomend",{boxZoomBounds:h})}});a.Map.addInitHook("addHandler","boxZoom",a.Map.BoxZoom);a.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(g){this._map=g;this._setPanOffset(g.options.keyboardPanOffset);this._setZoomOffset(g.options.keyboardZoomOffset)},addHooks:function(){var g=this._map._container;if(g.tabIndex===-1){g.tabIndex="0"}a.DomEvent.on(g,"focus",this._onFocus,this).on(g,"blur",this._onBlur,this).on(g,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var g=this._map._container;a.DomEvent.off(g,"focus",this._onFocus,this).off(g,"blur",this._onBlur,this).off(g,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){this._map._container.focus()}},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanOffset:function(l){var k=this._panKeys={},h=this.keyCodes,j,g;for(j=0,g=h.left.length;j<g;j++){k[h.left[j]]=[-1*l,0]}for(j=0,g=h.right.length;j<g;j++){k[h.right[j]]=[l,0]}for(j=0,g=h.down.length;j<g;j++){k[h.down[j]]=[0,l]}for(j=0,g=h.up.length;j<g;j++){k[h.up[j]]=[0,-1*l]}},_setZoomOffset:function(l){var k=this._zoomKeys={},h=this.keyCodes,j,g;for(j=0,g=h.zoomIn.length;j<g;j++){k[h.zoomIn[j]]=l}for(j=0,g=h.zoomOut.length;j<g;j++){k[h.zoomOut[j]]=-l}},_addHooks:function(){a.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){a.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){var g=i.keyCode,h=this._map;if(this._panKeys.hasOwnProperty(g)){h.panBy(this._panKeys[g]);if(h.options.maxBounds){h.panInsideBounds(h.options.maxBounds)}}else{if(this._zoomKeys.hasOwnProperty(g)){h.setZoom(h.getZoom()+this._zoomKeys[g])}else{return}}a.DomEvent.stop(i)}});a.Map.addInitHook("addHandler","keyboard",a.Map.Keyboard);a.Handler.MarkerDrag=a.Handler.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;if(!this._draggable){this._draggable=new a.Draggable(g,g).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var g=this._marker,j=g._shadow,h=a.DomUtil.getPosition(g._icon),i=g._map.layerPointToLatLng(h);if(j){a.DomUtil.setPosition(j,h)}g._latlng=i;g.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}});a.Handler.PolyEdit=a.Handler.extend({options:{icon:new a.DivIcon({iconSize:new a.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(h,g){this._poly=h;a.setOptions(this,g)},addHooks:function(){if(this._poly._map){if(!this._markerGroup){this._initMarkers()}this._poly._map.addLayer(this._markerGroup)}},removeHooks:function(){if(this._poly._map){this._poly._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers}},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new a.LayerGroup()}this._markers=[];var h=this._poly._latlngs,o,n,g,k;for(o=0,g=h.length;o<g;o++){k=this._createMarker(h[o],o);k.on("click",this._onMarkerClick,this);this._markers.push(k)}var m,l;for(o=0,n=g-1;o<g;n=o++){if(o===0&&!(a.Polygon&&(this._poly instanceof a.Polygon))){continue}m=this._markers[n];l=this._markers[o];this._createMiddleMarker(m,l);this._updatePrevNext(m,l)}},_createMarker:function(i,h){var g=new a.Marker(i,{draggable:true,icon:this.options.icon});g._origLatLng=i;g._index=h;g.on("drag",this._onMarkerDrag,this);g.on("dragend",this._fireEdit,this);this._markerGroup.addLayer(g);return g},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(h){var g=h.target;a.extend(g._origLatLng,g._latlng);if(g._middleLeft){g._middleLeft.setLatLng(this._getMiddleLatLng(g._prev,g))}if(g._middleRight){g._middleRight.setLatLng(this._getMiddleLatLng(g,g._next))}this._poly.redraw()},_onMarkerClick:function(j){if(this._poly._latlngs.length<3){return}var g=j.target,h=g._index;this._markerGroup.removeLayer(g);this._markers.splice(h,1);this._poly.spliceLatLngs(h,1);this._updateIndexes(h,-1);this._updatePrevNext(g._prev,g._next);if(g._middleLeft){this._markerGroup.removeLayer(g._middleLeft)}if(g._middleRight){this._markerGroup.removeLayer(g._middleRight)}if(g._prev&&g._next){this._createMiddleMarker(g._prev,g._next)}else{if(!g._prev){g._next._middleLeft=null}else{if(!g._next){g._prev._middleRight=null}}}this._poly.fire("edit")},_updateIndexes:function(g,h){this._markerGroup.eachLayer(function(i){if(i._index>g){i._index+=h}})},_createMiddleMarker:function(l,j){var m=this._getMiddleLatLng(l,j),g=this._createMarker(m),k,i,h;g.setOpacity(0.6);l._middleRight=j._middleLeft=g;i=function(){var n=j._index;g._index=n;g.off("click",k).on("click",this._onMarkerClick,this);m.lat=g.getLatLng().lat;m.lng=g.getLatLng().lng;this._poly.spliceLatLngs(n,0,m);this._markers.splice(n,0,g);g.setOpacity(1);this._updateIndexes(n,1);j._index++;this._updatePrevNext(l,g);this._updatePrevNext(g,j)};h=function(){g.off("dragstart",i,this);g.off("dragend",h,this);this._createMiddleMarker(l,g);this._createMiddleMarker(g,j)};k=function(){i.call(this);h.call(this);this._poly.fire("edit")};g.on("click",k,this).on("dragstart",i,this).on("dragend",h,this);this._markerGroup.addLayer(g)},_updatePrevNext:function(h,g){if(h){h._next=g}if(g){g._prev=h}},_getMiddleLatLng:function(k,i){var h=this._poly._map,j=h.latLngToLayerPoint(k.getLatLng()),g=h.latLngToLayerPoint(i.getLatLng());return h.layerPointToLatLng(j._add(g)._divideBy(2))}});a.Polyline.addInitHook(function(){if(a.Handler.PolyEdit){this.editing=new a.Handler.PolyEdit(this);if(this.options.editable){this.editing.enable()}}this.on("add",function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()}});this.on("remove",function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()}})});a.Control=a.Class.extend({options:{position:"topright"},initialize:function(g){a.setOptions(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var h=this._map;if(h){h.removeControl(this)}this.options.position=g;if(h){h.addControl(this)}return this},addTo:function(i){this._map=i;var g=this._container=this.onAdd(i),j=this.getPosition(),h=i._controlCorners[j];a.DomUtil.addClass(g,"leaflet-control");if(j.indexOf("bottom")!==-1){h.insertBefore(g,h.firstChild)}else{h.appendChild(g)}return this},removeFrom:function(h){var i=this.getPosition(),g=h._controlCorners[i];g.removeChild(this._container);this._map=null;if(this.onRemove){this.onRemove(h)}return this}});a.control=function(g){return new a.Control(g)};a.Map.include({addControl:function(g){g.addTo(this);return this},removeControl:function(g){g.removeFrom(this);return this},_initControlPos:function(){var i=this._controlCorners={},h="leaflet-",g=this._controlContainer=a.DomUtil.create("div",h+"control-container",this._container);function j(l,m){var k=h+l+" "+h+m;i[l+m]=a.DomUtil.create("div",k,g)}j("top","left");j("top","right");j("bottom","left");j("bottom","right")}});a.Control.Zoom=a.Control.extend({options:{position:"topleft"},onAdd:function(j){var k="leaflet-control-zoom",i="leaflet-bar",h=i+"-part",g=a.DomUtil.create("div",k+" "+i);this._map=j;this._zoomInButton=this._createButton("+","Zoom in",k+"-in "+h+" "+h+"-top",g,this._zoomIn,this);this._zoomOutButton=this._createButton("-","Zoom out",k+"-out "+h+" "+h+"-bottom",g,this._zoomOut,this);j.on("zoomend",this._updateDisabled,this);return g},onRemove:function(g){g.off("zoomend",this._updateDisabled,this)},_zoomIn:function(g){this._map.zoomIn(g.shiftKey?3:1)},_zoomOut:function(g){this._map.zoomOut(g.shiftKey?3:1)},_createButton:function(j,n,l,g,k,i){var m=a.DomUtil.create("a",l,g);m.innerHTML=j;m.href="#";m.title=n;var h=a.DomEvent.stopPropagation;a.DomEvent.on(m,"click",h).on(m,"mousedown",h).on(m,"dblclick",h).on(m,"click",a.DomEvent.preventDefault).on(m,"click",k,i);return m},_updateDisabled:function(){var h=this._map,g="leaflet-control-zoom-disabled";a.DomUtil.removeClass(this._zoomInButton,g);a.DomUtil.removeClass(this._zoomOutButton,g);if(h._zoom===h.getMinZoom()){a.DomUtil.addClass(this._zoomOutButton,g)}if(h._zoom===h.getMaxZoom()){a.DomUtil.addClass(this._zoomInButton,g)}}});a.Map.mergeOptions({zoomControl:true});a.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new a.Control.Zoom();this.addControl(this.zoomControl)}});a.control.zoom=function(g){return new a.Control.Zoom(g)};a.Control.Attribution=a.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leafletjs.com">Leaflet</a>'},initialize:function(g){a.setOptions(this,g);this._attributions={}},onAdd:function(g){this._container=a.DomUtil.create("div","leaflet-control-attribution");a.DomEvent.disableClickPropagation(this._container);g.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);this._update();return this._container},onRemove:function(g){g.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(g){this.options.prefix=g;this._update();return this},addAttribution:function(g){if(!g){return}if(!this._attributions[g]){this._attributions[g]=0}this._attributions[g]++;this._update();return this},removeAttribution:function(g){if(!g){return}this._attributions[g]--;this._update();return this},_update:function(){if(!this._map){return}var j=[];for(var g in this._attributions){if(this._attributions.hasOwnProperty(g)&&this._attributions[g]){j.push(g)}}var h=[];if(this.options.prefix){h.push(this.options.prefix)}if(j.length){h.push(j.join(", "))}this._container.innerHTML=h.join(" &#8212; ")},_onLayerAdd:function(g){if(g.layer.getAttribution){this.addAttribution(g.layer.getAttribution())}},_onLayerRemove:function(g){if(g.layer.getAttribution){this.removeAttribution(g.layer.getAttribution())}}});a.Map.mergeOptions({attributionControl:true});a.Map.addInitHook(function(){if(this.options.attributionControl){this.attributionControl=(new a.Control.Attribution()).addTo(this)}});a.control.attribution=function(g){return new a.Control.Attribution(g)};a.Control.Scale=a.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(j){this._map=j;var i="leaflet-control-scale",g=a.DomUtil.create("div",i),h=this.options;this._addScales(h,i,g);j.on(h.updateWhenIdle?"moveend":"move",this._update,this);j.whenReady(this._update,this);return g},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,i,g){if(h.metric){this._mScale=a.DomUtil.create("div",i+"-line",g)}if(h.imperial){this._iScale=a.DomUtil.create("div",i+"-line",g)}},_update:function(){var j=this._map.getBounds(),k=j.getCenter().lat,i=6378137*Math.PI*Math.cos(k*Math.PI/180),m=i*(j.getNorthEast().lng-j.getSouthWest().lng)/180,h=this._map.getSize(),g=this.options,l=0;if(h.x>0){l=m*(g.maxWidth/h.x)}this._updateScales(g,l)},_updateScales:function(g,h){if(g.metric&&h){this._updateMetric(h)}if(g.imperial&&h){this._updateImperial(h)}},_updateMetric:function(h){var g=this._getRoundNum(h);this._mScale.style.width=this._getScaleWidth(g/h)+"px";this._mScale.innerHTML=g<1000?g+" m":(g/1000)+" km"},_updateImperial:function(k){var j=k*3.2808399,l=this._iScale,i,h,g;if(j>5280){i=j/5280;h=this._getRoundNum(i);l.style.width=this._getScaleWidth(h/i)+"px";l.innerHTML=h+" mi"}else{g=this._getRoundNum(j);l.style.width=this._getScaleWidth(g/j)+"px";l.innerHTML=g+" ft"}},_getScaleWidth:function(g){return Math.round(this.options.maxWidth*g)-10},_getRoundNum:function(h){var g=Math.pow(10,(Math.floor(h)+"").length-1),i=h/g;i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1;return g*i}});a.control.scale=function(g){return new a.Control.Scale(g)};a.Control.Layers=a.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true},initialize:function(k,j,g){a.setOptions(this,g);this._layers={};this._lastZIndex=0;this._handlingClick=false;for(var h in k){if(k.hasOwnProperty(h)){this._addLayer(k[h],h)}}for(h in j){if(j.hasOwnProperty(h)){this._addLayer(j[h],h,true)}}},onAdd:function(g){this._initLayout();this._update();g.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);return this._container},onRemove:function(g){g.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(h,g){this._addLayer(h,g);this._update();return this},addOverlay:function(h,g){this._addLayer(h,g,true);this._update();return this},removeLayer:function(g){var h=a.stamp(g);delete this._layers[h];this._update();return this},_initLayout:function(){var h="leaflet-control-layers",g=this._container=a.DomUtil.create("div",h);if(!a.Browser.touch){a.DomEvent.disableClickPropagation(g);a.DomEvent.on(g,"mousewheel",a.DomEvent.stopPropagation)}else{a.DomEvent.on(g,"click",a.DomEvent.stopPropagation)}var j=this._form=a.DomUtil.create("form",h+"-list");if(this.options.collapsed){a.DomEvent.on(g,"mouseover",this._expand,this).on(g,"mouseout",this._collapse,this);var i=this._layersLink=a.DomUtil.create("a",h+"-toggle",g);i.href="#";i.title="Layers";if(a.Browser.touch){a.DomEvent.on(i,"click",a.DomEvent.stopPropagation).on(i,"click",a.DomEvent.preventDefault).on(i,"click",this._expand,this)}else{a.DomEvent.on(i,"focus",this._expand,this)}this._map.on("movestart",this._collapse,this)}else{this._expand()}this._baseLayersList=a.DomUtil.create("div",h+"-base",j);this._separator=a.DomUtil.create("div",h+"-separator",j);this._overlaysList=a.DomUtil.create("div",h+"-overlays",j);g.appendChild(j)},_addLayer:function(i,h,g){var j=a.stamp(i);this._layers[j]={layer:i,name:h,overlay:g};if(this.options.autoZIndex&&i.setZIndex){this._lastZIndex++;i.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return}this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var g=false,j=false;for(var h in this._layers){if(this._layers.hasOwnProperty(h)){var k=this._layers[h];this._addItem(k);j=j||k.overlay;g=g||!k.overlay}}this._separator.style.display=(j&&g?"":"none")},_onLayerChange:function(g){var h=a.stamp(g.layer);if(this._layers[h]&&!this._handlingClick){this._update()}},_createRadioElement:function(g,j){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"';if(j){i+=' checked="checked"'}i+="/>";var h=b.createElement("div");h.innerHTML=i;return h.firstChild},_addItem:function(l){var j=b.createElement("label"),h,k=this._map.hasLayer(l.layer);if(l.overlay){h=b.createElement("input");h.type="checkbox";h.className="leaflet-control-layers-selector";h.defaultChecked=k}else{h=this._createRadioElement("leaflet-base-layers",k)}h.layerId=a.stamp(l.layer);a.DomEvent.on(h,"click",this._onInputClick,this);var i=b.createElement("span");i.innerHTML=" "+l.name;j.appendChild(h);j.appendChild(i);var g=l.overlay?this._overlaysList:this._baseLayersList;g.appendChild(j);return j},_onInputClick:function(){var k,j,m,h=this._form.getElementsByTagName("input"),l=h.length,g;this._handlingClick=true;for(k=0;k<l;k++){j=h[k];m=this._layers[j.layerId];if(j.checked&&!this._map.hasLayer(m.layer)){this._map.addLayer(m.layer);if(!m.overlay){g=m.layer}}else{if(!j.checked&&this._map.hasLayer(m.layer)){this._map.removeLayer(m.layer)}}}if(g){this._map.setZoom(this._map.getZoom());this._map.fire("baselayerchange",{layer:g})}this._handlingClick=false},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}});a.control.layers=function(i,h,g){return new a.Control.Layers(i,h,g)};a.PosAnimation=a.Class.extend({includes:a.Mixin.Events,run:function(h,g,i,j){this.stop();this._el=h;this._inProgress=true;this.fire("start");h.style[a.DomUtil.TRANSITION]="all "+(i||0.25)+"s cubic-bezier(0,0,"+(j||0.5)+",1)";a.DomEvent.on(h,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this);a.DomUtil.setPosition(h,g);a.Util.falseFn(h.offsetWidth);this._stepTimer=setInterval(a.bind(this.fire,this,"step"),50)},stop:function(){if(!this._inProgress){return}a.DomUtil.setPosition(this._el,this._getPos());this._onTransitionEnd();a.Util.falseFn(this._el.offsetWidth)},_transformRe:/(-?[\d\.]+), (-?[\d\.]+)\)/,_getPos:function(){var k,j,i,h=this._el,g=e.getComputedStyle(h);if(a.Browser.any3d){i=g[a.DomUtil.TRANSFORM].match(this._transformRe);k=parseFloat(i[1]);j=parseFloat(i[2])}else{k=parseFloat(g.left);j=parseFloat(g.top)}return new a.Point(k,j,true)},_onTransitionEnd:function(){a.DomEvent.off(this._el,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this);if(!this._inProgress){return}this._inProgress=false;this._el.style[a.DomUtil.TRANSITION]="";clearInterval(this._stepTimer);this.fire("step").fire("end")}});a.Map.include({setView:function(h,k,j){k=this._limitZoom(k);var g=(this._zoom!==k);if(this._loaded&&!j&&this._layers){if(this._panAnim){this._panAnim.stop()}var i=(g?this._zoomToIfClose&&this._zoomToIfClose(h,k):this._panByIfClose(h));if(i){clearTimeout(this._sizeTimer);return this}}this._resetView(h,k);return this},panBy:function(i,h,j){i=a.point(i);if(!(i.x||i.y)){return this}if(!this._panAnim){this._panAnim=new a.PosAnimation();this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}this.fire("movestart");a.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var g=a.DomUtil.getPosition(this._mapPane).subtract(i)._round();this._panAnim.run(this._mapPane,g,h||0.25,j);return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_panByIfClose:function(g){var h=this._getCenterOffset(g)._floor();if(this._offsetIsWithinView(h)){this.panBy(h);return true}return false},_offsetIsWithinView:function(j,i){var g=i||1,h=this.getSize();return(Math.abs(j.x)<=h.x*g)&&(Math.abs(j.y)<=h.y*g)}});a.PosAnimation=a.DomUtil.TRANSITION?a.PosAnimation:a.PosAnimation.extend({run:function(h,g,i,j){this.stop();this._el=h;this._inProgress=true;this._duration=i||0.25;this._easeOutPower=1/Math.max(j||0.5,0.2);this._startPos=a.DomUtil.getPosition(h);this._offset=g.subtract(this._startPos);this._startTime=+new Date();this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step();this._complete()},_animate:function(){this._animId=a.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var g=(+new Date())-this._startTime,h=this._duration*1000;if(g<h){this._runFrame(this._easeOut(g/h))}else{this._runFrame(1);this._complete()}},_runFrame:function(g){var h=this._startPos.add(this._offset.multiplyBy(g));a.DomUtil.setPosition(this._el,h);this.fire("step")},_complete:function(){a.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}});a.Map.mergeOptions({zoomAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23&&!a.Browser.mobileOpera});if(a.DomUtil.TRANSITION){a.Map.addInitHook(function(){a.DomEvent.on(this._mapPane,a.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)})}a.Map.include(!a.DomUtil.TRANSITION?{}:{_zoomToIfClose:function(g,i){if(this._animatingZoom){return true}if(!this.options.zoomAnimation){return false}var k=this.getZoomScale(i),j=this._getCenterOffset(g)._divideBy(1-1/k);if(!this._offsetIsWithinView(j,1)){return false}a.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this.fire("movestart").fire("zoomstart");this.fire("zoomanim",{center:g,zoom:i});var h=this._getCenterLayerPoint().add(j);this._prepareTileBg();this._runAnimation(g,i,k,h);return true},_catchTransitionEnd:function(){if(this._animatingZoom){this._onZoomTransitionEnd()}},_runAnimation:function(g,o,i,n,j){this._animateToCenter=g;this._animateToZoom=o;this._animatingZoom=true;if(a.Draggable){a.Draggable._disabled=true}var h=a.DomUtil.TRANSFORM,m=this._tileBg;clearTimeout(this._clearTileBgTimer);a.Util.falseFn(m.offsetWidth);var l=a.DomUtil.getScaleString(i,n),k=m.style[h];m.style[h]=j?k+" "+l:l+" "+k},_prepareTileBg:function(){var g=this._tilePane,h=this._tileBg;if(h&&this._getLoadedTilesPercentage(h)>0.5&&this._getLoadedTilesPercentage(g)<0.5){g.style.visibility="hidden";g.empty=true;this._stopLoadingImages(g);return}if(!h){h=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane);h.style.zIndex=1}h.style[a.DomUtil.TRANSFORM]="";h.style.visibility="hidden";h.empty=true;g.empty=false;this._tilePane=this._panes.tilePane=h;var i=this._tileBg=g;a.DomUtil.addClass(i,"leaflet-zoom-animated");this._stopLoadingImages(i)},_getLoadedTilesPercentage:function(h){var j=h.getElementsByTagName("img"),k,g,l=0;for(k=0,g=j.length;k<g;k++){if(j[k].complete){l++}}return l/g},_stopLoadingImages:function(h){var j=Array.prototype.slice.call(h.getElementsByTagName("img")),k,g,l;for(k=0,g=j.length;k<g;k++){l=j[k];if(!l.complete){l.onload=a.Util.falseFn;l.onerror=a.Util.falseFn;l.src=a.Util.emptyImageUrl;l.parentNode.removeChild(l)}}},_onZoomTransitionEnd:function(){this._restoreTileFront();a.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");a.Util.falseFn(this._tileBg.offsetWidth);this._animatingZoom=false;this._resetView(this._animateToCenter,this._animateToZoom,true,true);if(a.Draggable){a.Draggable._disabled=false}},_restoreTileFront:function(){this._tilePane.innerHTML="";this._tilePane.style.visibility="";this._tilePane.style.zIndex=2;this._tileBg.style.zIndex=1},_clearTileBg:function(){if(!this._animatingZoom&&!this.touchZoom._zooming){this._tileBg.innerHTML=""}}});a.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:false},locate:function(g){g=this._locationOptions=a.extend(this._defaultLocateOptions,g);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var i=a.bind(this._handleGeolocationResponse,this),h=a.bind(this._handleGeolocationError,this);if(g.watch){this._locationWatchId=navigator.geolocation.watchPosition(i,h,g)}else{navigator.geolocation.getCurrentPosition(i,h,g)}return this},stopLocate:function(){if(navigator.geolocation){navigator.geolocation.clearWatch(this._locationWatchId)}return this},_handleGeolocationError:function(g){var i=g.code,h=g.message||(i===1?"permission denied":(i===2?"position unavailable":"timeout"));if(this._locationOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:i,message:"Geolocation error: "+h+"."})},_handleGeolocationResponse:function(l){var m=180*l.coords.accuracy/40000000,i=m*2,k=l.coords.latitude,n=l.coords.longitude,h=new a.LatLng(k,n),o=new a.LatLng(k-m,n-i),j=new a.LatLng(k+m,n+i),g=new a.LatLngBounds(o,j),q=this._locationOptions;if(q.setView){var p=Math.min(this.getBoundsZoom(g),q.maxZoom);this.setView(h,p)}this.fire("locationfound",{latlng:h,bounds:g,accuracy:l.coords.accuracy})}})}(this,document));