/*01f657a6d581400f119a2aec9f856ea83e151f44*/(function(d,e){var a,c;if(typeof exports!==e+""){a=exports}else{c=d.L;a={};a.noConflict=function(){d.L=c;return this};d.L=a}a.version="0.4.5";a.Util={extend:function(k){var h=Array.prototype.slice.call(arguments,1);for(var g=0,f=h.length,m;g<f;g++){m=h[g]||{};for(var l in m){if(m.hasOwnProperty(l)){k[l]=m[l]}}}return k},bind:function(g,h){var f=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return g.apply(h,f||arguments)}},stamp:(function(){var g=0,f="_leaflet_id";return function(h){h[f]=h[f]||++g;return h[f]}}()),limitExecByInterval:function(i,k,h){var g,j;return function f(){var l=arguments;if(g){j=true;return}g=true;setTimeout(function(){g=false;if(j){f.apply(h,l);j=false}},k);i.apply(h,l)}},falseFn:function(){return false},formatNum:function(f,h){var g=Math.pow(10,h||5);return Math.round(f*g)/g},splitWords:function(f){return f.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(g,f){g.options=a.Util.extend({},g.options,f);return g.options},getParamString:function(g){var h=[];for(var f in g){if(g.hasOwnProperty(f)){h.push(f+"="+g[f])}}return"?"+h.join("&")},template:function(g,f){return g.replace(/\{ *([\w_]+) *\}/g,function(j,h){var i=f[h];if(!f.hasOwnProperty(h)){throw new Error("No value provided for variable "+j)}return i})},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function i(j){var k,l,m=["webkit","moz","o","ms"];for(k=0;k<m.length&&!l;k++){l=d[m[k]+j]}return l}function g(j){return d.setTimeout(j,1000/60)}var f=d.requestAnimationFrame||i("RequestAnimationFrame")||g;var h=d.cancelAnimationFrame||i("CancelAnimationFrame")||i("CancelRequestAnimationFrame")||function(j){d.clearTimeout(j)};a.Util.requestAnimFrame=function(m,l,j,k){m=a.Util.bind(m,l);if(j&&f===g){m()}else{return f.call(d,m,k)}};a.Util.cancelAnimFrame=function(j){if(j){h.call(d,j)}}}());a.Class=function(){};a.Class.extend=function(g){var k=function(){if(this.initialize){this.initialize.apply(this,arguments)}};var j=function(){};j.prototype=this.prototype;var h=new j();h.constructor=k;k.prototype=h;for(var f in this){if(this.hasOwnProperty(f)&&f!=="prototype"){k[f]=this[f]}}if(g.statics){a.Util.extend(k,g.statics);delete g.statics}if(g.includes){a.Util.extend.apply(null,[h].concat(g.includes));delete g.includes}if(g.options&&h.options){g.options=a.Util.extend({},h.options,g.options)}a.Util.extend(h,g);return k};a.Class.include=function(f){a.Util.extend(this.prototype,f)};a.Class.mergeOptions=function(f){a.Util.extend(this.prototype.options,f)};var b="_leaflet_events";a.Mixin={};a.Mixin.Events={addEventListener:function(k,m,j){var h=this[b]=this[b]||{},l,g,f;if(typeof k==="object"){for(l in k){if(k.hasOwnProperty(l)){this.addEventListener(l,k[l],m)}}return this}k=a.Util.splitWords(k);for(g=0,f=k.length;g<f;g++){h[k[g]]=h[k[g]]||[];h[k[g]].push({action:m,context:j||this})}return this},hasEventListeners:function(f){return(b in this)&&(f in this[b])&&(this[b][f].length>0)},removeEventListener:function(k,o,f){var p=this[b],m,h,l,n,g;if(typeof k==="object"){for(m in k){if(k.hasOwnProperty(m)){this.removeEventListener(m,k[m],o)}}return this}k=a.Util.splitWords(k);for(h=0,l=k.length;h<l;h++){if(this.hasEventListeners(k[h])){n=p[k[h]];for(g=n.length-1;g>=0;g--){if((!o||n[g].action===o)&&(!f||(n[g].context===f))){n.splice(g,1)}}}}return this},fireEvent:function(j,l){if(!this.hasEventListeners(j)){return this}var k=a.Util.extend({type:j,target:this},l);var h=this[b][j].slice();for(var g=0,f=h.length;g<f;g++){h[g].action.call(h[g].context||this,k)}return this}};a.Mixin.Events.on=a.Mixin.Events.addEventListener;a.Mixin.Events.off=a.Mixin.Events.removeEventListener;a.Mixin.Events.fire=a.Mixin.Events.fireEvent;(function(){var i=navigator.userAgent.toLowerCase(),h=!!d.ActiveXObject,o=h&&!d.XMLHttpRequest,u=i.indexOf("webkit")!==-1,j=i.indexOf("gecko")!==-1,q=i.indexOf("chrome")!==-1,l=d.opera,k=i.indexOf("android")!==-1,s=i.search("android [23]")!==-1,g=typeof orientation!==e+""?true:false,t=document.documentElement,r=h&&("transition" in t.style),v=u&&("WebKitCSSMatrix" in d)&&("m11" in new d.WebKitCSSMatrix()),n=j&&("MozPerspective" in t.style),f=l&&("OTransition" in t.style);var p=!d.L_NO_TOUCH&&(function(){var x="ontouchstart";if(x in t){return true}var y=document.createElement("div"),w=false;if(!y.setAttribute){return false}y.setAttribute(x,"return;");if(typeof y[x]==="function"){w=true}y.removeAttribute(x);y=null;return w}());var m=(("devicePixelRatio" in d&&d.devicePixelRatio>1)||("matchMedia" in d&&d.matchMedia("(min-resolution:144dpi)").matches));a.Browser={ua:i,ie:h,ie6:o,webkit:u,gecko:j,opera:l,android:k,android23:s,chrome:q,ie3d:r,webkit3d:v,gecko3d:n,opera3d:f,any3d:!d.L_DISABLE_3D&&(r||v||n||f),mobile:g,mobileWebkit:g&&u,mobileWebkit3d:g&&v,mobileOpera:g&&l,touch:p,retina:m}}());a.Point=function(f,h,g){this.x=(g?Math.round(f):f);this.y=(g?Math.round(h):h)};a.Point.prototype={add:function(f){return this.clone()._add(a.point(f))},_add:function(f){this.x+=f.x;this.y+=f.y;return this},subtract:function(f){return this.clone()._subtract(a.point(f))},_subtract:function(f){this.x-=f.x;this.y-=f.y;return this},divideBy:function(g,f){return new a.Point(this.x/g,this.y/g,f)},multiplyBy:function(g,f){return new a.Point(this.x*g,this.y*g,f)},distanceTo:function(g){g=a.point(g);var f=g.x-this.x,h=g.y-this.y;return Math.sqrt(f*f+h*h)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},clone:function(){return new a.Point(this.x,this.y)},toString:function(){return"Point("+a.Util.formatNum(this.x)+", "+a.Util.formatNum(this.y)+")"}};a.point=function(f,h,g){if(f instanceof a.Point){return f}if(f instanceof Array){return new a.Point(f[0],f[1])}if(isNaN(f)){return f}return new a.Point(f,h,g)};a.Bounds=a.Class.extend({initialize:function(h,g){if(!h){return}var k=g?[h,g]:h;for(var j=0,f=k.length;j<f;j++){this.extend(k[j])}},extend:function(f){f=a.point(f);if(!this.min&&!this.max){this.min=f.clone();this.max=f.clone()}else{this.min.x=Math.min(f.x,this.min.x);this.max.x=Math.max(f.x,this.max.x);this.min.y=Math.min(f.y,this.min.y);this.max.y=Math.max(f.y,this.max.y)}return this},getCenter:function(f){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)},getTopRight:function(){return new a.Point(this.max.x,this.min.y)},contains:function(h){var g,f;if(typeof h[0]==="number"||h instanceof a.Point){h=a.point(h)}else{h=a.bounds(h)}if(h instanceof a.Bounds){g=h.min;f=h.max}else{g=f=h}return(g.x>=this.min.x)&&(f.x<=this.max.x)&&(g.y>=this.min.y)&&(f.y<=this.max.y)},intersects:function(k){k=a.bounds(k);var i=this.min,f=this.max,j=k.min,g=k.max;var h=(g.x>=i.x)&&(j.x<=f.x),l=(g.y>=i.y)&&(j.y<=f.y);return h&&l}});a.bounds=function(g,f){if(!g||g instanceof a.Bounds){return g}return new a.Bounds(g,f)};a.Transformation=a.Class.extend({initialize:function(g,f,i,h){this._a=g;this._b=f;this._c=i;this._d=h},transform:function(f,g){return this._transform(f.clone(),g)},_transform:function(f,g){g=g||1;f.x=g*(this._a*f.x+this._b);f.y=g*(this._c*f.y+this._d);return f},untransform:function(f,g){g=g||1;return new a.Point((f.x/g-this._b)/this._a,(f.y/g-this._d)/this._c)}});a.DomUtil={get:function(f){return(typeof f==="string"?document.getElementById(f):f)},getStyle:function(h,g){var i=h.style[g];if(!i&&h.currentStyle){i=h.currentStyle[g]}if(!i||i==="auto"){var f=document.defaultView.getComputedStyle(h,null);i=f?f[g]:null}return(i==="auto"?null:i)},getViewportOffset:function(f){var j=0,i=0,h=f,g=document.body;do{j+=h.offsetTop||0;i+=h.offsetLeft||0;if(h.offsetParent===g&&a.DomUtil.getStyle(h,"position")==="absolute"){break}if(a.DomUtil.getStyle(h,"position")==="fixed"){j+=g.scrollTop||0;i+=g.scrollLeft||0;break}h=h.offsetParent}while(h);h=f;do{if(h===g){break}j-=h.scrollTop||0;i-=h.scrollLeft||0;h=h.parentNode}while(h);return new a.Point(i,j)},create:function(g,i,f){var h=document.createElement(g);h.className=i;if(f){f.appendChild(h)}return h},disableTextSelection:function(){if(document.selection&&document.selection.empty){document.selection.empty()}if(!this._onselectstart){this._onselectstart=document.onselectstart;document.onselectstart=a.Util.falseFn}},enableTextSelection:function(){document.onselectstart=this._onselectstart;this._onselectstart=null},hasClass:function(g,f){return(g.className.length>0)&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(g.className)},addClass:function(g,f){if(!a.DomUtil.hasClass(g,f)){g.className+=(g.className?" ":"")+f}},removeClass:function(h,f){function g(i,j){if(j===f){return""}return i}h.className=h.className.replace(/(\S+)\s*/g,g).replace(/(^\s+|\s+$)/,"")},setOpacity:function(h,i){if("opacity" in h.style){h.style.opacity=i}else{if(a.Browser.ie){var g=false,f="DXImageTransform.Microsoft.Alpha";try{g=h.filters.item(f)}catch(j){}i=Math.round(i*100);if(g){g.Enabled=(i!==100);g.Opacity=i}else{h.style.filter+=" progid:"+f+"(opacity="+i+")"}}}},testProp:function(h){var g=document.documentElement.style;for(var f=0;f<h.length;f++){if(h[f] in g){return h[f]}}return false},getTranslateString:function(f){var h=a.Browser.webkit3d,g="translate"+(h?"3d":"")+"(",i=(h?",0":"")+")";return g+f.x+"px,"+f.y+"px"+i},getScaleString:function(h,f){var i=a.DomUtil.getTranslateString(f.add(f.multiplyBy(-1*h))),g=" scale("+h+") ";return i+g},setPosition:function(h,f,g){h._leaflet_pos=f;if(!g&&a.Browser.any3d){h.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(f);if(a.Browser.mobileWebkit3d){h.style.WebkitBackfaceVisibility="hidden"}}else{h.style.left=f.x+"px";h.style.top=f.y+"px"}},getPosition:function(f){return f._leaflet_pos}};a.Util.extend(a.DomUtil,{TRANSITION:a.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:a.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])});a.LatLng=function(h,f,j){var i=parseFloat(h),g=parseFloat(f);if(isNaN(i)||isNaN(g)){throw new Error("Invalid LatLng object: ("+h+", "+f+")")}if(j!==true){i=Math.max(Math.min(i,90),-90);g=(g+180)%360+((g<-180||g===180)?180:-180)}this.lat=i;this.lng=g};a.Util.extend(a.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9});a.LatLng.prototype={equals:function(g){if(!g){return false}g=a.latLng(g);var f=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return f<=a.LatLng.MAX_MARGIN},toString:function(){return"LatLng("+a.Util.formatNum(this.lat)+", "+a.Util.formatNum(this.lng)+")"},distanceTo:function(m){m=a.latLng(m);var l=6378137,i=a.LatLng.DEG_TO_RAD,n=(m.lat-this.lat)*i,f=(m.lng-this.lng)*i,k=this.lat*i,h=m.lat*i,j=Math.sin(n/2),g=Math.sin(f/2);var o=j*j+g*g*Math.cos(k)*Math.cos(h);return l*2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}};a.latLng=function(g,f,h){if(g instanceof a.LatLng){return g}if(g instanceof Array){return new a.LatLng(g[0],g[1])}if(isNaN(g)){return g}return new a.LatLng(g,f,h)};a.LatLngBounds=a.Class.extend({initialize:function(k,h){if(!k){return}var g=h?[k,h]:k;for(var j=0,f=g.length;j<f;j++){this.extend(g[j])}},extend:function(f){if(typeof f[0]==="number"||f instanceof a.LatLng){f=a.latLng(f)}else{f=a.latLngBounds(f)}if(f instanceof a.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new a.LatLng(f.lat,f.lng,true);this._northEast=new a.LatLng(f.lat,f.lng,true)}else{this._southWest.lat=Math.min(f.lat,this._southWest.lat);this._southWest.lng=Math.min(f.lng,this._southWest.lng);this._northEast.lat=Math.max(f.lat,this._northEast.lat);this._northEast.lng=Math.max(f.lng,this._northEast.lng)}}else{if(f instanceof a.LatLngBounds){this.extend(f._southWest);this.extend(f._northEast)}}return this},pad:function(i){var g=this._southWest,j=this._northEast,f=Math.abs(g.lat-j.lat)*i,h=Math.abs(g.lng-j.lng)*i;return new a.LatLngBounds(new a.LatLng(g.lat-f,g.lng-h),new a.LatLng(j.lat+f,j.lng+h))},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new a.LatLng(this._northEast.lat,this._southWest.lng,true)},getSouthEast:function(){return new a.LatLng(this._southWest.lat,this._northEast.lng,true)},contains:function(j){if(typeof j[0]==="number"||j instanceof a.LatLng){j=a.latLng(j)}else{j=a.latLngBounds(j)}var f=this._southWest,i=this._northEast,g,h;if(j instanceof a.LatLngBounds){g=j.getSouthWest();h=j.getNorthEast()}else{g=h=j}return(g.lat>=f.lat)&&(h.lat<=i.lat)&&(g.lng>=f.lng)&&(h.lng<=i.lng)},intersects:function(i){i=a.latLngBounds(i);var f=this._southWest,l=this._northEast,g=i.getSouthWest(),k=i.getNorthEast();var j=(k.lat>=f.lat)&&(g.lat<=l.lat),h=(k.lng>=f.lng)&&(g.lng<=l.lng);return j&&h},toBBoxString:function(){var f=this._southWest,g=this._northEast;return[f.lng,f.lat,g.lng,g.lat].join(",")},equals:function(f){if(!f){return false}f=a.latLngBounds(f);return this._southWest.equals(f.getSouthWest())&&this._northEast.equals(f.getNorthEast())}});a.latLngBounds=function(g,f){if(!g||g instanceof a.LatLngBounds){return g}return new a.LatLngBounds(g,f)};a.Projection={};a.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(k){var i=a.LatLng.DEG_TO_RAD,g=this.MAX_LATITUDE,h=Math.max(Math.min(g,k.lat),-g),f=k.lng*i,j=h*i;j=Math.log(Math.tan((Math.PI/4)+(j/2)));return new a.Point(f,j)},unproject:function(f){var i=a.LatLng.RAD_TO_DEG,g=f.x*i,h=(2*Math.atan(Math.exp(f.y))-(Math.PI/2))*i;return new a.LatLng(h,g,true)}};a.Projection.LonLat={project:function(f){return new a.Point(f.lng,f.lat)},unproject:function(f){return new a.LatLng(f.y,f.x,true)}};a.CRS={latLngToPoint:function(i,g){var f=this.projection.project(i),h=this.scale(g);return this.transformation._transform(f,h)},pointToLatLng:function(f,h){var i=this.scale(h),g=this.transformation.untransform(f,i);return this.projection.unproject(g)},project:function(f){return this.projection.project(f)},scale:function(f){return 256*Math.pow(2,f)}};a.CRS.EPSG3857=a.Util.extend({},a.CRS,{code:"EPSG:3857",projection:a.Projection.SphericalMercator,transformation:new a.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(h){var g=this.projection.project(h),f=6378137;return g.multiplyBy(f)}});a.CRS.EPSG900913=a.Util.extend({},a.CRS.EPSG3857,{code:"EPSG:900913"});a.CRS.EPSG4326=a.Util.extend({},a.CRS,{code:"EPSG:4326",projection:a.Projection.LonLat,transformation:new a.Transformation(1/360,0.5,-1/360,0.5)});a.Map=a.Class.extend({includes:a.Mixin.Events,options:{crs:a.CRS.EPSG3857,fadeAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23,trackResize:true,markerZoomAnimation:a.DomUtil.TRANSITION&&a.Browser.any3d},initialize:function(g,f){f=a.Util.setOptions(this,f);this._initContainer(g);this._initLayout();this._initHooks();this._initEvents();if(f.maxBounds){this.setMaxBounds(f.maxBounds)}if(f.center&&f.zoom!==e){this.setView(a.latLng(f.center),f.zoom,true)}this._initLayers(f.layers)},setView:function(f,g){this._resetView(a.latLng(f),this._limitZoom(g));return this},setZoom:function(f){return this.setView(this.getCenter(),f)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(g){var f=this.getBoundsZoom(g);return this.setView(a.latLngBounds(g).getCenter(),f)},fitWorld:function(){var f=new a.LatLng(-60,-170),g=new a.LatLng(85,179);return this.fitBounds(new a.LatLngBounds(f,g))},panTo:function(f){return this.setView(f,this._zoom)},panBy:function(f){this.fire("movestart");this._rawPanBy(a.point(f));this.fire("move");return this.fire("moveend")},setMaxBounds:function(f){f=a.latLngBounds(f);this.options.maxBounds=f;if(!f){this._boundsMinZoom=null;return this}var g=this.getBoundsZoom(f,true);this._boundsMinZoom=g;if(this._loaded){if(this._zoom<g){this.setView(f.getCenter(),g)}else{this.panInsideBounds(f)}}return this},panInsideBounds:function(j){j=a.latLngBounds(j);var k=this.getBounds(),h=this.project(k.getSouthWest()),m=this.project(k.getNorthEast()),f=this.project(j.getSouthWest()),l=this.project(j.getNorthEast()),i=0,g=0;if(m.y<l.y){g=l.y-m.y}if(m.x>l.x){i=l.x-m.x}if(h.y>f.y){g=f.y-h.y}if(h.x<f.x){i=f.x-h.x}return this.panBy(new a.Point(i,g,true))},addLayer:function(g){var h=a.Util.stamp(g);if(this._layers[h]){return this}this._layers[h]=g;if(g.options&&!isNaN(g.options.maxZoom)){this._layersMaxZoom=Math.max(this._layersMaxZoom||0,g.options.maxZoom)}if(g.options&&!isNaN(g.options.minZoom)){this._layersMinZoom=Math.min(this._layersMinZoom||Infinity,g.options.minZoom)}if(this.options.zoomAnimation&&a.TileLayer&&(g instanceof a.TileLayer)){this._tileLayersNum++;this._tileLayersToLoad++;g.on("load",this._onTileLayerLoad,this)}var f=function(){g.onAdd(this);this.fire("layeradd",{layer:g})};if(this._loaded){f.call(this)}else{this.on("load",f,this)}return this},removeLayer:function(f){var g=a.Util.stamp(f);if(!this._layers[g]){return}f.onRemove(this);delete this._layers[g];if(this.options.zoomAnimation&&a.TileLayer&&(f instanceof a.TileLayer)){this._tileLayersNum--;this._tileLayersToLoad--;f.off("load",this._onTileLayerLoad,this)}return this.fire("layerremove",{layer:f})},hasLayer:function(f){var g=a.Util.stamp(f);return this._layers.hasOwnProperty(g)},invalidateSize:function(f){var g=this.getSize();this._sizeChanged=true;if(this.options.maxBounds){this.setMaxBounds(this.options.maxBounds)}if(!this._loaded){return this}var h=g.subtract(this.getSize()).divideBy(2,true);if(f===true){this.panBy(h)}else{this._rawPanBy(h);this.fire("move");clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(a.Util.bind(this.fire,this,"moveend"),200)}return this},addHandler:function(f,g){if(!g){return}this[f]=new g(this);if(this.options[f]){this[f].enable()}return this},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),f=this.unproject(g.getBottomLeft()),h=this.unproject(g.getTopRight());return new a.LatLngBounds(f,h)},getMinZoom:function(){var h=this.options.minZoom||0,g=this._layersMinZoom||0,f=this._boundsMinZoom||0;return Math.max(h,g,f)},getMaxZoom:function(){var g=this.options.maxZoom===e?Infinity:this.options.maxZoom,f=this._layersMaxZoom===e?Infinity:this._layersMaxZoom;return Math.min(g,f)},getBoundsZoom:function(f,h){f=a.latLngBounds(f);var p=this.getSize(),n=this.options.minZoom||0,l=this.getMaxZoom(),j=f.getNorthEast(),m=f.getSouthWest(),o,g,k,i=true;if(h){n--}do{n++;g=this.project(j,n);k=this.project(m,n);o=new a.Point(Math.abs(g.x-k.x),Math.abs(k.y-g.y));if(!h){i=o.x<=p.x&&o.y<=p.y}else{i=o.x<p.x||o.y<p.y}}while(i&&n<=l);if(i&&h){return null}return h?n:n-1},getSize:function(){if(!this._size||this._sizeChanged){this._size=new a.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false}return this._size},getPixelBounds:function(){var f=this._getTopLeftPoint();return new a.Bounds(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g){var f=this.options.crs;return f.scale(g)/f.scale(this._zoom)},getScaleZoom:function(f){return this._zoom+(Math.log(f)/Math.LN2)},project:function(g,f){f=f===e?this._zoom:f;return this.options.crs.latLngToPoint(a.latLng(g),f)},unproject:function(f,g){g=g===e?this._zoom:g;return this.options.crs.pointToLatLng(a.point(f),g)},layerPointToLatLng:function(f){var g=a.point(f).add(this._initialTopLeftPoint);return this.unproject(g)},latLngToLayerPoint:function(g){var f=this.project(a.latLng(g))._round();return f._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(f){return a.point(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return a.point(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var g=this.containerPointToLayerPoint(a.point(f));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(f)))},mouseEventToContainerPoint:function(f){return a.DomEvent.getMousePosition(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(g){var f=this._container=a.DomUtil.get(g);if(f._leaflet){throw new Error("Map container is already initialized.")}f._leaflet=true},_initLayout:function(){var g=this._container;g.innerHTML="";a.DomUtil.addClass(g,"leaflet-container");if(a.Browser.touch){a.DomUtil.addClass(g,"leaflet-touch")}if(this.options.fadeAnimation){a.DomUtil.addClass(g,"leaflet-fade-anim")}var f=a.DomUtil.getStyle(g,"position");if(f!=="absolute"&&f!=="relative"&&f!=="fixed"){g.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var g=this._panes={};this._mapPane=g.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=g.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);this._objectsPane=g.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);g.shadowPane=this._createPane("leaflet-shadow-pane");g.overlayPane=this._createPane("leaflet-overlay-pane");g.markerPane=this._createPane("leaflet-marker-pane");g.popupPane=this._createPane("leaflet-popup-pane");var f=" leaflet-zoom-hide";if(!this.options.markerZoomAnimation){a.DomUtil.addClass(g.markerPane,f);a.DomUtil.addClass(g.shadowPane,f);a.DomUtil.addClass(g.popupPane,f)}},_createPane:function(g,f){return a.DomUtil.create("div",g,f||this._objectsPane)},_initializers:[],_initHooks:function(){var g,f;for(g=0,f=this._initializers.length;g<f;g++){this._initializers[g].call(this)}},_initLayers:function(h){h=h?(h instanceof Array?h:[h]):[];this._layers={};this._tileLayersNum=0;var g,f;for(g=0,f=h.length;g<f;g++){this.addLayer(h[g])}},_resetView:function(h,j,g,i){var f=(this._zoom!==j);if(!i){this.fire("movestart");if(f){this.fire("zoomstart")}}this._zoom=j;this._initialTopLeftPoint=this._getNewTopLeftPoint(h);if(!g){a.DomUtil.setPosition(this._mapPane,new a.Point(0,0))}else{this._initialTopLeftPoint._add(this._getMapPanePos())}this._tileLayersToLoad=this._tileLayersNum;this.fire("viewreset",{hard:!g});this.fire("move");if(f||i){this.fire("zoomend")}this.fire("moveend",{hard:!g});if(!this._loaded){this._loaded=true;this.fire("load")}},_rawPanBy:function(f){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(f))},_initEvents:function(){if(!a.DomEvent){return}a.DomEvent.on(this._container,"click",this._onMouseClick,this);var h=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],g,f;for(g=0,f=h.length;g<f;g++){a.DomEvent.on(this._container,h[g],this._fireMouseEvent,this)}if(this.options.trackResize){a.DomEvent.on(d,"resize",this._onResize,this)}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=a.Util.requestAnimFrame(this.invalidateSize,this,false,this._container)},_onMouseClick:function(f){if(!this._loaded||(this.dragging&&this.dragging.moved())){return}this.fire("preclick");this._fireMouseEvent(f)},_fireMouseEvent:function(i){if(!this._loaded){return}var h=i.type;h=(h==="mouseenter"?"mouseover":(h==="mouseleave"?"mouseout":h));if(!this.hasEventListeners(h)){return}if(h==="contextmenu"){a.DomEvent.preventDefault(i)}var g=this.mouseEventToContainerPoint(i),f=this.containerPointToLayerPoint(g),j=this.layerPointToLatLng(f);this.fire(h,{latlng:j,layerPoint:f,containerPoint:g,originalEvent:i})},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg){clearTimeout(this._clearTileBgTimer);this._clearTileBgTimer=setTimeout(a.Util.bind(this._clearTileBg,this),500)}},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(f,h){var g=this.getSize().divideBy(2);return this.project(f,h)._subtract(g)._round()},_latLngToNewLayerPoint:function(i,g,f){var h=this._getNewTopLeftPoint(f,g).add(this._getMapPanePos());return this.project(i,g)._subtract(h)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize().divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitZoom:function(h){var g=this.getMinZoom(),f=this.getMaxZoom();return Math.max(g,Math.min(f,h))}});a.Map.addInitHook=function(g){var f=Array.prototype.slice.call(arguments,1);var h=typeof g==="function"?g:function(){this[g].apply(this,f)};this.prototype._initializers.push(h)};a.map=function(g,f){return new a.Map(g,f)};a.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(h){var m=a.LatLng.DEG_TO_RAD,p=this.MAX_LATITUDE,n=Math.max(Math.min(p,h.lat),-p),f=this.R_MAJOR,i=this.R_MINOR,q=h.lng*m*f,o=n*m,k=i/f,j=Math.sqrt(1-k*k),g=j*Math.sin(o);g=Math.pow((1-g)/(1+g),j*0.5);var l=Math.tan(0.5*((Math.PI*0.5)-o))/g;o=-i*Math.log(l);return new a.Point(q,o)},unproject:function(t){var p=a.LatLng.RAD_TO_DEG,f=this.R_MAJOR,h=this.R_MINOR,s=t.x*p/f,m=h/f,j=Math.sqrt(1-(m*m)),q=Math.exp(-t.y/h),o=(Math.PI/2)-2*Math.atan(q),k=15,u=1e-7,l=k,n=0.1,g;while((Math.abs(n)>u)&&(--l>0)){g=j*Math.sin(o);n=(Math.PI/2)-2*Math.atan(q*Math.pow((1-g)/(1+g),0.5*j))-o;o+=n}return new a.LatLng(o*p,s,true)}};a.CRS.EPSG3395=a.Util.extend({},a.CRS,{code:"EPSG:3395",projection:a.Projection.Mercator,transformation:(function(){var f=a.Projection.Mercator,h=f.R_MAJOR,g=f.R_MINOR;return new a.Transformation(0.5/(Math.PI*h),0.5,-0.5/(Math.PI*g),0.5)}())});a.TileLayer=a.Class.extend({includes:a.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:a.Browser.mobile,updateWhenIdle:a.Browser.mobile},initialize:function(h,g){g=a.Util.setOptions(this,g);if(g.detectRetina&&a.Browser.retina&&g.maxZoom>0){g.tileSize=Math.floor(g.tileSize/2);g.zoomOffset++;if(g.minZoom>0){g.minZoom--}this.options.maxZoom--}this._url=h;var f=this.options.subdomains;if(typeof f==="string"){this.options.subdomains=f.split("")}},onAdd:function(f){this._map=f;this._initContainer();this._createTileProto();f.on({viewreset:this._resetCallback,moveend:this._update},this);if(!this.options.updateWhenIdle){this._limitedUpdate=a.Util.limitExecByInterval(this._update,150,this);f.on("move",this._limitedUpdate,this)}this._reset();this._update()},addTo:function(f){f.addLayer(this);return this},onRemove:function(f){f._panes.tilePane.removeChild(this._container);f.off({viewreset:this._resetCallback,moveend:this._update},this);if(!this.options.updateWhenIdle){f.off("move",this._limitedUpdate,this)}this._container=null;this._map=null},bringToFront:function(){var f=this._map._panes.tilePane;if(this._container){f.appendChild(this._container);this._setAutoZIndex(f,Math.max)}return this},bringToBack:function(){var f=this._map._panes.tilePane;if(this._container){f.insertBefore(this._container,f.firstChild);this._setAutoZIndex(f,Math.min)}return this},getAttribution:function(){return this.options.attribution},setOpacity:function(f){this.options.opacity=f;if(this._map){this._updateOpacity()}return this},setZIndex:function(f){this.options.zIndex=f;this._updateZIndex();return this},setUrl:function(f,g){this._url=f;if(!g){this.redraw()}return this},redraw:function(){if(this._map){this._map._panes.tilePane.empty=false;this._reset(true);this._update()}return this},_updateZIndex:function(){if(this._container&&this.options.zIndex!==e){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(m,j){var k=m.getElementsByClassName("leaflet-layer"),h=-j(Infinity,-Infinity),l;for(var g=0,f=k.length;g<f;g++){if(k[g]!==this._container){l=parseInt(k[g].style.zIndex,10);if(!isNaN(l)){h=j(h,l)}}}this._container.style.zIndex=isFinite(h)?h+j(1,-1):""},_updateOpacity:function(){a.DomUtil.setOpacity(this._container,this.options.opacity);var g,f=this._tiles;if(a.Browser.webkit){for(g in f){if(f.hasOwnProperty(g)){f[g].style.webkitTransform+=" translate(0,0)"}}}},_initContainer:function(){var f=this._map._panes.tilePane;if(!this._container||f.empty){this._container=a.DomUtil.create("div","leaflet-layer");this._updateZIndex();f.appendChild(this._container);if(this.options.opacity<1){this._updateOpacity()}}},_resetCallback:function(f){this._reset(f.hard)},_reset:function(g){var h,f=this._tiles;for(h in f){if(f.hasOwnProperty(h)){this.fire("tileunload",{tile:f[h]})}}this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles){this._unusedTiles=[]}if(g&&this._container){this._container.innerHTML=""}this._initContainer()},_update:function(k){if(this._map._panTransition&&this._map._panTransition._inProgress){return}var h=this._map.getPixelBounds(),g=this._map.getZoom(),i=this.options.tileSize;if(g>this.options.maxZoom||g<this.options.minZoom){return}var f=new a.Point(Math.floor(h.min.x/i),Math.floor(h.min.y/i)),l=new a.Point(Math.floor(h.max.x/i),Math.floor(h.max.y/i)),j=new a.Bounds(f,l);this._addTilesFromCenterOut(j);if(this.options.unloadInvisibleTiles||this.options.reuseTiles){this._removeOtherTiles(j)}},_addTilesFromCenterOut:function(n){var h=[],g=n.getCenter();var l,m,f;for(l=n.min.y;l<=n.max.y;l++){for(m=n.min.x;m<=n.max.x;m++){f=new a.Point(m,l);if(this._tileShouldBeLoaded(f)){h.push(f)}}}var o=h.length;if(o===0){return}h.sort(function(j,i){return j.distanceTo(g)-i.distanceTo(g)});var k=document.createDocumentFragment();if(!this._tilesToLoad){this.fire("loading")}this._tilesToLoad+=o;for(m=0;m<o;m++){this._addTile(h[m],k)}this._container.appendChild(k)},_tileShouldBeLoaded:function(g){if((g.x+":"+g.y) in this._tiles){return false}if(!this.options.continuousWorld){var f=this._getWrapTileNum();if(this.options.noWrap&&(g.x<0||g.x>=f)||g.y<0||g.y>=f){return false}}return true},_removeOtherTiles:function(i){var h,f,j,g;for(g in this._tiles){if(this._tiles.hasOwnProperty(g)){h=g.split(":");f=parseInt(h[0],10);j=parseInt(h[1],10);if(f<i.min.x||f>i.max.x||j<i.min.y||j>i.max.y){this._removeTile(g)}}}},_removeTile:function(f){var g=this._tiles[f];this.fire("tileunload",{tile:g,url:g.src});if(this.options.reuseTiles){a.DomUtil.removeClass(g,"leaflet-tile-loaded");this._unusedTiles.push(g)}else{if(g.parentNode===this._container){this._container.removeChild(g)}}if(!a.Browser.android){g.src=a.Util.emptyImageUrl}delete this._tiles[f]},_addTile:function(h,f){var g=this._getTilePos(h);var i=this._getTile();a.DomUtil.setPosition(i,g,a.Browser.chrome||a.Browser.android23);this._tiles[h.x+":"+h.y]=i;this._loadTile(i,h);if(i.parentNode!==this._container){f.appendChild(i)}},_getZoomForUrl:function(){var f=this.options,g=this._map.getZoom();if(f.zoomReverse){g=f.maxZoom-g}return g+f.zoomOffset},_getTilePos:function(g){var f=this._map.getPixelOrigin(),h=this.options.tileSize;return g.multiplyBy(h).subtract(f)},getTileUrl:function(f){this._adjustTilePoint(f);return a.Util.template(this._url,a.Util.extend({s:this._getSubdomain(f),z:this._getZoomForUrl(),x:f.x,y:f.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(g){var f=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap){g.x=((g.x%f)+f)%f}if(this.options.tms){g.y=f-g.y-1}},_getSubdomain:function(g){var f=(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[f]},_createTileProto:function(){var f=this._tileImg=a.DomUtil.create("img","leaflet-tile");f.galleryimg="no";var g=this.options.tileSize;f.style.width=g+"px";f.style.height=g+"px"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var f=this._unusedTiles.pop();this._resetTile(f);return f}return this._createTile()},_resetTile:function(f){},_createTile:function(){var f=this._tileImg.cloneNode(false);f.onselectstart=f.onmousemove=a.Util.falseFn;return f},_loadTile:function(g,f){g._layer=this;g.onload=this._tileOnLoad;g.onerror=this._tileOnError;g.src=this.getTileUrl(f)},_tileLoaded:function(){this._tilesToLoad--;if(!this._tilesToLoad){this.fire("load")}},_tileOnLoad:function(g){var f=this._layer;if(this.src!==a.Util.emptyImageUrl){a.DomUtil.addClass(this,"leaflet-tile-loaded");f.fire("tileload",{tile:this,url:this.src})}f._tileLoaded()},_tileOnError:function(h){var f=this._layer;f.fire("tileerror",{tile:this,url:this.src});var g=f.options.errorTileUrl;if(g){this.src=g}f._tileLoaded()}});a.tileLayer=function(g,f){return new a.TileLayer(g,f)};a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},initialize:function(h,g){this._url=h;var f=a.Util.extend({},this.defaultWmsParams);if(g.detectRetina&&a.Browser.retina){f.width=f.height=this.options.tileSize*2}else{f.width=f.height=this.options.tileSize}for(var j in g){if(!this.options.hasOwnProperty(j)){f[j]=g[j]}}this.wmsParams=f;a.Util.setOptions(this,g)},onAdd:function(f){var g=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[g]=f.options.crs.code;a.TileLayer.prototype.onAdd.call(this,f)},getTileUrl:function(h,p){var g=this._map,k=g.options.crs,o=this.options.tileSize,n=h.multiplyBy(o),l=n.add(new a.Point(o,o)),i=k.project(g.unproject(n,p)),j=k.project(g.unproject(l,p)),m=[i.x,j.y,j.x,i.y].join(","),f=a.Util.template(this._url,{s:this._getSubdomain(h)});return f+a.Util.getParamString(this.wmsParams)+"&bbox="+m},setParams:function(g,f){a.Util.extend(this.wmsParams,g);if(!f){this.redraw()}return this}});a.tileLayer.wms=function(g,f){return new a.TileLayer.WMS(g,f)};a.TileLayer.Canvas=a.TileLayer.extend({options:{async:false},initialize:function(f){a.Util.setOptions(this,f)},redraw:function(){var g,f=this._tiles;for(g in f){if(f.hasOwnProperty(g)){this._redrawTile(f[g])}}},_redrawTile:function(f){this.drawTile(f,f._tilePoint,f._zoom)},_createTileProto:function(){var f=this._canvasProto=a.DomUtil.create("canvas","leaflet-tile");var g=this.options.tileSize;f.width=g;f.height=g},_createTile:function(){var f=this._canvasProto.cloneNode(false);f.onselectstart=f.onmousemove=a.Util.falseFn;return f},_loadTile:function(h,f,g){h._layer=this;h._tilePoint=f;h._zoom=g;this.drawTile(h,f,g);if(!this.options.async){this.tileDrawn(h)}},drawTile:function(h,f,g){},tileDrawn:function(f){this._tileOnLoad.call(f)}});a.tileLayer.canvas=function(f){return new a.TileLayer.Canvas(f)};a.ImageOverlay=a.Class.extend({includes:a.Mixin.Events,options:{opacity:1},initialize:function(g,h,f){this._url=g;this._bounds=a.latLngBounds(h);a.Util.setOptions(this,f)},onAdd:function(f){this._map=f;if(!this._image){this._initImage()}f._panes.overlayPane.appendChild(this._image);f.on("viewreset",this._reset,this);if(f.options.zoomAnimation&&a.Browser.any3d){f.on("zoomanim",this._animateZoom,this)}this._reset()},onRemove:function(f){f.getPanes().overlayPane.removeChild(this._image);f.off("viewreset",this._reset,this);if(f.options.zoomAnimation){f.off("zoomanim",this._animateZoom,this)}},addTo:function(f){f.addLayer(this);return this},setOpacity:function(f){this.options.opacity=f;this._updateOpacity();return this},bringToFront:function(){if(this._image){this._map._panes.overlayPane.appendChild(this._image)}return this},bringToBack:function(){var f=this._map._panes.overlayPane;if(this._image){f.insertBefore(this._image,f.firstChild)}return this},_initImage:function(){this._image=a.DomUtil.create("img","leaflet-image-layer");if(this._map.options.zoomAnimation&&a.Browser.any3d){a.DomUtil.addClass(this._image,"leaflet-zoom-animated")}else{a.DomUtil.addClass(this._image,"leaflet-zoom-hide")}this._updateOpacity();a.Util.extend(this._image,{galleryimg:"no",onselectstart:a.Util.falseFn,onmousemove:a.Util.falseFn,onload:a.Util.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(j){var f=this._map,h=this._image,g=f.getZoomScale(j.zoom),i=this._bounds.getNorthWest(),k=this._bounds.getSouthEast(),n=f._latLngToNewLayerPoint(i,j.zoom,j.center),o=f._latLngToNewLayerPoint(k,j.zoom,j.center).subtract(n),m=f.latLngToLayerPoint(k).subtract(f.latLngToLayerPoint(i)),l=n.add(o.subtract(m).divideBy(2));h.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(l)+" scale("+g+") "},_reset:function(){var h=this._image,g=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),f=this._map.latLngToLayerPoint(this._bounds.getSouthEast()).subtract(g);a.DomUtil.setPosition(h,g);h.style.width=f.x+"px";h.style.height=f.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)}});a.imageOverlay=function(g,h,f){return new a.ImageOverlay(g,h,f)};a.Icon=a.Class.extend({options:{className:""},initialize:function(f){a.Util.setOptions(this,f)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(g){var h=this._getIconUrl(g);if(!h){if(g==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var f=this._createImg(h);this._setIconStyles(f,g);return f},_setIconStyles:function(f,i){var h=this.options,j=a.point(h[i+"Size"]),g;if(i==="shadow"){g=a.point(h.shadowAnchor||h.iconAnchor)}else{g=a.point(h.iconAnchor)}if(!g&&j){g=j.divideBy(2,true)}f.className="leaflet-marker-"+i+" "+h.className;if(g){f.style.marginLeft=(-g.x)+"px";f.style.marginTop=(-g.y)+"px"}if(j){f.style.width=j.x+"px";f.style.height=j.y+"px"}},_createImg:function(g){var f;if(!a.Browser.ie6){f=document.createElement("img");f.src=g}else{f=document.createElement("div");f.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+g+'")'}return f},_getIconUrl:function(f){return this.options[f+"Url"]}});a.icon=function(f){return new a.Icon(f)};a.Icon.Default=a.Icon.extend({options:{iconSize:new a.Point(25,41),iconAnchor:new a.Point(13,41),popupAnchor:new a.Point(1,-34),shadowSize:new a.Point(41,41)},_getIconUrl:function(f){var g=f+"Url";if(this.options[g]){return this.options[g]}var h=a.Icon.Default.imagePath;if(!h){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return h+"/marker-"+f+".png"}});a.Icon.Default.imagePath=(function(){var g=document.getElementsByTagName("script"),j=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;var h,f,l,k;for(h=0,f=g.length;h<f;h++){l=g[h].src;k=l.match(j);if(k){return l.split(j)[0]+"/images"}}}());a.Marker=a.Class.extend({includes:a.Mixin.Events,options:{icon:new a.Icon.Default(),title:"",clickable:true,draggable:false,zIndexOffset:0,opacity:1},initialize:function(g,f){a.Util.setOptions(this,f);this._latlng=a.latLng(g)},onAdd:function(f){this._map=f;f.on("viewreset",this.update,this);this._initIcon();this.update();if(f.options.zoomAnimation&&f.options.markerZoomAnimation){f.on("zoomanim",this._animateZoom,this)}},addTo:function(f){f.addLayer(this);return this},onRemove:function(f){this._removeIcon();if(this.closePopup){this.closePopup()}f.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(f){this._latlng=a.latLng(f);this.update();if(this._popup){this._popup.setLatLng(f)}},setZIndexOffset:function(f){this.options.zIndexOffset=f;this.update()},setIcon:function(f){if(this._map){this._removeIcon()}this.options.icon=f;if(this._map){this._initIcon();this.update()}},update:function(){if(!this._icon){return}var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)},_initIcon:function(){var g=this.options,k=this._map,j=(k.options.zoomAnimation&&k.options.markerZoomAnimation),i=j?"leaflet-zoom-animated":"leaflet-zoom-hide",f=false;if(!this._icon){this._icon=g.icon.createIcon();if(g.title){this._icon.title=g.title}this._initInteraction();f=(this.options.opacity<1);a.DomUtil.addClass(this._icon,i)}if(!this._shadow){this._shadow=g.icon.createShadow();if(this._shadow){a.DomUtil.addClass(this._shadow,i);f=(this.options.opacity<1)}}if(f){this._updateOpacity()}var h=this._map._panes;h.markerPane.appendChild(this._icon);if(this._shadow){h.shadowPane.appendChild(this._shadow)}},_removeIcon:function(){var f=this._map._panes;f.markerPane.removeChild(this._icon);if(this._shadow){f.shadowPane.removeChild(this._shadow)}this._icon=this._shadow=null},_setPos:function(f){a.DomUtil.setPosition(this._icon,f);if(this._shadow){a.DomUtil.setPosition(this._shadow,f)}this._icon.style.zIndex=f.y+this.options.zIndexOffset},_animateZoom:function(f){var g=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPos(g)},_initInteraction:function(){if(!this.options.clickable){return}var h=this._icon,g=["dblclick","mousedown","mouseover","mouseout"];a.DomUtil.addClass(h,"leaflet-clickable");a.DomEvent.on(h,"click",this._onMouseClick,this);for(var f=0;f<g.length;f++){a.DomEvent.on(h,g[f],this._fireMouseEvent,this)}if(a.Handler.MarkerDrag){this.dragging=new a.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_onMouseClick:function(f){a.DomEvent.stopPropagation(f);if(this.dragging&&this.dragging.moved()){return}if(this._map.dragging&&this._map.dragging.moved()){return}this.fire(f.type,{originalEvent:f})},_fireMouseEvent:function(f){this.fire(f.type,{originalEvent:f});if(f.type!=="mousedown"){a.DomEvent.stopPropagation(f)}},setOpacity:function(f){this.options.opacity=f;if(this._map){this._updateOpacity()}},_updateOpacity:function(){a.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow){a.DomUtil.setOpacity(this._shadow,this.options.opacity)}}});a.marker=function(g,f){return new a.Marker(g,f)};a.DivIcon=a.Icon.extend({options:{iconSize:new a.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var g=document.createElement("div"),f=this.options;if(f.html){g.innerHTML=f.html}if(f.bgPos){g.style.backgroundPosition=(-f.bgPos.x)+"px "+(-f.bgPos.y)+"px"}this._setIconStyles(g,"icon");return g},createShadow:function(){return null}});a.divIcon=function(f){return new a.DivIcon(f)};a.Map.mergeOptions({closePopupOnClick:true});a.Popup=a.Class.extend({includes:a.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:true,closeButton:true,offset:new a.Point(0,6),autoPanPadding:new a.Point(5,5),className:""},initialize:function(f,g){a.Util.setOptions(this,f);this._source=g},onAdd:function(g){this._map=g;if(!this._container){this._initLayout()}this._updateContent();var f=g.options.fadeAnimation;if(f){a.DomUtil.setOpacity(this._container,0)}g._panes.popupPane.appendChild(this._container);g.on("viewreset",this._updatePosition,this);if(a.Browser.any3d){g.on("zoomanim",this._zoomAnimation,this)}if(g.options.closePopupOnClick){g.on("preclick",this._close,this)}this._update();if(f){a.DomUtil.setOpacity(this._container,1)}},addTo:function(f){f.addLayer(this);return this},openOn:function(f){f.openPopup(this);return this},onRemove:function(f){f._panes.popupPane.removeChild(this._container);a.Util.falseFn(this._container.offsetWidth);f.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this);if(f.options.fadeAnimation){a.DomUtil.setOpacity(this._container,0)}this._map=null},setLatLng:function(f){this._latlng=a.latLng(f);this._update();return this},setContent:function(f){this._content=f;this._update();return this},_close:function(){var f=this._map;if(f){f._popup=null;f.removeLayer(this).fire("popupclose",{popup:this})}},_initLayout:function(){var h="leaflet-popup",f=this._container=a.DomUtil.create("div",h+" "+this.options.className+" leaflet-zoom-animated"),g;if(this.options.closeButton){g=this._closeButton=a.DomUtil.create("a",h+"-close-button",f);g.href="#close";g.innerHTML="&#215;";a.DomEvent.on(g,"click",this._onCloseButtonClick,this)}var i=this._wrapper=a.DomUtil.create("div",h+"-content-wrapper",f);a.DomEvent.disableClickPropagation(i);this._contentNode=a.DomUtil.create("div",h+"-content",i);a.DomEvent.on(this._contentNode,"mousewheel",a.DomEvent.stopPropagation);this._tipContainer=a.DomUtil.create("div",h+"-tip-container",f);this._tip=a.DomUtil.create("div",h+"-tip",this._tipContainer)},_update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},_updateContent:function(){if(!this._content){return}if(typeof this._content==="string"){this._contentNode.innerHTML=this._content}else{while(this._contentNode.hasChildNodes()){this._contentNode.removeChild(this._contentNode.firstChild)}this._contentNode.appendChild(this._content)}this.fire("contentupdate")},_updateLayout:function(){var g=this._contentNode,i=g.style;i.width="";i.whiteSpace="nowrap";var h=g.offsetWidth;h=Math.min(h,this.options.maxWidth);h=Math.max(h,this.options.minWidth);i.width=(h+1)+"px";i.whiteSpace="";i.height="";var f=g.offsetHeight,j=this.options.maxHeight,k="leaflet-popup-scrolled";if(j&&f>j){i.height=j+"px";a.DomUtil.addClass(g,k)}else{a.DomUtil.removeClass(g,k)}this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng),f=a.Browser.any3d,g=this.options.offset;if(f){a.DomUtil.setPosition(this._container,h)}this._containerBottom=-g.y-(f?0:h.y);this._containerLeft=-Math.round(this._containerWidth/2)+g.x+(f?0:h.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(f){var g=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);a.DomUtil.setPosition(this._container,g)},_adjustPan:function(){if(!this.options.autoPan){return}var f=this._map,l=this._container.offsetHeight,j=this._containerWidth,h=new a.Point(this._containerLeft,-l-this._containerBottom);if(a.Browser.any3d){h._add(a.DomUtil.getPosition(this._container))}var g=f.layerPointToContainerPoint(h),i=this.options.autoPanPadding,m=f.getSize(),n=0,k=0;if(g.x<0){n=g.x-i.x}if(g.x+j>m.x){n=g.x+j-m.x+i.x}if(g.y<0){k=g.y-i.y}if(g.y+l>m.y){k=g.y+l-m.y+i.y}if(n||k){f.panBy(new a.Point(n,k))}},_onCloseButtonClick:function(f){this._close();a.DomEvent.stop(f)}});a.popup=function(f,g){return new a.Popup(f,g)};a.Marker.include({openPopup:function(){if(this._popup&&this._map){this._popup.setLatLng(this._latlng);this._map.openPopup(this._popup)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},bindPopup:function(h,g){var f=a.point(this.options.icon.options.popupAnchor)||new a.Point(0,0);f=f.add(a.Popup.prototype.options.offset);if(g&&g.offset){f=f.add(g.offset)}g=a.Util.extend({offset:f},g);if(!this._popup){this.on("click",this.openPopup,this)}this._popup=new a.Popup(g,this).setContent(h);return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this.openPopup)}return this}});a.Map.include({openPopup:function(f){this.closePopup();this._popup=f;return this.addLayer(f).fire("popupopen",{popup:this._popup})},closePopup:function(){if(this._popup){this._popup._close()}return this}});a.LayerGroup=a.Class.extend({initialize:function(h){this._layers={};var g,f;if(h){for(g=0,f=h.length;g<f;g++){this.addLayer(h[g])}}},addLayer:function(f){var g=a.Util.stamp(f);this._layers[g]=f;if(this._map){this._map.addLayer(f)}return this},removeLayer:function(f){var g=a.Util.stamp(f);delete this._layers[g];if(this._map){this._map.removeLayer(f)}return this},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this},invoke:function(f){var g=Array.prototype.slice.call(arguments,1),j,h;for(j in this._layers){if(this._layers.hasOwnProperty(j)){h=this._layers[j];if(h[f]){h[f].apply(h,g)}}}return this},onAdd:function(f){this._map=f;this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f);this._map=null},addTo:function(f){f.addLayer(this);return this},eachLayer:function(h,g){for(var f in this._layers){if(this._layers.hasOwnProperty(f)){h.call(g,this._layers[f])}}}});a.layerGroup=function(f){return new a.LayerGroup(f)};a.FeatureGroup=a.LayerGroup.extend({includes:a.Mixin.Events,addLayer:function(f){if(this._layers[a.Util.stamp(f)]){return this}f.on("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this);a.LayerGroup.prototype.addLayer.call(this,f);if(this._popupContent&&f.bindPopup){f.bindPopup(this._popupContent)}return this},removeLayer:function(f){f.off("click dblclick mouseover mouseout mousemove contextmenu",this._propagateEvent,this);a.LayerGroup.prototype.removeLayer.call(this,f);if(this._popupContent){return this.invoke("unbindPopup")}else{return this}},bindPopup:function(f){this._popupContent=f;return this.invoke("bindPopup",f)},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new a.LatLngBounds();this.eachLayer(function(g){f.extend(g instanceof a.Marker?g.getLatLng():g.getBounds())},this);return f},_propagateEvent:function(f){f.layer=f.target;f.target=this;this.fire(f.type,f)}});a.featureGroup=function(f){return new a.FeatureGroup(f)};a.Path=a.Class.extend({includes:[a.Mixin.Events],statics:{CLIP_PADDING:a.Browser.mobile?Math.max(0,Math.min(0.5,(1280/Math.max(d.innerWidth,d.innerHeight)-1)/2)):0.5},options:{stroke:true,color:"#0033ff",dashArray:null,weight:5,opacity:0.5,fill:false,fillColor:null,fillOpacity:0.2,clickable:true},initialize:function(f){a.Util.setOptions(this,f)},onAdd:function(f){this._map=f;if(!this._container){this._initElements();this._initEvents()}this.projectLatlngs();this._updatePath();if(this._container){this._map._pathRoot.appendChild(this._container)}f.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(f){f.addLayer(this);return this},onRemove:function(f){f._pathRoot.removeChild(this._container);this._map=null;if(a.Browser.vml){this._container=null;this._stroke=null;this._fill=null}f.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(f){a.Util.setOptions(this,f);if(this._container){this._updateStyle()}return this},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath()}return this}});a.Map.include({_updatePathViewport:function(){var j=a.Path.CLIP_PADDING,i=this.getSize(),g=a.DomUtil.getPosition(this._mapPane),h=g.multiplyBy(-1)._subtract(i.multiplyBy(j)),f=h.add(i.multiplyBy(1+j*2));this._pathViewport=new a.Bounds(h,f)}});a.Path.SVG_NS="http://www.w3.org/2000/svg";a.Browser.svg=!!(document.createElementNS&&document.createElementNS(a.Path.SVG_NS,"svg").createSVGRect);a.Path=a.Path.extend({statics:{SVG:a.Browser.svg},bringToFront:function(){if(this._container){this._map._pathRoot.appendChild(this._container)}return this},bringToBack:function(){if(this._container){var f=this._map._pathRoot;f.insertBefore(this._container,f.firstChild)}return this},getPathString:function(){},_createElement:function(f){return document.createElementNS(a.Path.SVG_NS,f)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");this._container.appendChild(this._path)},_initStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke-linejoin","round");this._path.setAttribute("stroke-linecap","round")}if(this.options.fill){this._path.setAttribute("fill-rule","evenodd")}this._updateStyle()},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke",this.options.color);this._path.setAttribute("stroke-opacity",this.options.opacity);this._path.setAttribute("stroke-width",this.options.weight);if(this.options.dashArray){this._path.setAttribute("stroke-dasharray",this.options.dashArray)}else{this._path.removeAttribute("stroke-dasharray")}}else{this._path.setAttribute("stroke","none")}if(this.options.fill){this._path.setAttribute("fill",this.options.fillColor||this.options.color);this._path.setAttribute("fill-opacity",this.options.fillOpacity)}else{this._path.setAttribute("fill","none")}},_updatePath:function(){var f=this.getPathString();if(!f){f="M0 0"}this._path.setAttribute("d",f)},_initEvents:function(){if(this.options.clickable){if(a.Browser.svg||!a.Browser.vml){this._path.setAttribute("class","leaflet-clickable")}a.DomEvent.on(this._container,"click",this._onMouseClick,this);var g=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"];for(var f=0;f<g.length;f++){a.DomEvent.on(this._container,g[f],this._fireMouseEvent,this)}}},_onMouseClick:function(f){if(this._map.dragging&&this._map.dragging.moved()){return}this._fireMouseEvent(f);a.DomEvent.stopPropagation(f)},_fireMouseEvent:function(i){if(!this.hasEventListeners(i.type)){return}if(i.type==="contextmenu"){a.DomEvent.preventDefault(i)}var h=this._map,g=h.mouseEventToContainerPoint(i),f=h.containerPointToLayerPoint(g),j=h.layerPointToLatLng(f);this.fire(i.type,{latlng:j,layerPoint:f,containerPoint:g,originalEvent:i})}});a.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=a.Path.prototype._createElement("svg");this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&a.Browser.any3d){this._pathRoot.setAttribute("class"," leaflet-zoom-animated");this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})}else{this._pathRoot.setAttribute("class"," leaflet-zoom-hide")}this.on("moveend",this._updateSvgViewport);this._updateSvgViewport()}},_animatePathZoom:function(h){var j=this.getZoomScale(h.zoom),i=this._getCenterOffset(h.center).divideBy(1-1/j),g=this.containerPointToLayerPoint(this.getSize().multiplyBy(-a.Path.CLIP_PADDING)),f=g.add(i).round();this._pathRoot.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString((f.multiplyBy(-1).add(a.DomUtil.getPosition(this._pathRoot)).multiplyBy(j).add(f)))+" scale("+j+") ";this._pathZooming=true},_endPathZoom:function(){this._pathZooming=false},_updateSvgViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var i=this._pathViewport,j=i.min,g=i.max,k=g.x-j.x,f=g.y-j.y,h=this._pathRoot,l=this._panes.overlayPane;if(a.Browser.mobileWebkit){l.removeChild(h)}a.DomUtil.setPosition(h,j);h.setAttribute("width",k);h.setAttribute("height",f);h.setAttribute("viewBox",[j.x,j.y,k,f].join(" "));if(a.Browser.mobileWebkit){l.appendChild(h)}}});a.Path.include({bindPopup:function(g,f){if(!this._popup||this._popup.options!==f){this._popup=new a.Popup(f,this)}this._popup.setContent(g);if(!this._openPopupAdded){this.on("click",this._openPopup,this);this._openPopupAdded=true}return this},openPopup:function(f){if(this._popup){f=f||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];this._openPopup({latlng:f})}return this},_openPopup:function(f){this._popup.setLatLng(f.latlng);this._map.openPopup(this._popup)}});a.Browser.vml=(function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var f=h.firstChild;f.style.behavior="url(#default#VML)";return f&&(typeof f.adj==="object")}catch(g){return false}}());a.Path=a.Browser.svg||!a.Browser.vml?a.Path:a.Path.extend({statics:{VML:true,CLIP_PADDING:0.02},_createElement:(function(){try{document.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch(f){return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),_initPath:function(){var f=this._container=this._createElement("shape");a.DomUtil.addClass(f,"leaflet-vml-shape");if(this.options.clickable){a.DomUtil.addClass(f,"leaflet-clickable")}f.coordsize="1 1";this._path=this._createElement("path");f.appendChild(this._path);this._map._pathRoot.appendChild(f)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var i=this._stroke,h=this._fill,g=this.options,f=this._container;f.stroked=g.stroke;f.filled=g.fill;if(g.stroke){if(!i){i=this._stroke=this._createElement("stroke");i.endcap="round";f.appendChild(i)}i.weight=g.weight+"px";i.color=g.color;i.opacity=g.opacity;if(g.dashArray){i.dashStyle=g.dashArray.replace(/ *, */g," ")}else{i.dashStyle=""}}else{if(i){f.removeChild(i);this._stroke=null}}if(g.fill){if(!h){h=this._fill=this._createElement("fill");f.appendChild(h)}h.color=g.fillColor||g.color;h.opacity=g.fillOpacity}else{if(h){f.removeChild(h);this._fill=null}}},_updatePath:function(){var f=this._container.style;f.display="none";this._path.v=this.getPathString()+" ";f.display=""}});a.Map.include(a.Browser.svg||!a.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot){return}var f=this._pathRoot=document.createElement("div");f.className="leaflet-vml-container";this._panes.overlayPane.appendChild(f);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}});a.Browser.canvas=(function(){return !!document.createElement("canvas").getContext}());a.Path=(a.Path.SVG&&!d.L_PREFER_CANVAS)||!a.Browser.canvas?a.Path:a.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate()}return this},setStyle:function(f){a.Util.setOptions(this,f);if(this._map){this._updateStyle();this._requestUpdate()}return this},onRemove:function(f){f.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this._requestUpdate();this._map=null},_requestUpdate:function(){if(this._map){a.Util.cancelAnimFrame(this._fireMapMoveEnd);this._updateRequest=a.Util.requestAnimFrame(this._fireMapMoveEnd,this._map)}},_fireMapMoveEnd:function(){this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var f=this.options;if(f.stroke){this._ctx.lineWidth=f.weight;this._ctx.strokeStyle=f.color}if(f.fill){this._ctx.fillStyle=f.fillColor||f.color}},_drawPath:function(){var m,l,g,h,f,k;this._ctx.beginPath();for(m=0,g=this._parts.length;m<g;m++){for(l=0,h=this._parts[m].length;l<h;l++){f=this._parts[m][l];k=(l===0?"move":"line")+"To";this._ctx[k](f.x,f.y)}if(this instanceof a.Polygon){this._ctx.closePath()}}},_checkIfEmpty:function(){return !this._parts.length},_updatePath:function(){if(this._checkIfEmpty()){return}var f=this._ctx,g=this.options;this._drawPath();f.save();this._updateStyle();if(g.fill){if(g.fillOpacity<1){f.globalAlpha=g.fillOpacity}f.fill()}if(g.stroke){if(g.opacity<1){f.globalAlpha=g.opacity}f.stroke()}f.restore()},_initEvents:function(){if(this.options.clickable){this._map.on("click",this._onClick,this)}},_onClick:function(f){if(this._containsPoint(f.layerPoint)){this.fire("click",f)}}});a.Map.include((a.Path.SVG&&!d.L_PREFER_CANVAS)||!a.Browser.canvas?{}:{_initPathRoot:function(){var g=this._pathRoot,f;if(!g){g=this._pathRoot=document.createElement("canvas");g.style.position="absolute";f=this._canvasCtx=g.getContext("2d");f.lineCap="round";f.lineJoin="round";this._panes.overlayPane.appendChild(g);if(this.options.zoomAnimation){this._pathRoot.className="leaflet-zoom-animated";this.on("zoomanim",this._animatePathZoom);this.on("zoomend",this._endPathZoom)}this.on("moveend",this._updateCanvasViewport);this._updateCanvasViewport()}},_updateCanvasViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var g=this._pathViewport,i=g.min,h=g.max.subtract(i),f=this._pathRoot;a.DomUtil.setPosition(f,i);f.width=h.x;f.height=h.y;f.getContext("2d").translate(-i.x,-i.y)}});a.LineUtil={simplify:function(h,f){if(!f||!h.length){return h.slice()}var g=f*f;h=this._reducePoints(h,g);h=this._simplifyDP(h,g);return h},pointToSegmentDistance:function(g,h,f){return Math.sqrt(this._sqClosestPointOnSegment(g,h,f,true))},closestPointOnSegment:function(g,h,f){return this._sqClosestPointOnSegment(g,h,f)},_simplifyDP:function(k,g){var f=k.length,j=typeof Uint8Array!==e+""?Uint8Array:Array,m=new j(f);m[0]=m[f-1]=1;this._simplifyDPStep(k,m,g,0,f-1);var h,l=[];for(h=0;h<f;h++){if(m[h]){l.push(k[h])}}return l},_simplifyDPStep:function(o,g,f,l,n){var h=0,m,j,k;for(j=l+1;j<=n-1;j++){k=this._sqClosestPointOnSegment(o[j],o[l],o[n],true);if(k>h){m=j;h=k}}if(h>f){g[m]=1;this._simplifyDPStep(o,g,f,l,m);this._simplifyDPStep(o,g,f,m,n)}},_reducePoints:function(j,g){var l=[j[0]];for(var h=1,k=0,f=j.length;h<f;h++){if(this._sqDist(j[h],j[k])>g){l.push(j[h]);k=h}}if(k<f-1){l.push(j[f-1])}return l},clipSegment:function(o,m,f,q){var k=f.min,n=f.max;var j=q?this._lastCode:this._getBitCode(o,f),i=this._getBitCode(m,f);this._lastCode=i;while(true){if(!(j|i)){return[o,m]}else{if(j&i){return false}else{var h=j||i,g=this._getEdgeIntersection(o,m,h,f),l=this._getBitCode(g,f);if(h===j){o=g;j=l}else{m=g;i=l}}}}},_getEdgeIntersection:function(i,g,m,l){var j=g.x-i.x,h=g.y-i.y,k=l.min,f=l.max;if(m&8){return new a.Point(i.x+j*(f.y-i.y)/h,f.y)}else{if(m&4){return new a.Point(i.x+j*(k.y-i.y)/h,k.y)}else{if(m&2){return new a.Point(f.x,i.y+h*(f.x-i.x)/j)}else{if(m&1){return new a.Point(k.x,i.y+h*(k.x-i.x)/j)}}}}},_getBitCode:function(h,g){var f=0;if(h.x<g.min.x){f|=1}else{if(h.x>g.max.x){f|=2}}if(h.y<g.min.y){f|=4}else{if(h.y>g.max.y){f|=8}}return f},_sqDist:function(i,h){var g=h.x-i.x,f=h.y-i.y;return g*g+f*f},_sqClosestPointOnSegment:function(g,l,k,h){var j=l.x,i=l.y,o=k.x-j,n=k.y-i,f=o*o+n*n,m;if(f>0){m=((g.x-j)*o+(g.y-i)*n)/f;if(m>1){j=k.x;i=k.y}else{if(m>0){j+=o*m;i+=n*m}}}o=g.x-j;n=g.y-i;return h?o*o+n*n:new a.Point(j,i)}};a.Polyline=a.Path.extend({initialize:function(f,g){a.Path.prototype.initialize.call(this,g);this._latlngs=this._convertLatLngs(f);if(a.Handler.PolyEdit){this.editing=new a.Handler.PolyEdit(this);if(this.options.editable){this.editing.enable()}}},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];for(var g=0,f=this._latlngs.length;g<f;g++){this._originalPoints[g]=this._map.latLngToLayerPoint(this._latlngs[g])}},getPathString:function(){for(var g=0,f=this._parts.length,h="";g<f;g++){h+=this._getPathPartStr(this._parts[g])}return h},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){this._latlngs=this._convertLatLngs(f);return this.redraw()},addLatLng:function(f){this._latlngs.push(a.latLng(f));return this.redraw()},spliceLatLngs:function(f,g){var h=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs);this.redraw();return h},closestLayerPoint:function(f){var q=Infinity,g=this._parts,s,r,n=null;for(var h=0,t=g.length;h<t;h++){var o=g[h];for(var k=1,m=o.length;k<m;k++){s=o[k-1];r=o[k];var l=a.LineUtil._sqClosestPointOnSegment(f,s,r,true);if(l<q){q=l;n=a.LineUtil._sqClosestPointOnSegment(f,s,r)}}}if(n){n.distance=Math.sqrt(q)}return n},getBounds:function(){var g=new a.LatLngBounds();var j=this.getLatLngs();for(var h=0,f=j.length;h<f;h++){g.extend(j[h])}return g},onAdd:function(f){a.Path.prototype.onAdd.call(this,f);if(this.editing&&this.editing.enabled()){this.editing.addHooks()}},onRemove:function(f){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()}a.Path.prototype.onRemove.call(this,f)},_convertLatLngs:function(g){var h,f;for(h=0,f=g.length;h<f;h++){if(g[h] instanceof Array&&typeof g[h][0]!=="number"){return}g[h]=a.latLng(g[h])}return g},_initEvents:function(){a.Path.prototype._initEvents.call(this)},_getPathPartStr:function(i){var g=a.Path.VML;for(var h=0,f=i.length,l="",k;h<f;h++){k=i[h];if(g){k._round()}l+=(h?"L":"M")+k.x+" "+k.y}return l},_clipPoints:function(){var l=this._originalPoints,f=l.length,j,h,m;if(this.options.noClip){this._parts=[l];return}this._parts=[];var n=this._parts,g=this._map._pathViewport,o=a.LineUtil;for(j=0,h=0;j<f-1;j++){m=o.clipSegment(l[j],l[j+1],g,j);if(!m){continue}n[h]=n[h]||[];n[h].push(m[0]);if((m[1]!==l[j+1])||(j===f-2)){n[h].push(m[1]);h++}}},_simplifyPoints:function(){var h=this._parts,j=a.LineUtil;for(var g=0,f=h.length;g<f;g++){h[g]=j.simplify(h[g],this.options.smoothFactor)}},_updatePath:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();a.Path.prototype._updatePath.call(this)}});a.polyline=function(f,g){return new a.Polyline(f,g)};a.PolyUtil={};a.PolyUtil.clipPolygon=function(x,f){var n=f.min,v=f.max,t,q=[1,4,2,8],r,o,m,w,u,s,h,g,l=a.LineUtil;for(r=0,s=x.length;r<s;r++){x[r]._code=l._getBitCode(x[r],f)}for(m=0;m<4;m++){h=q[m];t=[];for(r=0,s=x.length,o=s-1;r<s;o=r++){w=x[r];u=x[o];if(!(w._code&h)){if(u._code&h){g=l._getEdgeIntersection(u,w,h,f);g._code=l._getBitCode(g,f);t.push(g)}t.push(w)}else{if(!(u._code&h)){g=l._getEdgeIntersection(u,w,h,f);g._code=l._getBitCode(g,f);t.push(g)}}}x=t}return x};a.Polygon=a.Polyline.extend({options:{fill:true},initialize:function(f,g){a.Polyline.prototype.initialize.call(this,f,g);if(f&&(f[0] instanceof Array)&&(typeof f[0][0]!=="number")){this._latlngs=this._convertLatLngs(f[0]);this._holes=f.slice(1)}},projectLatlngs:function(){a.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes){return}for(var k=0,f=this._holes.length,l;k<f;k++){this._holePoints[k]=[];for(var h=0,g=this._holes[k].length;h<g;h++){this._holePoints[k][h]=this._map.latLngToLayerPoint(this._holes[k][h])}}},_clipPoints:function(){var j=this._originalPoints,k=[];this._parts=[j].concat(this._holePoints);if(this.options.noClip){return}for(var h=0,g=this._parts.length;h<g;h++){var f=a.PolyUtil.clipPolygon(this._parts[h],this._map._pathViewport);if(!f.length){continue}k.push(f)}this._parts=k},_getPathPartStr:function(f){var g=a.Polyline.prototype._getPathPartStr.call(this,f);return g+(a.Browser.svg?"z":"x")}});a.polygon=function(f,g){return new a.Polygon(f,g)};(function(){function f(g){return a.FeatureGroup.extend({initialize:function(h,i){this._layers={};this._options=i;this.setLatLngs(h)},setLatLngs:function(j){var k=0,h=j.length;this.eachLayer(function(i){if(k<h){i.setLatLngs(j[k++])}else{this.removeLayer(i)}},this);while(k<h){this.addLayer(new g(j[k++],this._options))}return this}})}a.MultiPolyline=f(a.Polyline);a.MultiPolygon=f(a.Polygon);a.multiPolyline=function(g,h){return new a.MultiPolyline(g,h)};a.multiPolygon=function(g,h){return new a.MultiPolygon(g,h)}}());a.Rectangle=a.Polygon.extend({initialize:function(g,f){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(g),f)},setBounds:function(f){this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){f=a.latLngBounds(f);return[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast(),f.getSouthWest()]}});a.rectangle=function(g,f){return new a.Rectangle(g,f)};a.Circle=a.Path.extend({initialize:function(h,f,g){a.Path.prototype.initialize.call(this,g);this._latlng=a.latLng(h);this._mRadius=f},options:{fill:true},setLatLng:function(f){this._latlng=a.latLng(f);return this.redraw()},setRadius:function(f){this._mRadius=f;return this.redraw()},projectLatlngs:function(){var h=this._getLngRadius(),g=new a.LatLng(this._latlng.lat,this._latlng.lng-h,true),f=this._map.latLngToLayerPoint(g);this._point=this._map.latLngToLayerPoint(this._latlng);this._radius=Math.max(Math.round(this._point.x-f.x),1)},getBounds:function(){var k=this._map,l=this._radius*Math.cos(Math.PI/4),g=k.project(this._latlng),h=new a.Point(g.x-l,g.y+l),j=new a.Point(g.x+l,g.y-l),f=k.unproject(h),i=k.unproject(j);return new a.LatLngBounds(f,i)},getLatLng:function(){return this._latlng},getPathString:function(){var g=this._point,f=this._radius;if(this._checkIfEmpty()){return""}if(a.Browser.svg){return"M"+g.x+","+(g.y-f)+"A"+f+","+f+",0,1,1,"+(g.x-0.1)+","+(g.y-f)+" z"}else{g._round();f=Math.round(f);return"AL "+g.x+","+g.y+" "+f+","+f+" 0,"+(65535*360)}},getRadius:function(){return this._mRadius},_getLngRadius:function(){var g=40075017,f=g*Math.cos(a.LatLng.DEG_TO_RAD*this._latlng.lat);return(this._mRadius/f)*360},_checkIfEmpty:function(){if(!this._map){return false}var f=this._map._pathViewport,g=this._radius,h=this._point;return h.x-g>f.max.x||h.y-g>f.max.y||h.x+g<f.min.x||h.y+g<f.min.y}});a.circle=function(h,f,g){return new a.Circle(h,f,g)};a.CircleMarker=a.Circle.extend({options:{radius:10,weight:2},initialize:function(g,f){a.Circle.prototype.initialize.call(this,g,null,f);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(f){this._radius=f;return this.redraw()}});a.circleMarker=function(g,f){return new a.CircleMarker(g,f)};a.Polyline.include(!a.Path.CANVAS?{}:{_containsPoint:function(f,o){var n,m,h,q,l,r,g,s=this.options.weight/2;if(a.Browser.touch){s+=10}for(n=0,q=this._parts.length;n<q;n++){g=this._parts[n];for(m=0,l=g.length,h=l-1;m<l;h=m++){if(!o&&(m===0)){continue}r=a.LineUtil.pointToSegmentDistance(f,g[h],g[m]);if(r<=s){return true}}}return false}});a.Polygon.include(!a.Path.CANVAS?{}:{_containsPoint:function(f){var h=false,g,s,r,o,n,m,q,l;if(a.Polyline.prototype._containsPoint.call(this,f,true)){return true}for(o=0,q=this._parts.length;o<q;o++){g=this._parts[o];for(n=0,l=g.length,m=l-1;n<l;m=n++){s=g[n];r=g[m];if(((s.y>f.y)!==(r.y>f.y))&&(f.x<(r.x-s.x)*(f.y-s.y)/(r.y-s.y)+s.x)){h=!h}}}return h}});a.Circle.include(!a.Path.CANVAS?{}:{_drawPath:function(){var f=this._point;this._ctx.beginPath();this._ctx.arc(f.x,f.y,this._radius,0,Math.PI*2,false)},_containsPoint:function(h){var g=this._point,f=this.options.stroke?this.options.weight/2:0;return(h.distanceTo(g)<=this._radius+f)}});a.GeoJSON=a.FeatureGroup.extend({initialize:function(g,f){a.Util.setOptions(this,f);this._layers={};if(g){this.addData(g)}},addData:function(h){var l=h instanceof Array?h:h.features,k,f;if(l){for(k=0,f=l.length;k<f;k++){this.addData(l[k])}return this}var g=this.options;if(g.filter&&!g.filter(h)){return}var j=a.GeoJSON.geometryToLayer(h,g.pointToLayer);j.feature=h;this.resetStyle(j);if(g.onEachFeature){g.onEachFeature(h,j)}return this.addLayer(j)},resetStyle:function(f){var g=this.options.style;if(g){this._setLayerStyle(f,g)}},setStyle:function(f){this.eachLayer(function(g){this._setLayerStyle(g,f)},this)},_setLayerStyle:function(f,g){if(typeof g==="function"){g=g(f.feature)}if(f.setStyle){f.setStyle(g)}}});a.Util.extend(a.GeoJSON,{geometryToLayer:function(f,g){var o=f.type==="Feature"?f.geometry:f,p=o.coordinates,k=[],j,h,l,n,m;switch(o.type){case"Point":j=this.coordsToLatLng(p);return g?g(f,j):new a.Marker(j);case"MultiPoint":for(l=0,n=p.length;l<n;l++){j=this.coordsToLatLng(p[l]);m=g?g(f,j):new a.Marker(j);k.push(m)}return new a.FeatureGroup(k);case"LineString":h=this.coordsToLatLngs(p);return new a.Polyline(h);case"Polygon":h=this.coordsToLatLngs(p,1);return new a.Polygon(h);case"MultiLineString":h=this.coordsToLatLngs(p,1);return new a.MultiPolyline(h);case"MultiPolygon":h=this.coordsToLatLngs(p,2);return new a.MultiPolygon(h);case"GeometryCollection":for(l=0,n=o.geometries.length;l<n;l++){m=this.geometryToLayer(o.geometries[l],g);k.push(m)}return new a.FeatureGroup(k);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(h,g){var i=parseFloat(h[g?0:1]),f=parseFloat(h[g?1:0]);return new a.LatLng(i,f,true)},coordsToLatLngs:function(l,k,h){var m,g=[],j,f;for(j=0,f=l.length;j<f;j++){m=k?this.coordsToLatLngs(l[j],k-1,h):this.coordsToLatLng(l[j],h);g.push(m)}return g}});a.geoJson=function(g,f){return new a.GeoJSON(g,f)};a.DomEvent={addListener:function(i,k,l,g){var f=a.Util.stamp(l),m="_leaflet_"+k+f,n,j,h;if(i[m]){return this}n=function(o){return l.call(g||i,o||a.DomEvent._getEvent())};if(a.Browser.touch&&(k==="dblclick")&&this.addDoubleTapListener){return this.addDoubleTapListener(i,n,f)}else{if("addEventListener" in i){if(k==="mousewheel"){i.addEventListener("DOMMouseScroll",n,false);i.addEventListener(k,n,false)}else{if((k==="mouseenter")||(k==="mouseleave")){j=n;h=(k==="mouseenter"?"mouseover":"mouseout");n=function(o){if(!a.DomEvent._checkMouse(i,o)){return}return j(o)};i.addEventListener(h,n,false)}else{i.addEventListener(k,n,false)}}}else{if("attachEvent" in i){i.attachEvent("on"+k,n)}}}i[m]=n;return this},removeListener:function(j,i,h){var k=a.Util.stamp(h),f="_leaflet_"+i+k,g=j[f];if(!g){return}if(a.Browser.touch&&(i==="dblclick")&&this.removeDoubleTapListener){this.removeDoubleTapListener(j,k)}else{if("removeEventListener" in j){if(i==="mousewheel"){j.removeEventListener("DOMMouseScroll",g,false);j.removeEventListener(i,g,false)}else{if((i==="mouseenter")||(i==="mouseleave")){j.removeEventListener((i==="mouseenter"?"mouseover":"mouseout"),g,false)}else{j.removeEventListener(i,g,false)}}}else{if("detachEvent" in j){j.detachEvent("on"+i,g)}}}j[f]=null;return this},stopPropagation:function(f){if(f.stopPropagation){f.stopPropagation()}else{f.cancelBubble=true}return this},disableClickPropagation:function(g){var f=a.DomEvent.stopPropagation;return a.DomEvent.addListener(g,a.Draggable.START,f).addListener(g,"click",f).addListener(g,"dblclick",f)},preventDefault:function(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return this},stop:function(f){return a.DomEvent.preventDefault(f).stopPropagation(f)},getMousePosition:function(i,h){var g=document.body,l=document.documentElement,f=i.pageX?i.pageX:i.clientX+g.scrollLeft+l.scrollLeft,k=i.pageY?i.pageY:i.clientY+g.scrollTop+l.scrollTop,j=new a.Point(f,k);return(h?j._subtract(a.DomUtil.getViewportOffset(h)):j)},getWheelDelta:function(f){var g=0;if(f.wheelDelta){g=f.wheelDelta/120}if(f.detail){g=-f.detail/3}return g},_checkMouse:function(f,i){var h=i.relatedTarget;if(!h){return true}try{while(h&&(h!==f)){h=h.parentNode}}catch(g){return false}return(h!==f)},_getEvent:function(){var g=d.event;if(!g){var f=arguments.callee.caller;while(f){g=f["arguments"][0];if(g&&d.Event===g.constructor){break}f=f.caller}}return g}};a.DomEvent.on=a.DomEvent.addListener;a.DomEvent.off=a.DomEvent.removeListener;a.Draggable=a.Class.extend({includes:a.Mixin.Events,statics:{START:a.Browser.touch?"touchstart":"mousedown",END:a.Browser.touch?"touchend":"mouseup",MOVE:a.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(f,g){this._element=f;this._dragStartTarget=g||f},enable:function(){if(this._enabled){return}a.DomEvent.on(this._dragStartTarget,a.Draggable.START,this._onDown,this);this._enabled=true},disable:function(){if(!this._enabled){return}a.DomEvent.off(this._dragStartTarget,a.Draggable.START,this._onDown);this._enabled=false;this._moved=false},_onDown:function(g){if((!a.Browser.touch&&g.shiftKey)||((g.which!==1)&&(g.button!==1)&&!g.touches)){return}this._simulateClick=true;if(g.touches&&g.touches.length>1){this._simulateClick=false;return}var h=(g.touches&&g.touches.length===1?g.touches[0]:g),f=h.target;a.DomEvent.preventDefault(g);if(a.Browser.touch&&f.tagName.toLowerCase()==="a"){a.DomUtil.addClass(f,"leaflet-active")}this._moved=false;if(this._moving){return}this._startPos=this._newPos=a.DomUtil.getPosition(this._element);this._startPoint=new a.Point(h.clientX,h.clientY);a.DomEvent.on(document,a.Draggable.MOVE,this._onMove,this);a.DomEvent.on(document,a.Draggable.END,this._onUp,this)},_onMove:function(h){if(h.touches&&h.touches.length>1){return}var i=(h.touches&&h.touches.length===1?h.touches[0]:h),g=new a.Point(i.clientX,i.clientY),f=g.subtract(this._startPoint);if(!f.x&&!f.y){return}a.DomEvent.preventDefault(h);if(!this._moved){this.fire("dragstart");this._moved=true;if(!a.Browser.touch){a.DomUtil.disableTextSelection();this._setMovingCursor()}}this._newPos=this._startPos.add(f);this._moving=true;a.Util.cancelAnimFrame(this._animRequest);this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget)},_updatePosition:function(){this.fire("predrag");a.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(g){if(this._simulateClick&&g.changedTouches){var i=g.changedTouches[0],f=i.target,h=(this._newPos&&this._newPos.distanceTo(this._startPos))||0;if(f.tagName.toLowerCase()==="a"){a.DomUtil.removeClass(f,"leaflet-active")}if(h<a.Draggable.TAP_TOLERANCE){this._simulateEvent("click",i)}}if(!a.Browser.touch){a.DomUtil.enableTextSelection();this._restoreCursor()}a.DomEvent.off(document,a.Draggable.MOVE,this._onMove);a.DomEvent.off(document,a.Draggable.END,this._onUp);if(this._moved){a.Util.cancelAnimFrame(this._animRequest);this.fire("dragend")}this._moving=false},_setMovingCursor:function(){a.DomUtil.addClass(document.body,"leaflet-dragging")},_restoreCursor:function(){a.DomUtil.removeClass(document.body,"leaflet-dragging")},_simulateEvent:function(f,h){var g=document.createEvent("MouseEvents");g.initMouseEvent(f,true,true,d,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);h.target.dispatchEvent(g)}});a.Handler=a.Class.extend({initialize:function(f){this._map=f},enable:function(){if(this._enabled){return}this._enabled=true;this.addHooks()},disable:function(){if(!this._enabled){return}this._enabled=false;this.removeHooks()},enabled:function(){return !!this._enabled}});a.Map.mergeOptions({dragging:true,inertia:!a.Browser.android23,inertiaDeceleration:3000,inertiaMaxSpeed:1500,inertiaThreshold:a.Browser.touch?32:14,worldCopyJump:true});a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){this._draggable=new a.Draggable(this._map._mapPane,this._map._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);var f=this._map.options;if(f.worldCopyJump){this._draggable.on("predrag",this._onPreDrag,this);this._map.on("viewreset",this._onViewReset,this)}}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var f=this._map;f.fire("movestart").fire("dragstart");if(f._panTransition){f._panTransition._onTransitionEnd(true)}if(f.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(){if(this._map.options.inertia){var f=this._lastTime=+new Date(),g=this._lastPos=this._draggable._newPos;this._positions.push(g);this._times.push(f);if(f-this._times[0]>200){this._positions.shift();this._times.shift()}}this._map.fire("move").fire("drag")},_onViewReset:function(){var g=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint(new a.LatLng(0,0));this._initialWorldOffset=f.subtract(g).x;this._worldWidth=this._map.project(new a.LatLng(0,180)).x},_onPreDrag:function(){var j=this._map,m=this._worldWidth,l=Math.round(m/2),g=this._initialWorldOffset,f=this._draggable._newPos.x,i=(f-l+g)%m+l-g,h=(f+l+g)%m-l-g,k=Math.abs(i+g)<Math.abs(h+g)?i:h;this._draggable._newPos.x=k},_onDragEnd:function(){var g=this._map,r=g.options,m=+new Date()-this._lastTime,f=!r.inertia||m>r.inertiaThreshold||this._positions[0]===e;if(f){g.fire("moveend")}else{var n=this._lastPos.subtract(this._positions[0]),k=(this._lastTime+m-this._times[0])/1000,j=n.multiplyBy(0.58/k),i=j.distanceTo(new a.Point(0,0)),q=Math.min(r.inertiaMaxSpeed,i),p=j.multiplyBy(q/i),h=q/r.inertiaDeceleration,l=p.multiplyBy(-h/2).round();var o={duration:h,easing:"ease-out"};a.Util.requestAnimFrame(a.Util.bind(function(){this._map.panBy(l,o)},this))}g.fire("dragend");if(r.maxBounds){a.Util.requestAnimFrame(this._panInsideMaxBounds,g,true,g._container)}},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}});a.Map.addInitHook("addHandler","dragging",a.Map.Drag);a.Map.mergeOptions({doubleClickZoom:true});a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(f){this.setView(f.latlng,this._zoom+1)}});a.Map.addInitHook("addHandler","doubleClickZoom",a.Map.DoubleClickZoom);a.Map.mergeOptions({scrollWheelZoom:!a.Browser.touch});a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){a.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(f){var g=a.DomEvent.getWheelDelta(f);this._delta+=g;this._lastMousePos=this._map.mouseEventToContainerPoint(f);clearTimeout(this._timer);this._timer=setTimeout(a.Util.bind(this._performZoom,this),40);a.DomEvent.preventDefault(f)},_performZoom:function(){var i=this._map,j=Math.round(this._delta),h=i.getZoom();j=Math.max(Math.min(j,4),-4);j=i._limitZoom(h+j)-h;this._delta=0;if(!j){return}var g=h+j,f=this._getCenterForScrollWheelZoom(this._lastMousePos,g);i.setView(f,g)},_getCenterForScrollWheelZoom:function(h,j){var k=this._map,l=k.getZoomScale(j),i=k.getSize().divideBy(2),g=h.subtract(i).multiplyBy(1-1/l),f=k._getTopLeftPoint().add(i).add(g);return k.unproject(f)}});a.Map.addInitHook("addHandler","scrollWheelZoom",a.Map.ScrollWheelZoom);a.Util.extend(a.DomEvent,{addDoubleTapListener:function(j,q,f){var p,m=false,k=250,i,g="_leaflet_",l="touchstart",o="touchend";function h(s){if(s.touches.length!==1){return}var r=Date.now(),t=r-(p||r);i=s.touches[0];m=(t>0&&t<=k);p=r}function n(r){if(m){i.type="dblclick";q(i);p=null}}j[g+l+f]=h;j[g+o+f]=n;j.addEventListener(l,h,false);j.addEventListener(o,n,false);return this},removeDoubleTapListener:function(g,h){var f="_leaflet_";g.removeEventListener(g,g[f+"touchstart"+h],false);g.removeEventListener(g,g[f+"touchend"+h],false);return this}});a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23});a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var h=this._map;if(!i.touches||i.touches.length!==2||h._animatingZoom||this._zooming){return}var j=h.mouseEventToLayerPoint(i.touches[0]),g=h.mouseEventToLayerPoint(i.touches[1]),f=h._getCenterLayerPoint();this._startCenter=j.add(g).divideBy(2,true);this._startDist=j.distanceTo(g);this._moved=false;this._zooming=true;this._centerOffset=f.subtract(this._startCenter);a.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this);a.DomEvent.preventDefault(i)},_onTouchMove:function(h){if(!h.touches||h.touches.length!==2){return}var g=this._map;var i=g.mouseEventToLayerPoint(h.touches[0]),f=g.mouseEventToLayerPoint(h.touches[1]);this._scale=i.distanceTo(f)/this._startDist;this._delta=i.add(f).divideBy(2,true).subtract(this._startCenter);if(this._scale===1){return}if(!this._moved){a.DomUtil.addClass(g._mapPane,"leaflet-zoom-anim leaflet-touching");g.fire("movestart").fire("zoomstart")._prepareTileBg();this._moved=true}a.Util.cancelAnimFrame(this._animRequest);this._animRequest=a.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);a.DomEvent.preventDefault(h)},_updateOnMove:function(){var h=this._map,g=this._getScaleOrigin(),f=h.layerPointToLatLng(g);h.fire("zoomanim",{center:f,zoom:h.getScaleZoom(this._scale)});h._tileBg.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(this._delta)+" "+a.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(m){if(!this._moved||!this._zooming){return}var l=this._map;this._zooming=false;a.DomUtil.removeClass(l._mapPane,"leaflet-touching");a.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var h=this._getScaleOrigin(),g=l.layerPointToLatLng(h),k=l.getZoom(),f=l.getScaleZoom(this._scale)-k,i=(f>0?Math.ceil(f):Math.floor(f)),j=l._limitZoom(k+i);l.fire("zoomanim",{center:g,zoom:j});l._runAnimation(g,j,l.getZoomScale(j)/this._scale,h,true)},_getScaleOrigin:function(){var f=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(f)}});a.Map.addInitHook("addHandler","touchZoom",a.Map.TouchZoom);a.Map.mergeOptions({boxZoom:true});a.Map.BoxZoom=a.Handler.extend({initialize:function(f){this._map=f;this._container=f._container;this._pane=f._panes.overlayPane},addHooks:function(){a.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){a.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(f){if(!f.shiftKey||((f.which!==1)&&(f.button!==1))){return false}a.DomUtil.disableTextSelection();this._startLayerPoint=this._map.mouseEventToLayerPoint(f);this._box=a.DomUtil.create("div","leaflet-zoom-box",this._pane);a.DomUtil.setPosition(this._box,this._startLayerPoint);this._container.style.cursor="crosshair";a.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).preventDefault(f);this._map.fire("boxzoomstart")},_onMouseMove:function(j){var i=this._startLayerPoint,h=this._box,f=this._map.mouseEventToLayerPoint(j),k=f.subtract(i),g=new a.Point(Math.min(f.x,i.x),Math.min(f.y,i.y));a.DomUtil.setPosition(h,g);h.style.width=(Math.abs(k.x)-4)+"px";h.style.height=(Math.abs(k.y)-4)+"px"},_onMouseUp:function(i){this._pane.removeChild(this._box);this._container.style.cursor="";a.DomUtil.enableTextSelection();a.DomEvent.off(document,"mousemove",this._onMouseMove).off(document,"mouseup",this._onMouseUp);var h=this._map,f=h.mouseEventToLayerPoint(i);var g=new a.LatLngBounds(h.layerPointToLatLng(this._startLayerPoint),h.layerPointToLatLng(f));h.fitBounds(g);h.fire("boxzoomend",{boxZoomBounds:g})}});a.Map.addInitHook("addHandler","boxZoom",a.Map.BoxZoom);a.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109]},initialize:function(f){this._map=f;this._setPanOffset(f.options.keyboardPanOffset);this._setZoomOffset(f.options.keyboardZoomOffset)},addHooks:function(){var f=this._map._container;if(f.tabIndex===-1){f.tabIndex="0"}a.DomEvent.addListener(f,"focus",this._onFocus,this).addListener(f,"blur",this._onBlur,this).addListener(f,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var f=this._map._container;a.DomEvent.removeListener(f,"focus",this._onFocus,this).removeListener(f,"blur",this._onBlur,this).removeListener(f,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){this._map._container.focus()}},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanOffset:function(k){var j=this._panKeys={},g=this.keyCodes,h,f;for(h=0,f=g.left.length;h<f;h++){j[g.left[h]]=[-1*k,0]}for(h=0,f=g.right.length;h<f;h++){j[g.right[h]]=[k,0]}for(h=0,f=g.down.length;h<f;h++){j[g.down[h]]=[0,k]}for(h=0,f=g.up.length;h<f;h++){j[g.up[h]]=[0,-1*k]}},_setZoomOffset:function(k){var j=this._zoomKeys={},g=this.keyCodes,h,f;for(h=0,f=g.zoomIn.length;h<f;h++){j[g.zoomIn[h]]=k}for(h=0,f=g.zoomOut.length;h<f;h++){j[g.zoomOut[h]]=-k}},_addHooks:function(){a.DomEvent.addListener(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){a.DomEvent.removeListener(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){var f=g.keyCode;if(this._panKeys.hasOwnProperty(f)){this._map.panBy(this._panKeys[f])}else{if(this._zoomKeys.hasOwnProperty(f)){this._map.setZoom(this._map.getZoom()+this._zoomKeys[f])}else{return}}a.DomEvent.stop(g)}});a.Map.addInitHook("addHandler","keyboard",a.Map.Keyboard);a.Handler.MarkerDrag=a.Handler.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;if(!this._draggable){this._draggable=new a.Draggable(f,f).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(f){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(g){var f=a.DomUtil.getPosition(this._marker._icon);if(this._marker._shadow){a.DomUtil.setPosition(this._marker._shadow,f)}this._marker._latlng=this._marker._map.layerPointToLatLng(f);this._marker.fire("move").fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}});a.Handler.PolyEdit=a.Handler.extend({options:{icon:new a.DivIcon({iconSize:new a.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(g,f){this._poly=g;a.Util.setOptions(this,f)},addHooks:function(){if(this._poly._map){if(!this._markerGroup){this._initMarkers()}this._poly._map.addLayer(this._markerGroup)}},removeHooks:function(){if(this._poly._map){this._poly._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers}},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new a.LayerGroup()}this._markers=[];var g=this._poly._latlngs,n,m,f,h;for(n=0,f=g.length;n<f;n++){h=this._createMarker(g[n],n);h.on("click",this._onMarkerClick,this);this._markers.push(h)}var l,k;for(n=0,m=f-1;n<f;m=n++){if(n===0&&!(a.Polygon&&(this._poly instanceof a.Polygon))){continue}l=this._markers[m];k=this._markers[n];this._createMiddleMarker(l,k);this._updatePrevNext(l,k)}},_createMarker:function(h,g){var f=new a.Marker(h,{draggable:true,icon:this.options.icon});f._origLatLng=h;f._index=g;f.on("drag",this._onMarkerDrag,this);f.on("dragend",this._fireEdit,this);this._markerGroup.addLayer(f);return f},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(g){var f=g.target;a.Util.extend(f._origLatLng,f._latlng);if(f._middleLeft){f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f))}if(f._middleRight){f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next))}this._poly.redraw()},_onMarkerClick:function(h){if(this._poly._latlngs.length<3){return}var f=h.target,g=f._index;if(f._prev&&f._next){this._createMiddleMarker(f._prev,f._next);this._updatePrevNext(f._prev,f._next)}this._markerGroup.removeLayer(f);if(f._middleLeft){this._markerGroup.removeLayer(f._middleLeft)}if(f._middleRight){this._markerGroup.removeLayer(f._middleRight)}this._markers.splice(g,1);this._poly.spliceLatLngs(g,1);this._updateIndexes(g,-1);this._poly.fire("edit")},_updateIndexes:function(f,g){this._markerGroup.eachLayer(function(h){if(h._index>f){h._index+=g}})},_createMiddleMarker:function(k,i){var l=this._getMiddleLatLng(k,i),f=this._createMarker(l),j,h,g;f.setOpacity(0.6);k._middleRight=i._middleLeft=f;h=function(){var m=i._index;f._index=m;f.off("click",j).on("click",this._onMarkerClick,this);l.lat=f.getLatLng().lat;l.lng=f.getLatLng().lng;this._poly.spliceLatLngs(m,0,l);this._markers.splice(m,0,f);f.setOpacity(1);this._updateIndexes(m,1);i._index++;this._updatePrevNext(k,f);this._updatePrevNext(f,i)};g=function(){f.off("dragstart",h,this);f.off("dragend",g,this);this._createMiddleMarker(k,f);this._createMiddleMarker(f,i)};j=function(){h.call(this);g.call(this);this._poly.fire("edit")};f.on("click",j,this).on("dragstart",h,this).on("dragend",g,this);this._markerGroup.addLayer(f)},_updatePrevNext:function(g,f){g._next=f;f._prev=g},_getMiddleLatLng:function(j,h){var g=this._poly._map,i=g.latLngToLayerPoint(j.getLatLng()),f=g.latLngToLayerPoint(h.getLatLng());return g.layerPointToLatLng(i._add(f).divideBy(2))}});a.Control=a.Class.extend({options:{position:"topright"},initialize:function(f){a.Util.setOptions(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var g=this._map;if(g){g.removeControl(this)}this.options.position=f;if(g){g.addControl(this)}return this},addTo:function(h){this._map=h;var f=this._container=this.onAdd(h),i=this.getPosition(),g=h._controlCorners[i];a.DomUtil.addClass(f,"leaflet-control");if(i.indexOf("bottom")!==-1){g.insertBefore(f,g.firstChild)}else{g.appendChild(f)}return this},removeFrom:function(g){var h=this.getPosition(),f=g._controlCorners[h];f.removeChild(this._container);this._map=null;if(this.onRemove){this.onRemove(g)}return this}});a.control=function(f){return new a.Control(f)};a.Map.include({addControl:function(f){f.addTo(this);return this},removeControl:function(f){f.removeFrom(this);return this},_initControlPos:function(){var h=this._controlCorners={},g="leaflet-",f=this._controlContainer=a.DomUtil.create("div",g+"control-container",this._container);function i(k,l){var j=g+k+" "+g+l;h[k+l]=a.DomUtil.create("div",j,f)}i("top","left");i("top","right");i("bottom","left");i("bottom","right")}});a.Control.Zoom=a.Control.extend({options:{position:"topleft"},onAdd:function(h){var g="leaflet-control-zoom",f=a.DomUtil.create("div",g);this._createButton("Zoom in",g+"-in",f,h.zoomIn,h);this._createButton("Zoom out",g+"-out",f,h.zoomOut,h);return f},_createButton:function(k,i,f,h,g){var j=a.DomUtil.create("a",i,f);j.href="#";j.title=k;a.DomEvent.on(j,"click",a.DomEvent.stopPropagation).on(j,"click",a.DomEvent.preventDefault).on(j,"click",h,g).on(j,"dblclick",a.DomEvent.stopPropagation);return j}});a.Map.mergeOptions({zoomControl:true});a.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new a.Control.Zoom();this.addControl(this.zoomControl)}});a.control.zoom=function(f){return new a.Control.Zoom(f)};a.Control.Attribution=a.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>'},initialize:function(f){a.Util.setOptions(this,f);this._attributions={}},onAdd:function(f){this._container=a.DomUtil.create("div","leaflet-control-attribution");a.DomEvent.disableClickPropagation(this._container);f.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);this._update();return this._container},onRemove:function(f){f.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(f){this.options.prefix=f;this._update();return this},addAttribution:function(f){if(!f){return}if(!this._attributions[f]){this._attributions[f]=0}this._attributions[f]++;this._update();return this},removeAttribution:function(f){if(!f){return}this._attributions[f]--;this._update();return this},_update:function(){if(!this._map){return}var h=[];for(var f in this._attributions){if(this._attributions.hasOwnProperty(f)&&this._attributions[f]){h.push(f)}}var g=[];if(this.options.prefix){g.push(this.options.prefix)}if(h.length){g.push(h.join(", "))}this._container.innerHTML=g.join(" &#8212; ")},_onLayerAdd:function(f){if(f.layer.getAttribution){this.addAttribution(f.layer.getAttribution())}},_onLayerRemove:function(f){if(f.layer.getAttribution){this.removeAttribution(f.layer.getAttribution())}}});a.Map.mergeOptions({attributionControl:true});a.Map.addInitHook(function(){if(this.options.attributionControl){this.attributionControl=(new a.Control.Attribution()).addTo(this)}});a.control.attribution=function(f){return new a.Control.Attribution(f)};a.Control.Scale=a.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(i){this._map=i;var h="leaflet-control-scale",f=a.DomUtil.create("div",h),g=this.options;this._addScales(g,h,f);i.on(g.updateWhenIdle?"moveend":"move",this._update,this);this._update();return f},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,h,f){if(g.metric){this._mScale=a.DomUtil.create("div",h+"-line",f)}if(g.imperial){this._iScale=a.DomUtil.create("div",h+"-line",f)}},_update:function(){var i=this._map.getBounds(),j=i.getCenter().lat,h=6378137*Math.PI*Math.cos(j*Math.PI/180),l=h*(i.getNorthEast().lng-i.getSouthWest().lng)/180,g=this._map.getSize(),f=this.options,k=0;if(g.x>0){k=l*(f.maxWidth/g.x)}this._updateScales(f,k)},_updateScales:function(f,g){if(f.metric&&g){this._updateMetric(g)}if(f.imperial&&g){this._updateImperial(g)}},_updateMetric:function(g){var f=this._getRoundNum(g);this._mScale.style.width=this._getScaleWidth(f/g)+"px";this._mScale.innerHTML=f<1000?f+" m":(f/1000)+" km"},_updateImperial:function(j){var i=j*3.2808399,k=this._iScale,h,g,f;if(i>5280){h=i/5280;g=this._getRoundNum(h);k.style.width=this._getScaleWidth(g/h)+"px";k.innerHTML=g+" mi"}else{f=this._getRoundNum(i);k.style.width=this._getScaleWidth(f/i)+"px";k.innerHTML=f+" ft"}},_getScaleWidth:function(f){return Math.round(this.options.maxWidth*f)-10},_getRoundNum:function(g){var f=Math.pow(10,(Math.floor(g)+"").length-1),h=g/f;h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1;return f*h}});a.control.scale=function(f){return new a.Control.Scale(f)};a.Control.Layers=a.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true},initialize:function(j,h,f){a.Util.setOptions(this,f);this._layers={};this._lastZIndex=0;for(var g in j){if(j.hasOwnProperty(g)){this._addLayer(j[g],g)}}for(g in h){if(h.hasOwnProperty(g)){this._addLayer(h[g],g,true)}}},onAdd:function(f){this._initLayout();this._update();return this._container},addBaseLayer:function(g,f){this._addLayer(g,f);this._update();return this},addOverlay:function(g,f){this._addLayer(g,f,true);this._update();return this},removeLayer:function(f){var g=a.Util.stamp(f);delete this._layers[g];this._update();return this},_initLayout:function(){var g="leaflet-control-layers",f=this._container=a.DomUtil.create("div",g);if(!a.Browser.touch){a.DomEvent.disableClickPropagation(f)}else{a.DomEvent.on(f,"click",a.DomEvent.stopPropagation)}var i=this._form=a.DomUtil.create("form",g+"-list");if(this.options.collapsed){a.DomEvent.on(f,"mouseover",this._expand,this).on(f,"mouseout",this._collapse,this);var h=this._layersLink=a.DomUtil.create("a",g+"-toggle",f);h.href="#";h.title="Layers";if(a.Browser.touch){a.DomEvent.on(h,"click",a.DomEvent.stopPropagation).on(h,"click",a.DomEvent.preventDefault).on(h,"click",this._expand,this)}else{a.DomEvent.on(h,"focus",this._expand,this)}this._map.on("movestart",this._collapse,this)}else{this._expand()}this._baseLayersList=a.DomUtil.create("div",g+"-base",i);this._separator=a.DomUtil.create("div",g+"-separator",i);this._overlaysList=a.DomUtil.create("div",g+"-overlays",i);f.appendChild(i)},_addLayer:function(h,g,f){var i=a.Util.stamp(h);this._layers[i]={layer:h,name:g,overlay:f};if(this.options.autoZIndex&&h.setZIndex){this._lastZIndex++;h.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return}this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var f=false,h=false;for(var g in this._layers){if(this._layers.hasOwnProperty(g)){var j=this._layers[g];this._addItem(j);h=h||j.overlay;f=f||!j.overlay}}this._separator.style.display=(h&&f?"":"none")},_createRadioElement:function(f,i){var h='<input type="radio" name="'+f+'"';if(i){h+=' checked="checked"'}h+="/>";var g=document.createElement("div");g.innerHTML=h;return g.firstChild},_addItem:function(k){var i=document.createElement("label"),g,j=this._map.hasLayer(k.layer);if(k.overlay){g=document.createElement("input");g.type="checkbox";g.defaultChecked=j}else{g=this._createRadioElement("leaflet-base-layers",j)}g.layerId=a.Util.stamp(k.layer);a.DomEvent.on(g,"click",this._onInputClick,this);var h=document.createTextNode(" "+k.name);i.appendChild(g);i.appendChild(h);var f=k.overlay?this._overlaysList:this._baseLayersList;f.appendChild(i)},_onInputClick:function(){var h,g,k,f=this._form.getElementsByTagName("input"),j=f.length;for(h=0;h<j;h++){g=f[h];k=this._layers[g.layerId];if(g.checked){this._map.addLayer(k.layer,!k.overlay)}else{this._map.removeLayer(k.layer)}}},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}});a.control.layers=function(h,g,f){return new a.Control.Layers(h,g,f)};a.Transition=a.Class.extend({includes:a.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:a.DomUtil.setPosition},implemented:function(){return a.Transition.NATIVE||a.Transition.TIMER}},options:{easing:"ease",duration:0.5},_setProperty:function(h,g){var f=a.Transition.CUSTOM_PROPS_SETTERS;if(h in f){f[h](this._el,g)}else{this._el.style[h]=g}}});a.Transition=a.Transition.extend({statics:(function(){var g=a.DomUtil.TRANSITION,f=(g==="webkitTransition"||g==="OTransition"?g+"End":"transitionend");return{NATIVE:!!g,TRANSITION:g,PROPERTY:g+"Property",DURATION:g+"Duration",EASING:g+"TimingFunction",END:f,CUSTOM_PROPS_PROPERTIES:{position:a.Browser.any3d?a.DomUtil.TRANSFORM:"top, left"}}}()),options:{fakeStepInterval:100},initialize:function(g,f){this._el=g;a.Util.setOptions(this,f);a.DomEvent.on(g,a.Transition.END,this._onTransitionEnd,this);this._onFakeStep=a.Util.bind(this._onFakeStep,this)},run:function(g){var i,h=[],f=a.Transition.CUSTOM_PROPS_PROPERTIES;for(i in g){if(g.hasOwnProperty(i)){i=f[i]?f[i]:i;i=this._dasherize(i);h.push(i)}}this._el.style[a.Transition.DURATION]=this.options.duration+"s";this._el.style[a.Transition.EASING]=this.options.easing;this._el.style[a.Transition.PROPERTY]="all";for(i in g){if(g.hasOwnProperty(i)){this._setProperty(i,g[i])}}a.Util.falseFn(this._el.offsetWidth);this._inProgress=true;if(a.Browser.mobileWebkit){this.backupEventFire=setTimeout(a.Util.bind(this._onBackupFireEnd,this),this.options.duration*1.2*1000)}if(a.Transition.NATIVE){clearInterval(this._timer);this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval)}else{this._onTransitionEnd()}},_dasherize:(function(){var g=/([A-Z])/g;function f(h){return"-"+h.toLowerCase()}return function(h){return h.replace(g,f)}}()),_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(f){if(this._inProgress){this._inProgress=false;clearInterval(this._timer);this._el.style[a.Transition.TRANSITION]="";clearTimeout(this.backupEventFire);delete this.backupEventFire;this.fire("step");if(f&&f.type){this.fire("end")}}},_onBackupFireEnd:function(){var f=document.createEvent("Event");f.initEvent(a.Transition.END,true,false);this._el.dispatchEvent(f)}});a.Transition=a.Transition.NATIVE?a.Transition:a.Transition.extend({statics:{getTime:Date.now||function(){return +new Date()},TIMER:true,EASINGS:{linear:function(f){return f},"ease-out":function(f){return f*(2-f)}},CUSTOM_PROPS_GETTERS:{position:a.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(g,f){this._el=g;a.Util.extend(this.options,f);this._easing=a.Transition.EASINGS[this.options.easing]||a.Transition.EASINGS["ease-out"];this._step=a.Util.bind(this._step,this);this._interval=Math.round(1000/this.options.fps)},run:function(h){this._props={};var g=a.Transition.CUSTOM_PROPS_GETTERS,f=a.Transition.UNIT_RE;this.fire("start");for(var k in h){if(h.hasOwnProperty(k)){var j={};if(k in g){j.from=g[k](this._el)}else{var i=this._el.style[k].match(f);j.from=parseFloat(i[0]);j.unit=i[1]}j.to=h[k];this._props[k]=j}}clearInterval(this._timer);this._timer=setInterval(this._step,this._interval);this._startTime=a.Transition.getTime()},_step:function(){var h=a.Transition.getTime(),f=h-this._startTime,g=this.options.duration*1000;if(f<g){this._runFrame(this._easing(f/g))}else{this._runFrame(1);this._complete()}},_runFrame:function(g){var f=a.Transition.CUSTOM_PROPS_SETTERS,j,i,h;for(j in this._props){if(this._props.hasOwnProperty(j)){i=this._props[j];if(j in f){h=i.to.subtract(i.from).multiplyBy(g).add(i.from);f[j](this._el,h)}else{this._el.style[j]=((i.to-i.from)*g+i.from)+i.unit}}}this.fire("step")},_complete:function(){clearInterval(this._timer);this.fire("end")}});a.Map.include(!(a.Transition&&a.Transition.implemented())?{}:{setView:function(g,j,i){j=this._limitZoom(j);var f=(this._zoom!==j);if(this._loaded&&!i&&this._layers){var h=(f?this._zoomToIfClose&&this._zoomToIfClose(g,j):this._panByIfClose(g));if(h){clearTimeout(this._sizeTimer);return this}}this._resetView(g,j);return this},panBy:function(g,f){g=a.point(g);if(!(g.x||g.y)){return this}if(!this._panTransition){this._panTransition=new a.Transition(this._mapPane);this._panTransition.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}a.Util.setOptions(this._panTransition,a.Util.extend({duration:0.25},f));this.fire("movestart");a.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");this._panTransition.run({position:a.DomUtil.getPosition(this._mapPane).subtract(g)});return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_panByIfClose:function(f){var g=this._getCenterOffset(f)._floor();if(this._offsetIsWithinView(g)){this.panBy(g);return true}return false},_offsetIsWithinView:function(i,h){var f=h||1,g=this.getSize();return(Math.abs(i.x)<=g.x*f)&&(Math.abs(i.y)<=g.y*f)}});a.Map.mergeOptions({zoomAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23&&!a.Browser.mobileOpera});if(a.DomUtil.TRANSITION){a.Map.addInitHook(function(){a.DomEvent.on(this._mapPane,a.Transition.END,this._catchTransitionEnd,this)})}a.Map.include(!a.DomUtil.TRANSITION?{}:{_zoomToIfClose:function(f,h){if(this._animatingZoom){return true}if(!this.options.zoomAnimation){return false}var j=this.getZoomScale(h),i=this._getCenterOffset(f).divideBy(1-1/j);if(!this._offsetIsWithinView(i,1)){return false}a.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this.fire("movestart").fire("zoomstart");this.fire("zoomanim",{center:f,zoom:h});var g=this._getCenterLayerPoint().add(i);this._prepareTileBg();this._runAnimation(f,h,j,g);return true},_catchTransitionEnd:function(f){if(this._animatingZoom){this._onZoomTransitionEnd()}},_runAnimation:function(f,n,h,m,i){this._animateToCenter=f;this._animateToZoom=n;this._animatingZoom=true;var g=a.DomUtil.TRANSFORM,l=this._tileBg;clearTimeout(this._clearTileBgTimer);a.Util.falseFn(l.offsetWidth);var k=a.DomUtil.getScaleString(h,m),j=l.style[g];l.style[g]=i?j+" "+k:k+" "+j},_prepareTileBg:function(){var f=this._tilePane,g=this._tileBg;if(g&&this._getLoadedTilesPercentage(g)>0.5&&this._getLoadedTilesPercentage(f)<0.5){f.style.visibility="hidden";f.empty=true;this._stopLoadingImages(f);return}if(!g){g=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane);g.style.zIndex=1}g.style[a.DomUtil.TRANSFORM]="";g.style.visibility="hidden";g.empty=true;f.empty=false;this._tilePane=this._panes.tilePane=g;var h=this._tileBg=f;a.DomUtil.addClass(h,"leaflet-zoom-animated");this._stopLoadingImages(h)},_getLoadedTilesPercentage:function(g){var h=g.getElementsByTagName("img"),j,f,k=0;for(j=0,f=h.length;j<f;j++){if(h[j].complete){k++}}return k/f},_stopLoadingImages:function(g){var h=Array.prototype.slice.call(g.getElementsByTagName("img")),j,f,k;for(j=0,f=h.length;j<f;j++){k=h[j];if(!k.complete){k.onload=a.Util.falseFn;k.onerror=a.Util.falseFn;k.src=a.Util.emptyImageUrl;k.parentNode.removeChild(k)}}},_onZoomTransitionEnd:function(){this._restoreTileFront();a.Util.falseFn(this._tileBg.offsetWidth);this._resetView(this._animateToCenter,this._animateToZoom,true,true);a.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._animatingZoom=false},_restoreTileFront:function(){this._tilePane.innerHTML="";this._tilePane.style.visibility="";this._tilePane.style.zIndex=2;this._tileBg.style.zIndex=1},_clearTileBg:function(){if(!this._animatingZoom&&!this.touchZoom._zooming){this._tileBg.innerHTML=""}}});a.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:false},locate:function(f){f=this._locationOptions=a.Util.extend(this._defaultLocateOptions,f);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var h=a.Util.bind(this._handleGeolocationResponse,this),g=a.Util.bind(this._handleGeolocationError,this);if(f.watch){this._locationWatchId=navigator.geolocation.watchPosition(h,g,f)}else{navigator.geolocation.getCurrentPosition(h,g,f)}return this},stopLocate:function(){if(navigator.geolocation){navigator.geolocation.clearWatch(this._locationWatchId)}return this},_handleGeolocationError:function(f){var h=f.code,g=f.message||(h===1?"permission denied":(h===2?"position unavailable":"timeout"));if(this._locationOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:h,message:"Geolocation error: "+g+"."})},_handleGeolocationResponse:function(k){var l=180*k.coords.accuracy/40000000,h=l*2,j=k.coords.latitude,m=k.coords.longitude,g=new a.LatLng(j,m),n=new a.LatLng(j-l,m-h),i=new a.LatLng(j+l,m+h),f=new a.LatLngBounds(n,i),p=this._locationOptions;if(p.setView){var o=Math.min(this.getBoundsZoom(f),p.maxZoom);this.setView(g,o)}this.fire("locationfound",{latlng:g,bounds:f,accuracy:k.coords.accuracy})}})}(this));